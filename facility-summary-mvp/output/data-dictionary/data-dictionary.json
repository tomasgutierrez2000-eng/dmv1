{
  "L1": [
    {
      "name": "control_relationship",
      "layer": "L1",
      "category": "Counterparty",
      "fields": [
        {
          "name": "control_relationship_id",
          "description": "Unique control relationship identifier",
          "category": "Counterparty",
          "why_required": "Primary key for control relationships",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "control_type_code",
          "description": "DIRECT/INDIRECT/COMMON_CONTROL",
          "category": "Counterparty",
          "why_required": "Documents the nature of control"
        },
        {
          "name": "controlled_counterparty_id",
          "description": "Controlled counterparty id",
          "category": "Counterparty",
          "why_required": "Defines controlled node",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "controller_counterparty_id",
          "description": "Controlling counterparty id",
          "category": "Counterparty",
          "why_required": "Defines controller node",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "created_ts",
          "description": "Created timestamp",
          "category": "Counterparty",
          "why_required": "Audit trail"
        },
        {
          "name": "effective_end_date",
          "description": "Relationship end date",
          "category": "Counterparty",
          "why_required": "Historical grouping and reporting"
        },
        {
          "name": "effective_start_date",
          "description": "Relationship start date",
          "category": "Counterparty",
          "why_required": "Historical grouping and reporting"
        },
        {
          "name": "ownership_pct",
          "description": "Ownership percentage",
          "category": "Counterparty",
          "why_required": "Supports consolidation and SCCL grouping rules"
        },
        {
          "name": "source_system_id",
          "description": "Origin system",
          "category": "Counterparty",
          "why_required": "Lineage",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "source_system_registry",
              "field": "source_system_id"
            }
          }
        }
      ]
    },
    {
      "name": "counterparty",
      "layer": "L1",
      "category": "Counterparty",
      "fields": [
        {
          "name": "is_parent_flag",
          "description": "Checks if ultimate_counterparty_id = counterparty_id",
          "category": "Counterparty"
        },
        {
          "name": "basel_asset_class",
          "description": "CORPORATE, BANK, SOVEREIGN, RETAIL, EQUITY",
          "category": "Counterparty",
          "why_required": "Basel asset class for RWA"
        },
        {
          "name": "basel_risk_grade",
          "description": "Basel internal grade",
          "category": "Counterparty",
          "why_required": "Regulatory/risk segmentation"
        },
        {
          "name": "call_report_counterparty_type",
          "description": "Call Report counterparty type",
          "category": "Counterparty",
          "why_required": "For Call Report"
        },
        {
          "name": "counterparty_id",
          "description": "Unique counterparty identifier",
          "category": "Counterparty",
          "why_required": "Anchor for party-level aggregations",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "counterparty_type",
          "description": "CORPORATE, BANK, SOVEREIGN, RETAIL, SME",
          "category": "Counterparty",
          "why_required": "High-level counterparty classification"
        },
        {
          "name": "country_code",
          "description": "Country of incorporation or risk",
          "category": "Counterparty",
          "why_required": "Jurisdictional treatment",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "country_dim",
              "field": "country_code"
            }
          }
        },
        {
          "name": "country_of_domicile",
          "description": "FK to country_dim - domicile",
          "category": "Counterparty",
          "why_required": "Where entity is based",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "country_dim",
              "field": "country_code"
            }
          }
        },
        {
          "name": "country_of_incorporation",
          "description": "FK to country_dim - incorporation",
          "category": "Counterparty",
          "why_required": "Where entity is incorporated",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "country_dim",
              "field": "country_code"
            }
          }
        },
        {
          "name": "country_of_risk",
          "description": "FK to country_dim - risk",
          "category": "Counterparty",
          "why_required": "Country of primary risk",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "country_dim",
              "field": "country_code"
            }
          }
        },
        {
          "name": "created_ts",
          "description": "Record creation timestamp",
          "category": "Counterparty",
          "why_required": "Audit trail"
        },
        {
          "name": "entity_type_code",
          "description": "Entity type code",
          "category": "Counterparty",
          "why_required": "Normalizes counterparty typing and regulatory class",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "entity_type_dim",
              "field": "entity_type_code"
            }
          }
        },
        {
          "name": "external_rating_fitch",
          "description": "Fitch external rating",
          "category": "Counterparty",
          "why_required": "Fitch rating"
        },
        {
          "name": "external_rating_moodys",
          "description": "Moody's external rating",
          "category": "Counterparty",
          "why_required": "Moody's rating"
        },
        {
          "name": "external_rating_sp",
          "description": "S&P external rating",
          "category": "Counterparty",
          "why_required": "Standard & Poor's rating"
        },
        {
          "name": "fr2590_counterparty_type",
          "description": "FR 2590 counterparty type",
          "category": "Counterparty",
          "why_required": "BANK, NONBANK_FI, CORPORATE"
        },
        {
          "name": "industry_id",
          "description": "Industry identifier",
          "category": "Counterparty",
          "why_required": "Normalizes industry mapping for counterparty",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "industry_dim",
              "field": "industry_id"
            }
          }
        },
        {
          "name": "internal_risk_rating",
          "description": "Internal credit rating",
          "category": "Counterparty",
          "why_required": "Bank's internal rating"
        },
        {
          "name": "is_affiliated",
          "description": "Affiliated entity flag",
          "category": "Counterparty",
          "why_required": "Related party"
        },
        {
          "name": "is_central_counterparty",
          "description": "CCP flag",
          "category": "Counterparty",
          "why_required": "Central counterparty for clearing"
        },
        {
          "name": "is_financial_institution",
          "description": "Financial institution flag",
          "category": "Counterparty",
          "why_required": "CRITICAL for FR 2590 Schedule A vs B"
        },
        {
          "name": "is_insider",
          "description": "Insider flag",
          "category": "Counterparty",
          "why_required": "Reg O tracking"
        },
        {
          "name": "is_multilateral_dev_bank",
          "description": "MDB flag",
          "category": "Counterparty",
          "why_required": "Multilateral development bank"
        },
        {
          "name": "is_public_sector_entity",
          "description": "PSE flag",
          "category": "Counterparty",
          "why_required": "Public sector entity"
        },
        {
          "name": "is_regulated_entity",
          "description": "Regulated entity flag",
          "category": "Counterparty",
          "why_required": "For regulatory treatment"
        },
        {
          "name": "is_sovereign",
          "description": "Sovereign entity flag",
          "category": "Counterparty",
          "why_required": "Government/central bank"
        },
        {
          "name": "legal_name",
          "description": "Legal name of counterparty",
          "category": "Counterparty",
          "why_required": "Human identification"
        },
        {
          "name": "lei_code",
          "description": "Legal Entity Identifier",
          "category": "Counterparty",
          "why_required": "External identification standard"
        },
        {
          "name": "lgd_unsecured",
          "description": "Unsecured LGD estimate",
          "category": "Counterparty",
          "why_required": "LGD without collateral"
        },
        {
          "name": "pd_annual",
          "description": "Annual probability of default",
          "category": "Counterparty",
          "why_required": "PD for IRB approach"
        },
        {
          "name": "regulatory_counterparty_type",
          "description": "Regulatory class (e.g., bank, corp)",
          "category": "Counterparty",
          "why_required": "Reporting classification"
        },
        {
          "name": "updated_ts",
          "description": "Record update timestamp",
          "category": "Counterparty",
          "why_required": "Audit trail"
        },
        {
          "name": "y14_obligor_type",
          "description": "Y-14 obligor type",
          "category": "Counterparty",
          "why_required": "For Y-14 classification"
        }
      ]
    },
    {
      "name": "counterparty_hierarchy",
      "layer": "L1",
      "category": "Counterparty",
      "fields": [
        {
          "name": "as_of_date",
          "description": "Hierarchy as-of date",
          "category": "Counterparty",
          "why_required": "Temporal validity",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true,
            "fk_target": {
              "layer": "L1",
              "table": "date_dim",
              "field": "calendar_date"
            }
          }
        },
        {
          "name": "counterparty_id",
          "description": "FK to counterparty",
          "category": "Counterparty",
          "why_required": "Which counterparty",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "immediate_parent_id",
          "description": "Immediate parent counterparty",
          "category": "Counterparty",
          "why_required": "Aggregation roll-up",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "ownership_pct",
          "description": "Ownership percentage",
          "category": "Counterparty",
          "why_required": "Consolidation calculations"
        },
        {
          "name": "ultimate_parent_id",
          "description": "Ultimate parent id",
          "category": "Counterparty",
          "why_required": "Top-level roll-up",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        }
      ]
    },
    {
      "name": "economic_interdependence_relationship",
      "layer": "L1",
      "category": "Counterparty",
      "fields": [
        {
          "name": "counterparty_id_1",
          "description": "Counterparty id 1",
          "category": "Counterparty",
          "why_required": "Defines first node",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "counterparty_id_2",
          "description": "Counterparty id 2",
          "category": "Counterparty",
          "why_required": "Defines second node",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "created_ts",
          "description": "Created timestamp",
          "category": "Counterparty",
          "why_required": "Audit trail"
        },
        {
          "name": "econ_interdep_relationship_id",
          "description": "Unique economic interdependence relationship identifier",
          "category": "Counterparty",
          "why_required": "Primary key for economic interdependence links",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "effective_end_date",
          "description": "Relationship end date",
          "category": "Counterparty",
          "why_required": "Historical grouping and reporting"
        },
        {
          "name": "effective_start_date",
          "description": "Relationship start date",
          "category": "Counterparty",
          "why_required": "Historical grouping and reporting"
        },
        {
          "name": "interdependence_strength_score",
          "description": "Strength score (0-1)",
          "category": "Counterparty",
          "why_required": "Supports materiality thresholds for grouping"
        },
        {
          "name": "interdependence_type_code",
          "description": "Type (SUPPLY_CHAIN/FUNDING/COMMON_REVENUE/etc.)",
          "category": "Counterparty",
          "why_required": "Explains the linkage"
        },
        {
          "name": "rationale",
          "description": "Rationale/notes",
          "category": "Counterparty",
          "why_required": "Auditability for supervisory review"
        },
        {
          "name": "source_system_id",
          "description": "Origin system",
          "category": "Counterparty",
          "why_required": "Lineage",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "source_system_registry",
              "field": "source_system_id"
            }
          }
        }
      ]
    },
    {
      "name": "entity_type_dim",
      "layer": "L1",
      "category": "Counterparty",
      "fields": [
        {
          "name": "active_flag",
          "description": "Active flag",
          "category": "Counterparty",
          "why_required": "Operational gating"
        },
        {
          "name": "created_ts",
          "description": "Created timestamp",
          "category": "Counterparty",
          "why_required": "Audit trail"
        },
        {
          "name": "entity_type_code",
          "description": "Entity type code (BANK/CORP/SOVEREIGN/RETAIL/etc.)",
          "category": "Counterparty",
          "why_required": "Primary key for entity typing",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "entity_type_name",
          "description": "Entity type name",
          "category": "Counterparty",
          "why_required": "Human-readable label"
        },
        {
          "name": "is_financial_institution",
          "description": "Financial institution flag",
          "category": "Counterparty",
          "why_required": "Critical for regulatory segmentation"
        },
        {
          "name": "is_sovereign",
          "description": "Sovereign flag",
          "category": "Counterparty",
          "why_required": "Critical for risk weighting and limits"
        },
        {
          "name": "regulatory_counterparty_class",
          "description": "Regulatory counterparty class",
          "category": "Counterparty",
          "why_required": "Drives RWA/large exposures treatments"
        },
        {
          "name": "updated_ts",
          "description": "Updated timestamp",
          "category": "Counterparty",
          "why_required": "Audit trail"
        }
      ]
    },
    {
      "name": "counterparty_role_dim",
      "layer": "L1",
      "category": "Counterparty Participation",
      "fields": [
        {
          "name": "counterparty_role_code",
          "description": "Primary key for role standardization.",
          "category": "Counterparty Participation",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "role_name",
          "description": "Reporting and UI.",
          "category": "Counterparty Participation"
        },
        {
          "name": "role_category",
          "description": "Drives attribution rules and grouping.",
          "category": "Counterparty Participation"
        },
        {
          "name": "is_risk_bearing_flag",
          "description": "Prevents mis-attribution.",
          "category": "Counterparty Participation"
        },
        {
          "name": "description",
          "description": "Governance clarity.",
          "category": "Counterparty Participation"
        },
        {
          "name": "is_active_flag",
          "description": "Operational gating.",
          "category": "Counterparty Participation"
        },
        {
          "name": "created_ts",
          "description": "Audit trail.",
          "category": "Counterparty Participation"
        },
        {
          "name": "updated_ts",
          "description": "Audit trail.",
          "category": "Counterparty Participation"
        }
      ]
    },
    {
      "name": "credit_agreement_counterparty_participation",
      "layer": "L1",
      "category": "Counterparty Participation",
      "fields": [
        {
          "name": "agreement_participation_id",
          "description": "Primary key.",
          "category": "Counterparty Participation",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "credit_agreement_id",
          "description": "Associates participation to the agreement.",
          "category": "Counterparty Participation",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "credit_agreement_master",
              "field": "credit_agreement_id"
            }
          }
        },
        {
          "name": "counterparty_id",
          "description": "Identifies participating party.",
          "category": "Counterparty Participation",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "counterparty_role_code",
          "description": "Defines role for attribution and drill-down.",
          "category": "Counterparty Participation",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty_role_dim",
              "field": "counterparty_role_code"
            }
          }
        },
        {
          "name": "participation_pct",
          "description": "Supports agreement-level pro-rata attribution.",
          "category": "Counterparty Participation"
        },
        {
          "name": "role_priority_rank",
          "description": "Deterministic “primary” selection.",
          "category": "Counterparty Participation"
        },
        {
          "name": "is_primary_flag",
          "description": "Fast default attribution.",
          "category": "Counterparty Participation"
        },
        {
          "name": "source_record_id",
          "description": "Traceability.",
          "category": "Counterparty Participation"
        },
        {
          "name": "created_ts",
          "description": "Audit trail.",
          "category": "Counterparty Participation"
        }
      ]
    },
    {
      "name": "facility_counterparty_participation",
      "layer": "L1",
      "category": "Counterparty Participation",
      "fields": [
        {
          "name": "facility_participation_id",
          "description": "Primary key.",
          "category": "Counterparty Participation",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "facility_id",
          "description": "Associates participation to a facility.",
          "category": "Counterparty Participation",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "facility_master",
              "field": "facility_id"
            }
          }
        },
        {
          "name": "counterparty_id",
          "description": "Identifies participating party.",
          "category": "Counterparty Participation",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "counterparty_role_code",
          "description": "Defines role for attribution and drill-down.",
          "category": "Counterparty Participation",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty_role_dim",
              "field": "counterparty_role_code"
            }
          }
        },
        {
          "name": "participation_pct",
          "description": "Avoids double counting and supports pro-rata attribution.",
          "category": "Counterparty Participation"
        },
        {
          "name": "role_priority_rank",
          "description": "Deterministic “primary” selection.",
          "category": "Counterparty Participation"
        },
        {
          "name": "is_primary_flag",
          "description": "Fast default attribution.",
          "category": "Counterparty Participation"
        },
        {
          "name": "source_record_id",
          "description": "Traceability.",
          "category": "Counterparty Participation"
        },
        {
          "name": "created_ts",
          "description": "Audit trail.",
          "category": "Counterparty Participation"
        }
      ]
    },
    {
      "name": "sccl_counterparty_group",
      "layer": "L1",
      "category": "SCCL Grouping",
      "fields": [
        {
          "name": "as_of_date",
          "description": "Group effective as-of date",
          "category": "SCCL Grouping",
          "why_required": "Point-in-time grouping for reporting",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "date_dim",
              "field": "calendar_date"
            }
          }
        },
        {
          "name": "created_by",
          "description": "Creator",
          "category": "SCCL Grouping",
          "why_required": "Governance evidence"
        },
        {
          "name": "created_ts",
          "description": "Created timestamp",
          "category": "SCCL Grouping",
          "why_required": "Audit trail"
        },
        {
          "name": "grouping_basis",
          "description": "CONTROL/ECONOMIC_INTERDEPENDENCE/MIXED",
          "category": "SCCL Grouping",
          "why_required": "Documents basis for SCCL grouping"
        },
        {
          "name": "jurisdiction_code",
          "description": "Jurisdiction/regulator context",
          "category": "SCCL Grouping",
          "why_required": "SCCL rules differ by jurisdiction",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "regulatory_jurisdiction",
              "field": "jurisdiction_code"
            }
          }
        },
        {
          "name": "run_version_id",
          "description": "Run version",
          "category": "SCCL Grouping",
          "why_required": "Reproducibility and auditability",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "run_control",
              "field": "run_version_id"
            }
          }
        },
        {
          "name": "sccl_group_id",
          "description": "Unique SCCL counterparty group identifier",
          "category": "SCCL Grouping",
          "why_required": "Primary key referenced by exposure summaries",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "sccl_group_name",
          "description": "Group name",
          "category": "SCCL Grouping",
          "why_required": "Human-readable label"
        },
        {
          "name": "ultimate_parent_counterparty_id",
          "description": "Ultimate parent counterparty",
          "category": "SCCL Grouping",
          "why_required": "Roll-up key for group-level metrics",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        }
      ]
    },
    {
      "name": "sccl_counterparty_group_member",
      "layer": "L1",
      "category": "SCCL Grouping",
      "fields": [
        {
          "name": "counterparty_id",
          "description": "Member counterparty id",
          "category": "SCCL Grouping",
          "why_required": "Defines membership",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "created_ts",
          "description": "Created timestamp",
          "category": "SCCL Grouping",
          "why_required": "Audit trail"
        },
        {
          "name": "effective_end_date",
          "description": "Membership end date",
          "category": "SCCL Grouping",
          "why_required": "Historical grouping and reporting"
        },
        {
          "name": "effective_start_date",
          "description": "Membership start date",
          "category": "SCCL Grouping",
          "why_required": "Historical grouping and reporting"
        },
        {
          "name": "included_flag",
          "description": "Whether member is included for SCCL aggregation",
          "category": "SCCL Grouping",
          "why_required": "Allows rule-based exclusions"
        },
        {
          "name": "member_role_code",
          "description": "PARENT/SUBSIDIARY/AFFILIATE/OTHER",
          "category": "SCCL Grouping",
          "why_required": "Role in group"
        },
        {
          "name": "ownership_pct",
          "description": "Ownership percentage (if applicable)",
          "category": "SCCL Grouping",
          "why_required": "Supports consolidation logic"
        },
        {
          "name": "sccl_group_id",
          "description": "SCCL group identifier",
          "category": "SCCL Grouping",
          "why_required": "Links member to group",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "sccl_counterparty_group",
              "field": "sccl_group_id"
            }
          }
        },
        {
          "name": "sccl_group_member_id",
          "description": "Unique SCCL group member identifier",
          "category": "SCCL Grouping",
          "why_required": "Primary key for membership records",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "source_system_id",
          "description": "Origin system",
          "category": "SCCL Grouping",
          "why_required": "Lineage",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "source_system_registry",
              "field": "source_system_id"
            }
          }
        }
      ]
    },
    {
      "name": "credit_agreement_master",
      "layer": "L1",
      "category": "Facility",
      "fields": [
        {
          "name": "agreement_reference",
          "description": "External agreement reference",
          "category": "Facility",
          "why_required": "Operational reconciliation to source systems"
        },
        {
          "name": "agreement_type",
          "description": "Loan agreement type",
          "category": "Facility",
          "why_required": "Classification and reporting"
        },
        {
          "name": "borrower_counterparty_id",
          "description": "Borrower/obligor counterparty id",
          "category": "Facility",
          "why_required": "Agreement-level obligor anchor",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "credit_agreement_id",
          "description": "Unique credit agreement identifier",
          "category": "Facility",
          "why_required": "Primary key for agreement-level governance and linking facilities",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "currency_code",
          "description": "Agreement currency",
          "category": "Facility",
          "why_required": "Currency context",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "currency_dim",
              "field": "currency_code"
            }
          }
        },
        {
          "name": "lender_legal_entity_id",
          "description": "Our legal entity id",
          "category": "Facility",
          "why_required": "Booking and reporting entity",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "legal_entity",
              "field": "legal_entity_id"
            }
          }
        },
        {
          "name": "maturity_date",
          "description": "Maturity date",
          "category": "Facility",
          "why_required": "Tenor and term calculations",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "date_dim",
              "field": "calendar_date"
            }
          }
        },
        {
          "name": "origination_date",
          "description": "Origination date",
          "category": "Facility",
          "why_required": "Vintage analysis and lifecycle controls",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "date_dim",
              "field": "calendar_date"
            }
          }
        },
        {
          "name": "status_code",
          "description": "ACTIVE/CLOSED/AMENDED",
          "category": "Facility",
          "why_required": "Lifecycle control"
        }
      ]
    },
    {
      "name": "facility_master",
      "layer": "L1",
      "category": "Facility",
      "fields": [
        {
          "name": "committed_facility_amt",
          "description": "Committed limit",
          "category": "Facility",
          "why_required": "Used in unfunded exposure"
        },
        {
          "name": "counterparty_id",
          "description": "FK to counterparty",
          "category": "Facility",
          "why_required": "Borrower/obligor",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "created_by",
          "description": "Creator",
          "category": "Facility",
          "why_required": "Provenance"
        },
        {
          "name": "created_ts",
          "description": "Created timestamp",
          "category": "Facility",
          "why_required": "Provenance"
        },
        {
          "name": "credit_agreement_id",
          "description": "Credit agreement identifier (if applicable)",
          "category": "Facility",
          "why_required": "Links facility to agreement-level governance"
        },
        {
          "name": "currency_code",
          "description": "Facility currency_code",
          "category": "Facility",
          "why_required": "Currency of amounts",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "currency_dim",
              "field": "currency_code"
            }
          }
        },
        {
          "name": "facility_id",
          "description": "PK for facility",
          "category": "Facility",
          "why_required": "Unique facility identifier",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "facility_name",
          "description": "Facility name/description",
          "category": "Facility",
          "why_required": "Human context and reporting"
        },
        {
          "name": "facility_reference",
          "description": "External facility reference (source id)",
          "category": "Facility",
          "why_required": "Operational traceability and reconciliation"
        },
        {
          "name": "facility_status",
          "description": "Active/Closed",
          "category": "Facility",
          "why_required": "Operational gating"
        },
        {
          "name": "facility_type",
          "description": "Type (loan, LOC, etc.)",
          "category": "Facility",
          "why_required": "Regulatory classification"
        },
        {
          "name": "interest_rate_reference",
          "description": "Base rate reference",
          "category": "Facility",
          "why_required": "Rate sourcing"
        },
        {
          "name": "maturity_date",
          "description": "Maturity date",
          "category": "Facility",
          "why_required": "Contractual end"
        },
        {
          "name": "origination_date",
          "description": "Origination date",
          "category": "Facility",
          "why_required": "Contractual start"
        },
        {
          "name": "product_id",
          "description": "Product classification",
          "category": "Facility",
          "why_required": "Product mapping"
        },
        {
          "name": "revolving_flag",
          "description": "Whether revolving",
          "category": "Facility",
          "why_required": "Behavioral treatment"
        },
        {
          "name": "updated_ts",
          "description": "Record update timestamp",
          "category": "Facility",
          "why_required": "Audit trail"
        },
        {
          "name": "region_code",
          "description": "Region code (North America, EMEA, APAC, LATAM)",
          "category": "Facility",
          "why_required": "Geography filter and donut chart (Page 2)"
        },
        {
          "name": "industry_code",
          "description": "Industry/sector code",
          "category": "Facility",
          "why_required": "Sector concentration (Page 3) and industry filter",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "industry_dim",
              "field": "industry_id"
            }
          }
        },
        {
          "name": "lob_segment_id",
          "description": "FK to enterprise_business_taxonomy — resolves the LoB hierarchy node for this facility (replaces inline lob_l1/l2/l3)",
          "category": "Facility",
          "why_required": "Single FK replaces 3 inline LoB fields; enables full L1–L8+ hierarchy traversal",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "enterprise_business_taxonomy",
              "field": "managed_segment_id"
            }
          }
        },
        {
          "name": "product_node_id",
          "description": "FK to enterprise_product_taxonomy — resolves the product hierarchy node (replaces plain product_id)",
          "category": "Facility",
          "why_required": "Single FK enables product hierarchy traversal and FR 2590 mapping",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "enterprise_product_taxonomy",
              "field": "product_node_id"
            }
          }
        },
        {
          "name": "portfolio_id",
          "description": "FK to portfolio_dim — portfolio assignment for this facility",
          "category": "Facility",
          "why_required": "Supports Portfolio global filter in Header Bar; enables portfolio-level segmentation across all pages",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "portfolio_dim",
              "field": "portfolio_id"
            }
          }
        },
        {
          "name": "rate_index_id",
          "description": "FK to interest_rate_index_dim — benchmark rate for this facility",
          "category": "Facility",
          "why_required": "Resolves orphaned interest_rate_reference",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "interest_rate_index_dim",
              "field": "rate_index_id"
            }
          }
        },
        {
          "name": "interest_rate_type",
          "description": "Rate structure: FIXED, FLOATING, VARIABLE, HYBRID, STEP_UP",
          "category": "Facility",
          "why_required": "Pricing classification"
        },
        {
          "name": "interest_rate_spread_bps",
          "description": "Credit spread above benchmark in basis points",
          "category": "Facility",
          "why_required": "Page 7 Average Spread"
        },
        {
          "name": "all_in_rate_pct",
          "description": "Total interest rate (benchmark + spread) as %",
          "category": "Facility",
          "why_required": "Page 7 Average Interest Base Rate"
        },
        {
          "name": "rate_cap_pct",
          "description": "Interest rate ceiling for variable-rate facilities",
          "category": "Facility",
          "why_required": "Page 7 Interest Rate Cap"
        },
        {
          "name": "rate_floor_pct",
          "description": "Interest rate floor for variable-rate facilities",
          "category": "Facility",
          "why_required": "Risk-adjusted return"
        },
        {
          "name": "payment_frequency",
          "description": "MONTHLY, QUARTERLY, SEMI_ANNUAL, ANNUAL, BULLET, AT_MATURITY",
          "category": "Facility",
          "why_required": "Cash flow modeling"
        },
        {
          "name": "day_count_convention",
          "description": "Day count basis: ACT/360, ACT/365, 30/360",
          "category": "Facility",
          "why_required": "Accurate accrual"
        },
        {
          "name": "prepayment_penalty_flag",
          "description": "Y/N — early repayment penalty",
          "category": "Facility",
          "why_required": "Prepayment risk"
        },
        {
          "name": "next_repricing_date",
          "description": "Next rate reset date for floating-rate",
          "category": "Facility",
          "why_required": "IR risk management"
        },
        {
          "name": "amortization_type",
          "description": "AMORTIZING, BULLET, BALLOON, INTEREST_ONLY, REVOLVING",
          "category": "Facility",
          "why_required": "Cash flow profile"
        },
        {
          "name": "ledger_account_id",
          "description": "FK to ledger_account_dim — GL booking account",
          "category": "Facility",
          "why_required": "Risk-to-finance recon",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "ledger_account_dim",
              "field": "ledger_account_id"
            }
          }
        }
      ]
    },
    {
      "name": "contract_master",
      "layer": "L1",
      "category": "Contract Identity",
      "fields": [
        {
          "name": "contract_id",
          "description": "Primary key enabling contract-level drill-down and anchoring.",
          "category": "Contract Identity",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "contract_type",
          "description": "Routes downstream logic and reporting.",
          "category": "Contract Identity"
        },
        {
          "name": "contract_status",
          "description": "Filtering and lifecycle analytics.",
          "category": "Contract Identity"
        },
        {
          "name": "effective_start_date",
          "description": "Historical reproducibility.",
          "category": "Contract Identity"
        },
        {
          "name": "effective_end_date",
          "description": "Historical reproducibility.",
          "category": "Contract Identity"
        },
        {
          "name": "facility_id",
          "description": "Unifies facility-based and contract-based views.",
          "category": "Contract Identity",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "facility_master",
              "field": "facility_id"
            }
          }
        },
        {
          "name": "instrument_id",
          "description": "Links to instrument master where applicable.",
          "category": "Contract Identity",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "instrument_master",
              "field": "instrument_id"
            }
          }
        },
        {
          "name": "netting_set_id",
          "description": "Defines netting boundary for derivative/SFT contracts.",
          "category": "Contract Identity",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "netting_set",
              "field": "netting_set_id"
            }
          }
        },
        {
          "name": "counterparty_id",
          "description": "Obligor / facing entity linkage.",
          "category": "Contract Identity",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "legal_entity_id",
          "description": "Legal accountability and reporting perimeter.",
          "category": "Contract Identity",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "legal_entity",
              "field": "legal_entity_id"
            }
          }
        },
        {
          "name": "product_node_id",
          "description": "Consistent product reporting and FR2590 mapping.",
          "category": "Contract Identity"
        },
        {
          "name": "source_record_id",
          "description": "Traceability back to source.",
          "category": "Contract Identity"
        },
        {
          "name": "created_ts",
          "description": "Audit trail.",
          "category": "Contract Identity"
        },
        {
          "name": "updated_ts",
          "description": "Audit trail.",
          "category": "Contract Identity"
        }
      ]
    },
    {
      "name": "instrument_identifier",
      "layer": "L1",
      "category": "Instrument",
      "fields": [
        {
          "name": "created_ts",
          "description": "Created timestamp",
          "category": "Instrument",
          "why_required": "Audit trail"
        },
        {
          "name": "effective_end_date",
          "description": "End date",
          "category": "Instrument",
          "why_required": "Temporal validity"
        },
        {
          "name": "effective_start_date",
          "description": "Start date",
          "category": "Instrument",
          "why_required": "Temporal validity",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true
          }
        },
        {
          "name": "id_type",
          "description": "Identifier type (PK): CUSIP, ISIN, SEDOL, TICKER, RIC",
          "category": "Instrument",
          "why_required": "Type of identifier",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true
          }
        },
        {
          "name": "id_value",
          "description": "Identifier value",
          "category": "Instrument",
          "why_required": "The actual identifier"
        },
        {
          "name": "instrument_id",
          "description": "FK to instrument_master (PK)",
          "category": "Instrument",
          "why_required": "Parent instrument",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true,
            "fk_target": {
              "layer": "L1",
              "table": "instrument_master",
              "field": "instrument_id"
            }
          }
        },
        {
          "name": "is_primary",
          "description": "Primary identifier flag",
          "category": "Instrument",
          "why_required": "Main identifier for instrument"
        },
        {
          "name": "source_system_id",
          "description": "Origin system",
          "category": "Instrument",
          "why_required": "Lineage",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "source_system_registry",
              "field": "source_system_id"
            }
          }
        }
      ]
    },
    {
      "name": "instrument_master",
      "layer": "L1",
      "category": "Instrument",
      "fields": [
        {
          "name": "active_flag",
          "description": "Active flag",
          "category": "Instrument",
          "why_required": "Operational gating"
        },
        {
          "name": "country_code",
          "description": "FK to country_dim",
          "category": "Instrument",
          "why_required": "Country of risk",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "country_dim",
              "field": "country_code"
            }
          }
        },
        {
          "name": "coupon_frequency",
          "description": "MONTHLY, QUARTERLY, SEMI_ANNUAL, ANNUAL",
          "category": "Instrument",
          "why_required": "Payment frequency"
        },
        {
          "name": "coupon_rate",
          "description": "Coupon rate for fixed income",
          "category": "Instrument",
          "why_required": "Interest rate"
        },
        {
          "name": "created_ts",
          "description": "Created timestamp",
          "category": "Instrument",
          "why_required": "Audit trail"
        },
        {
          "name": "currency_code",
          "description": "FK to currency_dim",
          "category": "Instrument",
          "why_required": "Denomination currency",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "currency_dim",
              "field": "currency_code"
            }
          }
        },
        {
          "name": "instrument_id",
          "description": "Unique instrument identifier (PK)",
          "category": "Instrument",
          "why_required": "Primary key",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "instrument_name",
          "description": "Instrument name",
          "category": "Instrument",
          "why_required": "Display name"
        },
        {
          "name": "instrument_type",
          "description": "BOND, EQUITY, LOAN, DERIVATIVE, FUND",
          "category": "Instrument",
          "why_required": "Instrument category"
        },
        {
          "name": "is_callable",
          "description": "Callable bond flag",
          "category": "Instrument",
          "why_required": "Optionality"
        },
        {
          "name": "is_convertible",
          "description": "Convertible bond flag",
          "category": "Instrument",
          "why_required": "Hybrid instrument"
        },
        {
          "name": "issue_date",
          "description": "Issue/origination date",
          "category": "Instrument",
          "why_required": "For vintage analysis"
        },
        {
          "name": "issuer_counterparty_id",
          "description": "FK to counterparty",
          "category": "Instrument",
          "why_required": "Issuer of instrument",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "maturity_date",
          "description": "Maturity date",
          "category": "Instrument",
          "why_required": "For maturity bucketing"
        },
        {
          "name": "product_id",
          "description": "FK to product_hierarchy",
          "category": "Instrument",
          "why_required": "Product classification"
        },
        {
          "name": "seniority",
          "description": "SENIOR_SECURED, SENIOR_UNSECURED, SUBORDINATED",
          "category": "Instrument",
          "why_required": "For LGD"
        },
        {
          "name": "updated_ts",
          "description": "Updated timestamp",
          "category": "Instrument",
          "why_required": "Audit trail"
        }
      ]
    },
    {
      "name": "collateral_asset_master",
      "layer": "L1",
      "category": "Collateral & CRM",
      "fields": [
        {
          "name": "collateral_asset_id",
          "description": "PK for asset",
          "category": "Collateral & CRM",
          "why_required": "Unique asset identifier",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "collateral_asset_type",
          "description": "Asset category",
          "category": "Collateral & CRM",
          "why_required": "Mapping and valuation logic"
        },
        {
          "name": "collateral_id",
          "description": "Business identifier for collateral asset (if distinct)",
          "category": "Collateral & CRM",
          "why_required": "Supports reconciliation to source collateral ids and operational workflows"
        },
        {
          "name": "collateral_type_id",
          "description": "Collateral type",
          "category": "Collateral & CRM",
          "why_required": "CRM eligibility mapping",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "collateral_type",
              "field": "collateral_type_id"
            }
          }
        },
        {
          "name": "counterparty_id",
          "description": "Pledgor/owner counterparty id",
          "category": "Collateral & CRM",
          "why_required": "Links collateral to counterparty-level analytics",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "country_code",
          "description": "Country",
          "category": "Collateral & CRM",
          "why_required": "Jurisdiction",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "country_dim",
              "field": "country_code"
            }
          }
        },
        {
          "name": "created_ts",
          "description": "Created timestamp",
          "category": "Collateral & CRM",
          "why_required": "Audit trail"
        },
        {
          "name": "currency_code",
          "description": "Currency",
          "category": "Collateral & CRM",
          "why_required": "Currency context",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "currency_dim",
              "field": "currency_code"
            }
          }
        },
        {
          "name": "description",
          "description": "Text description",
          "category": "Collateral & CRM",
          "why_required": "Human context"
        },
        {
          "name": "legal_entity_id",
          "description": "Owning/legal entity id",
          "category": "Collateral & CRM",
          "why_required": "Determines reporting ownership and consolidation",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "legal_entity",
              "field": "legal_entity_id"
            }
          }
        },
        {
          "name": "original_cost",
          "description": "Original cost value",
          "category": "Collateral & CRM",
          "why_required": "Valuation/GL linkage"
        },
        {
          "name": "source_record_id",
          "description": "Source row id",
          "category": "Collateral & CRM",
          "why_required": "Traceability"
        },
        {
          "name": "updated_ts",
          "description": "Updated timestamp",
          "category": "Collateral & CRM",
          "why_required": "Audit trail"
        },
        {
          "name": "valuation_currency_code",
          "description": "Currency code for valuation amounts",
          "category": "Collateral & CRM",
          "why_required": "Currency context for valuations",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "currency_dim",
              "field": "currency_code"
            }
          }
        },
        {
          "name": "vintage_date",
          "description": "Origination/vintage",
          "category": "Collateral & CRM",
          "why_required": "Age-related models"
        },
        {
          "name": "collateral_status",
          "description": "Lifecycle: PLEDGED, RELEASED, SUBSTITUTED, IN_PERFECTION, EXPIRED",
          "category": "Collateral & CRM",
          "why_required": "No lifecycle tracking exists"
        },
        {
          "name": "lien_priority",
          "description": "FIRST, SECOND, PARI_PASSU, SUBORDINATED",
          "category": "Collateral & CRM",
          "why_required": "Recovery priority, LGD"
        },
        {
          "name": "charge_type",
          "description": "FIXED_CHARGE, FLOATING_CHARGE, HYPOTHECATION, PLEDGE, MORTGAGE, ASSIGNMENT",
          "category": "Collateral & CRM",
          "why_required": "Legal enforceability"
        },
        {
          "name": "location_country_code",
          "description": "Country where collateral is located",
          "category": "Collateral & CRM",
          "why_required": "Jurisdiction",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "country_dim",
              "field": "country_code"
            }
          }
        },
        {
          "name": "location_description",
          "description": "Free-text location",
          "category": "Collateral & CRM",
          "why_required": "Asset identification"
        },
        {
          "name": "insurance_flag",
          "description": "Y/N — collateral insured",
          "category": "Collateral & CRM",
          "why_required": "Recovery assumptions"
        },
        {
          "name": "insurance_expiry_date",
          "description": "Insurance coverage expiry",
          "category": "Collateral & CRM",
          "why_required": "Stale insurance = higher LGD"
        },
        {
          "name": "regulatory_eligible_flag",
          "description": "Y/N — Basel-eligible at asset instance level",
          "category": "Collateral & CRM",
          "why_required": "Distinct from type-level"
        },
        {
          "name": "maturity_date",
          "description": "Collateral expiry/maturity",
          "category": "Collateral & CRM",
          "why_required": "Tenor mismatch haircuts"
        },
        {
          "name": "revaluation_frequency",
          "description": "DAILY, MONTHLY, QUARTERLY, ANNUAL, EVENT_DRIVEN",
          "category": "Collateral & CRM",
          "why_required": "Supervisory compliance"
        }
      ]
    },
    {
      "name": "collateral_eligibility_dim",
      "layer": "L1",
      "category": "Collateral & CRM",
      "fields": [
        {
          "name": "collateral_eligibility_id",
          "description": "Unique collateral eligibility rule identifier",
          "category": "Collateral & CRM",
          "why_required": "Primary key for collateral eligibility rules",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "collateral_type_id",
          "description": "Collateral type identifier",
          "category": "Collateral & CRM",
          "why_required": "Applies rules to collateral taxonomy",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "collateral_type",
              "field": "collateral_type_id"
            }
          }
        },
        {
          "name": "effective_from_date",
          "description": "Start date of rule validity",
          "category": "Collateral & CRM",
          "why_required": "Historical consistency"
        },
        {
          "name": "effective_to_date",
          "description": "End date of rule validity",
          "category": "Collateral & CRM",
          "why_required": "Historical consistency"
        },
        {
          "name": "eligible_flag",
          "description": "Eligibility under the regime",
          "category": "Collateral & CRM",
          "why_required": "Controls recognition as financial collateral"
        },
        {
          "name": "haircut_method",
          "description": "STANDARD/SUPERVISORY/INTERNAL",
          "category": "Collateral & CRM",
          "why_required": "Determines haircut source"
        },
        {
          "name": "jurisdiction_code",
          "description": "Jurisdiction/regulator context",
          "category": "Collateral & CRM",
          "why_required": "Rules differ by jurisdiction",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "regulatory_jurisdiction",
              "field": "jurisdiction_code"
            }
          }
        },
        {
          "name": "regulatory_capital_basis_id",
          "description": "Regulatory capital basis",
          "category": "Collateral & CRM",
          "why_required": "Rules differ by regime/basis",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "regulatory_capital_basis_dim",
              "field": "regulatory_capital_basis_id"
            }
          }
        }
      ]
    },
    {
      "name": "collateral_haircut_dim",
      "layer": "L1",
      "category": "Collateral & CRM",
      "fields": [
        {
          "name": "collateral_haircut_id",
          "description": "Unique haircut rule identifier",
          "category": "Collateral & CRM",
          "why_required": "Primary key for haircut rules",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "collateral_type_id",
          "description": "Collateral type identifier",
          "category": "Collateral & CRM",
          "why_required": "Applies haircut to collateral taxonomy",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "collateral_type",
              "field": "collateral_type_id"
            }
          }
        },
        {
          "name": "effective_from_date",
          "description": "Start date of rule validity",
          "category": "Collateral & CRM",
          "why_required": "Historical consistency"
        },
        {
          "name": "effective_to_date",
          "description": "End date of rule validity",
          "category": "Collateral & CRM",
          "why_required": "Historical consistency"
        },
        {
          "name": "haircut_pct",
          "description": "Haircut percentage",
          "category": "Collateral & CRM",
          "why_required": "Used to compute eligible value"
        },
        {
          "name": "jurisdiction_code",
          "description": "Jurisdiction/regulator context",
          "category": "Collateral & CRM",
          "why_required": "Haircuts differ by jurisdiction",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "regulatory_jurisdiction",
              "field": "jurisdiction_code"
            }
          }
        },
        {
          "name": "maturity_bucket_id",
          "description": "Maturity bucket identifier",
          "category": "Collateral & CRM",
          "why_required": "Haircuts depend on residual maturity",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "maturity_bucket_dim",
              "field": "maturity_bucket_id"
            }
          }
        },
        {
          "name": "regulatory_capital_basis_id",
          "description": "Regulatory capital basis",
          "category": "Collateral & CRM",
          "why_required": "Haircuts differ by regime/basis",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "regulatory_capital_basis_dim",
              "field": "regulatory_capital_basis_id"
            }
          }
        },
        {
          "name": "volatility_adjustment_pct",
          "description": "Volatility adjustment percentage",
          "category": "Collateral & CRM",
          "why_required": "Comprehensive approach support"
        }
      ]
    },
    {
      "name": "collateral_link",
      "layer": "L1",
      "category": "Collateral & CRM",
      "fields": [
        {
          "name": "anchor_id",
          "description": "Anchor identifier",
          "category": "Collateral & CRM",
          "why_required": "Links collateral to the correct object"
        },
        {
          "name": "anchor_type",
          "description": "Anchor type (FACILITY/CONTRACT/NETTING_SET)",
          "category": "Collateral & CRM",
          "why_required": "Enables model-wide reuse without hard-coded joins"
        },
        {
          "name": "collateral_asset_id",
          "description": "Collateral asset identifier",
          "category": "Collateral & CRM",
          "why_required": "Links to collateral asset master",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "collateral_asset_master",
              "field": "collateral_asset_id"
            }
          }
        },
        {
          "name": "collateral_link_id",
          "description": "Unique collateral-to-anchor link identifier",
          "category": "Collateral & CRM",
          "why_required": "Primary key for collateral link records",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "created_ts",
          "description": "Created timestamp",
          "category": "Collateral & CRM",
          "why_required": "Audit trail"
        },
        {
          "name": "effective_end_date",
          "description": "Link end date",
          "category": "Collateral & CRM",
          "why_required": "Historical lookback"
        },
        {
          "name": "effective_start_date",
          "description": "Link start date",
          "category": "Collateral & CRM",
          "why_required": "Historical lookback"
        },
        {
          "name": "link_type_code",
          "description": "PLEDGED/ALLOCATED/ENCUMBERED",
          "category": "Collateral & CRM",
          "why_required": "Controls recognition logic"
        },
        {
          "name": "pledged_amount",
          "description": "Pledged amount in collateral currency",
          "category": "Collateral & CRM",
          "why_required": "Supports collateral recognition and allocations"
        },
        {
          "name": "pledged_currency_code",
          "description": "Pledge currency code",
          "category": "Collateral & CRM",
          "why_required": "Currency context",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "currency_dim",
              "field": "currency_code"
            }
          }
        },
        {
          "name": "source_system_id",
          "description": "Origin system",
          "category": "Collateral & CRM",
          "why_required": "Lineage",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "source_system_registry",
              "field": "source_system_id"
            }
          }
        }
      ]
    },
    {
      "name": "collateral_type",
      "layer": "L1",
      "category": "Collateral & CRM",
      "fields": [
        {
          "name": "active_flag",
          "description": "Active flag",
          "category": "Collateral & CRM",
          "why_required": "Operational gating"
        },
        {
          "name": "basel_rwa_weight",
          "description": "RWA weight",
          "category": "Collateral & CRM",
          "why_required": "Risk weighting guidance"
        },
        {
          "name": "collateral_category",
          "description": "CASH, SECURITIES, REAL_ESTATE, RECEIVABLES, EQUIPMENT, OTHER",
          "category": "Collateral & CRM",
          "why_required": "High-level category"
        },
        {
          "name": "collateral_type_id",
          "description": "Type PK",
          "category": "Collateral & CRM",
          "why_required": "Identifier for collateral taxonomy",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "description",
          "description": "Collateral type description",
          "category": "Collateral & CRM",
          "why_required": "Human context"
        },
        {
          "name": "hqla_level",
          "description": "HQLA classification",
          "category": "Collateral & CRM",
          "why_required": "Liquidity/regulatory use"
        },
        {
          "name": "is_eligible_crm",
          "description": "Eligible for credit risk mitigation",
          "category": "Collateral & CRM",
          "why_required": "Basel CRM eligibility"
        },
        {
          "name": "is_financial_collateral",
          "description": "Financial collateral flag",
          "category": "Collateral & CRM",
          "why_required": "For Basel CRM treatment"
        },
        {
          "name": "minimum_holding_period_days",
          "description": "Minimum holding period",
          "category": "Collateral & CRM",
          "why_required": "For haircut calculation"
        },
        {
          "name": "name",
          "description": "Type name",
          "category": "Collateral & CRM",
          "why_required": "Human readable"
        },
        {
          "name": "risk_mitigant_subtype_code",
          "description": "",
          "category": "Collateral & CRM"
        },
        {
          "name": "standard_haircut_pct",
          "description": "Standard supervisory haircut",
          "category": "Collateral & CRM",
          "why_required": "Basel haircut"
        },
        {
          "name": "volatility_adjustment_pct",
          "description": "Volatility adjustment",
          "category": "Collateral & CRM",
          "why_required": "For comprehensive approach"
        }
      ]
    },
    {
      "name": "crm_eligibility_dim",
      "layer": "L1",
      "category": "Collateral & CRM",
      "fields": [
        {
          "name": "crm_eligibility_id",
          "description": "Unique CRM eligibility rule identifier",
          "category": "Collateral & CRM",
          "why_required": "Primary key for eligibility rules",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "crm_type_code",
          "description": "CRM type code",
          "category": "Collateral & CRM",
          "why_required": "Applies eligibility rules to a CRM type",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "crm_type_dim",
              "field": "crm_type_code"
            }
          }
        },
        {
          "name": "effective_from_date",
          "description": "Start date of rule validity",
          "category": "Collateral & CRM",
          "why_required": "Historical consistency"
        },
        {
          "name": "effective_to_date",
          "description": "End date of rule validity",
          "category": "Collateral & CRM",
          "why_required": "Historical consistency"
        },
        {
          "name": "eligibility_conditions",
          "description": "Text/JSON conditions",
          "category": "Collateral & CRM",
          "why_required": "Stores logic-as-data for auditability"
        },
        {
          "name": "eligible_flag",
          "description": "Whether eligible under the regime",
          "category": "Collateral & CRM",
          "why_required": "Determines recognition in RWA and limits"
        },
        {
          "name": "jurisdiction_code",
          "description": "Jurisdiction/regulator context",
          "category": "Collateral & CRM",
          "why_required": "Rules differ by jurisdiction",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "regulatory_jurisdiction",
              "field": "jurisdiction_code"
            }
          }
        },
        {
          "name": "regulatory_capital_basis_id",
          "description": "Regulatory capital basis",
          "category": "Collateral & CRM",
          "why_required": "Rules differ by regime/basis",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "regulatory_capital_basis_dim",
              "field": "regulatory_capital_basis_id"
            }
          }
        },
        {
          "name": "source_system_id",
          "description": "Origin system",
          "category": "Collateral & CRM",
          "why_required": "Lineage",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "source_system_registry",
              "field": "source_system_id"
            }
          }
        }
      ]
    },
    {
      "name": "crm_protection_master",
      "layer": "L1",
      "category": "Collateral & CRM",
      "fields": [
        {
          "name": "beneficiary_legal_entity_id",
          "description": "Beneficiary legal entity id",
          "category": "Collateral & CRM",
          "why_required": "Determines recognition at reporting entity level",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "legal_entity",
              "field": "legal_entity_id"
            }
          }
        },
        {
          "name": "coverage_pct",
          "description": "Coverage percentage",
          "category": "Collateral & CRM",
          "why_required": "Determines effective covered exposure"
        },
        {
          "name": "created_ts",
          "description": "Created timestamp",
          "category": "Collateral & CRM",
          "why_required": "Audit trail"
        },
        {
          "name": "crm_type_code",
          "description": "CRM type code",
          "category": "Collateral & CRM",
          "why_required": "Classifies the protection instrument",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "crm_type_dim",
              "field": "crm_type_code"
            }
          }
        },
        {
          "name": "currency_code",
          "description": "Currency code of protection notional",
          "category": "Collateral & CRM",
          "why_required": "Currency context",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "currency_dim",
              "field": "currency_code"
            }
          }
        },
        {
          "name": "enforceable_flag",
          "description": "Enforceability indicator",
          "category": "Collateral & CRM",
          "why_required": "Determines whether protection is recognized"
        },
        {
          "name": "governing_law_jurisdiction_id",
          "description": "Governing law jurisdiction id",
          "category": "Collateral & CRM",
          "why_required": "Enforceability context"
        },
        {
          "name": "maturity_date",
          "description": "Protection maturity date",
          "category": "Collateral & CRM",
          "why_required": "Eligibility and maturity matching",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "date_dim",
              "field": "calendar_date"
            }
          }
        },
        {
          "name": "notional_amount",
          "description": "Notional/covered amount",
          "category": "Collateral & CRM",
          "why_required": "Recognition and allocation calculations"
        },
        {
          "name": "protection_id",
          "description": "Unique CRM protection identifier",
          "category": "Collateral & CRM",
          "why_required": "Primary key referenced by CRM allocations and summaries",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "protection_provider_counterparty_id",
          "description": "Protection provider counterparty id",
          "category": "Collateral & CRM",
          "why_required": "Required for substitution/double default logic",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "protection_reference",
          "description": "External reference/contract id",
          "category": "Collateral & CRM",
          "why_required": "Operational traceability"
        },
        {
          "name": "updated_ts",
          "description": "Updated timestamp",
          "category": "Collateral & CRM",
          "why_required": "Audit trail"
        }
      ]
    },
    {
      "name": "crm_type_dim",
      "layer": "L1",
      "category": "Collateral & CRM",
      "fields": [
        {
          "name": "active_flag",
          "description": "Active flag",
          "category": "Collateral & CRM",
          "why_required": "Operational gating"
        },
        {
          "name": "basel_recognition_method",
          "description": "SIMPLE/COMPREHENSIVE/SUBSTITUTION/DOUBLE_DEFAULT",
          "category": "Collateral & CRM",
          "why_required": "Documents method of recognition"
        },
        {
          "name": "crm_category",
          "description": "COLLATERAL/GUARANTEE/CREDIT_DERIVATIVE/NETTING",
          "category": "Collateral & CRM",
          "why_required": "Drives recognition logic and regulatory treatment"
        },
        {
          "name": "crm_type_code",
          "description": "CRM type code",
          "category": "Collateral & CRM",
          "why_required": "Primary key for CRM taxonomy",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "crm_type_name",
          "description": "CRM type name",
          "category": "Collateral & CRM",
          "why_required": "Human-readable label"
        },
        {
          "name": "risk_mitigant_subtype_code",
          "description": "",
          "category": "Collateral & CRM"
        },
        {
          "name": "eligible_flag",
          "description": "Baseline eligibility indicator",
          "category": "Collateral & CRM",
          "why_required": "Operational gating"
        }
      ]
    },
    {
      "name": "protection_link",
      "layer": "L1",
      "category": "Collateral & CRM",
      "fields": [
        {
          "name": "allocated_amount",
          "description": "Allocated amount of protection",
          "category": "Collateral & CRM",
          "why_required": "Supports allocation and recognition"
        },
        {
          "name": "allocated_currency_code",
          "description": "Allocation currency code",
          "category": "Collateral & CRM",
          "why_required": "Currency context",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "currency_dim",
              "field": "currency_code"
            }
          }
        },
        {
          "name": "allocation_pct",
          "description": "Allocation percentage",
          "category": "Collateral & CRM",
          "why_required": "Allocation transparency"
        },
        {
          "name": "anchor_id",
          "description": "Anchor identifier",
          "category": "Collateral & CRM",
          "why_required": "Links protection to the correct object"
        },
        {
          "name": "anchor_type",
          "description": "Anchor type (FACILITY/CONTRACT/NETTING_SET)",
          "category": "Collateral & CRM",
          "why_required": "Enables model-wide reuse without hard-coded joins"
        },
        {
          "name": "created_ts",
          "description": "Created timestamp",
          "category": "Collateral & CRM",
          "why_required": "Audit trail"
        },
        {
          "name": "effective_end_date",
          "description": "Link end date",
          "category": "Collateral & CRM",
          "why_required": "Historical lookback"
        },
        {
          "name": "effective_start_date",
          "description": "Link start date",
          "category": "Collateral & CRM",
          "why_required": "Historical lookback"
        },
        {
          "name": "protection_id",
          "description": "Protection identifier",
          "category": "Collateral & CRM",
          "why_required": "Links to CRM protection master",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "crm_protection_master",
              "field": "protection_id"
            }
          }
        },
        {
          "name": "protection_link_id",
          "description": "Unique protection-to-anchor link identifier",
          "category": "Collateral & CRM",
          "why_required": "Primary key for protection link records",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "source_system_id",
          "description": "Origin system",
          "category": "Collateral & CRM",
          "why_required": "Lineage",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "source_system_registry",
              "field": "source_system_id"
            }
          }
        }
      ]
    },
    {
      "name": "risk_mitigant_link",
      "layer": "L1",
      "category": "Collateral & CRM",
      "fields": [
        {
          "name": "risk_mitigant_link_id",
          "description": "Primary key for mitigant linkage.",
          "category": "Collateral & CRM",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "risk_mitigant_id",
          "description": "Associates mitigant to an exposure scope.",
          "category": "Collateral & CRM",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "risk_mitigant_master",
              "field": "risk_mitigant_id"
            }
          }
        },
        {
          "name": "anchor_type",
          "description": "Defines scope of mitigant application.",
          "category": "Collateral & CRM"
        },
        {
          "name": "anchor_id",
          "description": "Defines scope of mitigant application.",
          "category": "Collateral & CRM"
        },
        {
          "name": "effective_start_date",
          "description": "Historical reproducibility.",
          "category": "Collateral & CRM"
        },
        {
          "name": "effective_end_date",
          "description": "Historical reproducibility.",
          "category": "Collateral & CRM"
        },
        {
          "name": "created_ts",
          "description": "Audit trail.",
          "category": "Collateral & CRM"
        },
        {
          "name": "source_system_id",
          "description": "Lineage.",
          "category": "Collateral & CRM",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "source_system_registry",
              "field": "source_system_id"
            }
          }
        }
      ]
    },
    {
      "name": "risk_mitigant_master",
      "layer": "L1",
      "category": "Collateral & CRM",
      "fields": [
        {
          "name": "risk_mitigant_id",
          "description": "Primary key enabling unified collateral + CRM reporting.",
          "category": "Collateral & CRM",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "mitigant_source_type",
          "description": "Tracks origin and resolves to underlying objects.",
          "category": "Collateral & CRM"
        },
        {
          "name": "risk_mitigant_subtype_code",
          "description": "Controls taxonomy and roll-ups.",
          "category": "Collateral & CRM",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "risk_mitigant_type_dim",
              "field": "risk_mitigant_subtype_code"
            }
          }
        },
        {
          "name": "collateral_asset_id",
          "description": "Link to underlying collateral, if applicable.",
          "category": "Collateral & CRM",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "collateral_asset_master",
              "field": "collateral_asset_id"
            }
          }
        },
        {
          "name": "protection_id",
          "description": "Link to underlying protection, if applicable.",
          "category": "Collateral & CRM",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "crm_protection_master",
              "field": "protection_id"
            }
          }
        },
        {
          "name": "provider_counterparty_id",
          "description": "Risk shifting / substitution analysis.",
          "category": "Collateral & CRM",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "description",
          "description": "User-facing drill-down.",
          "category": "Collateral & CRM"
        },
        {
          "name": "effective_from_date",
          "description": "Historical reproducibility.",
          "category": "Collateral & CRM"
        },
        {
          "name": "effective_to_date",
          "description": "Historical reproducibility.",
          "category": "Collateral & CRM"
        },
        {
          "name": "is_active_flag",
          "description": "Operational gating.",
          "category": "Collateral & CRM"
        },
        {
          "name": "source_system_id",
          "description": "Lineage.",
          "category": "Collateral & CRM",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "source_system_registry",
              "field": "source_system_id"
            }
          }
        },
        {
          "name": "source_record_id",
          "description": "Traceability.",
          "category": "Collateral & CRM"
        },
        {
          "name": "created_ts",
          "description": "Audit trail.",
          "category": "Collateral & CRM"
        },
        {
          "name": "updated_ts",
          "description": "Audit trail.",
          "category": "Collateral & CRM"
        }
      ]
    },
    {
      "name": "risk_mitigant_type_dim",
      "layer": "L1",
      "category": "Collateral & CRM",
      "fields": [
        {
          "name": "risk_mitigant_subtype_code",
          "description": "Primary key for conformed mitigant taxonomy.",
          "category": "Collateral & CRM",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "subtype_name",
          "description": "Reporting and UI.",
          "category": "Collateral & CRM"
        },
        {
          "name": "parent_group_code",
          "description": "Enables M-1 vs M-2 roll-ups required by dashboards.",
          "category": "Collateral & CRM"
        },
        {
          "name": "parent_group_name",
          "description": "Readable roll-up labels.",
          "category": "Collateral & CRM"
        },
        {
          "name": "mitigant_category",
          "description": "Cross-asset standardization.",
          "category": "Collateral & CRM"
        },
        {
          "name": "eligible_flag",
          "description": "Eligibility reporting and controls.",
          "category": "Collateral & CRM"
        },
        {
          "name": "display_order",
          "description": "Consistent ordering.",
          "category": "Collateral & CRM"
        },
        {
          "name": "active_flag",
          "description": "Operational gating.",
          "category": "Collateral & CRM"
        },
        {
          "name": "created_ts",
          "description": "Audit trail.",
          "category": "Collateral & CRM"
        },
        {
          "name": "updated_ts",
          "description": "Audit trail.",
          "category": "Collateral & CRM"
        },
        {
          "name": "source_system_id",
          "description": "Lineage.",
          "category": "Collateral & CRM",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "source_system_registry",
              "field": "source_system_id"
            }
          }
        }
      ]
    },
    {
      "name": "csa_master",
      "layer": "L1",
      "category": "Netting & Margin",
      "fields": [
        {
          "name": "csa_id",
          "description": "Unique CSA identifier",
          "category": "Netting & Margin",
          "why_required": "Primary key for CSA terms used in margining",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "csa_type",
          "description": "CSA type (BILATERAL/CCP/TRIPARTY)",
          "category": "Netting & Margin",
          "why_required": "Controls operational and regulatory treatment"
        },
        {
          "name": "currency_code",
          "description": "Currency code",
          "category": "Netting & Margin",
          "why_required": "Currency context for thresholds",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "currency_dim",
              "field": "currency_code"
            }
          }
        },
        {
          "name": "effective_end_date",
          "description": "CSA end date",
          "category": "Netting & Margin",
          "why_required": "Historical lookback"
        },
        {
          "name": "effective_start_date",
          "description": "CSA start date",
          "category": "Netting & Margin",
          "why_required": "Historical lookback"
        },
        {
          "name": "eligible_collateral_desc",
          "description": "Eligible collateral description/text",
          "category": "Netting & Margin",
          "why_required": "Stores eligibility logic-as-data"
        },
        {
          "name": "governing_law",
          "description": "Governing law",
          "category": "Netting & Margin",
          "why_required": "Legal enforceability context"
        },
        {
          "name": "independent_amount",
          "description": "Independent amount/IM",
          "category": "Netting & Margin",
          "why_required": "Supports margin requirements"
        },
        {
          "name": "margin_frequency",
          "description": "Margin call frequency",
          "category": "Netting & Margin",
          "why_required": "Supports operational margining logic"
        },
        {
          "name": "minimum_transfer_amount",
          "description": "Minimum transfer amount",
          "category": "Netting & Margin",
          "why_required": "Operational CSA term"
        },
        {
          "name": "netting_set_id",
          "description": "Netting set identifier",
          "category": "Netting & Margin",
          "why_required": "Associates CSA terms to the netting set",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "netting_set",
              "field": "netting_set_id"
            }
          }
        },
        {
          "name": "threshold_amount",
          "description": "Threshold amount",
          "category": "Netting & Margin",
          "why_required": "Margin threshold term"
        }
      ]
    },
    {
      "name": "margin_agreement",
      "layer": "L1",
      "category": "Netting & Margin",
      "fields": [
        {
          "name": "as_of_date",
          "description": "As-of date for terms snapshot (if time-varying)",
          "category": "Netting & Margin",
          "why_required": "Supports point-in-time reconstruction",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "date_dim",
              "field": "calendar_date"
            }
          }
        },
        {
          "name": "csa_id",
          "description": "CSA identifier",
          "category": "Netting & Margin",
          "why_required": "Links to CSA terms",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "csa_master",
              "field": "csa_id"
            }
          }
        },
        {
          "name": "currency_code",
          "description": "Currency code",
          "category": "Netting & Margin",
          "why_required": "Currency context",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "currency_dim",
              "field": "currency_code"
            }
          }
        },
        {
          "name": "im_amount",
          "description": "Initial margin amount",
          "category": "Netting & Margin",
          "why_required": "Margin requirement metric"
        },
        {
          "name": "loaded_ts",
          "description": "Load timestamp",
          "category": "Netting & Margin",
          "why_required": "Audit trail"
        },
        {
          "name": "margin_agreement_id",
          "description": "Unique margin agreement identifier",
          "category": "Netting & Margin",
          "why_required": "Primary key for margin agreement terms",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "margin_model",
          "description": "SIMPLE/VAR/IM_MODEL",
          "category": "Netting & Margin",
          "why_required": "Determines margin calculation approach"
        },
        {
          "name": "netting_set_id",
          "description": "Netting set identifier",
          "category": "Netting & Margin",
          "why_required": "Associates margin agreement to netting set",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "netting_set",
              "field": "netting_set_id"
            }
          }
        },
        {
          "name": "source_system_id",
          "description": "Origin system",
          "category": "Netting & Margin",
          "why_required": "Lineage",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "source_system_registry",
              "field": "source_system_id"
            }
          }
        },
        {
          "name": "vm_amount",
          "description": "Variation margin amount",
          "category": "Netting & Margin",
          "why_required": "Margin requirement metric"
        }
      ]
    },
    {
      "name": "netting_agreement",
      "layer": "L1",
      "category": "Netting & Margin",
      "fields": [
        {
          "name": "counterparty_id",
          "description": "FK to counterparty",
          "category": "Netting & Margin",
          "why_required": "Agreement counterparty",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "effective_end_date",
          "description": "Agreement end date",
          "category": "Netting & Margin",
          "why_required": "Validity period"
        },
        {
          "name": "effective_start_date",
          "description": "Agreement start date",
          "category": "Netting & Margin",
          "why_required": "Validity period"
        },
        {
          "name": "governing_law",
          "description": "Governing jurisdiction",
          "category": "Netting & Margin",
          "why_required": "Legal jurisdiction"
        },
        {
          "name": "is_bankruptcy_remote",
          "description": "Bankruptcy remote flag",
          "category": "Netting & Margin",
          "why_required": "For netting validity"
        },
        {
          "name": "is_enforceable",
          "description": "Legal enforceability flag",
          "category": "Netting & Margin",
          "why_required": "Critical for netting benefit"
        },
        {
          "name": "legal_entity_id",
          "description": "FK to legal_entity",
          "category": "Netting & Margin",
          "why_required": "Our entity in agreement",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "legal_entity",
              "field": "legal_entity_id"
            }
          }
        },
        {
          "name": "margin_frequency",
          "description": "DAILY, WEEKLY",
          "category": "Netting & Margin",
          "why_required": "Collateral exchange frequency"
        },
        {
          "name": "minimum_transfer_amount",
          "description": "Minimum transfer amount",
          "category": "Netting & Margin",
          "why_required": "CSA MTA"
        },
        {
          "name": "netting_agreement_type",
          "description": "ISDA_MASTER, GMRA, GMSLA, MRA, CSA",
          "category": "Netting & Margin",
          "why_required": "Agreement type"
        },
        {
          "name": "netting_set_id",
          "description": "",
          "category": "Netting & Margin"
        },
        {
          "name": "netting_agreement_id",
          "description": "Netting set identifier (PK)",
          "category": "Netting & Margin",
          "why_required": "Primary key",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "source_system_id",
          "description": "FK to source_system_registry",
          "category": "Netting & Margin",
          "why_required": "Data lineage",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "source_system_registry",
              "field": "source_system_id"
            }
          }
        },
        {
          "name": "threshold_amount",
          "description": "Margin threshold",
          "category": "Netting & Margin",
          "why_required": "CSA threshold"
        }
      ]
    },
    {
      "name": "netting_set",
      "layer": "L1",
      "category": "Netting & Margin",
      "fields": [
        {
          "name": "netting_set_id",
          "description": "Unique netting set identifier",
          "category": "Netting & Margin",
          "why_required": "PK — anchor for netting membership, CSA linkage, and L2 netting exposure snapshots",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "netting_set_type",
          "description": "Netting set type (ISDA_MASTER / GMRA / GMSLA / CCP_CLEARING / BILATERAL)",
          "category": "Netting & Margin",
          "why_required": "Determines netting enforceability rules and regulatory treatment"
        },
        {
          "name": "counterparty_id",
          "description": "Facing counterparty identifier",
          "category": "Netting & Margin",
          "why_required": "Identifies counterparty against whom netting is enforced",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "legal_entity_id",
          "description": "Our legal entity identifier",
          "category": "Netting & Margin",
          "why_required": "Reporting entity side of the netting set",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "legal_entity",
              "field": "legal_entity_id"
            }
          }
        },
        {
          "name": "governing_law",
          "description": "Governing law jurisdiction",
          "category": "Netting & Margin",
          "why_required": "Enforceability determination for close-out netting"
        },
        {
          "name": "is_enforceable_flag",
          "description": "Whether netting is legally enforceable",
          "category": "Netting & Margin",
          "why_required": "Determines if gross-to-net reduction is permitted for regulatory purposes"
        },
        {
          "name": "effective_start_date",
          "description": "Netting agreement effective date",
          "category": "Netting & Margin",
          "why_required": "Lifecycle tracking"
        },
        {
          "name": "effective_end_date",
          "description": "Netting agreement end date (NULL = open)",
          "category": "Netting & Margin",
          "why_required": "Lifecycle tracking"
        },
        {
          "name": "master_agreement_reference",
          "description": "Master agreement reference (e.g., ISDA Master Agreement number)",
          "category": "Netting & Margin",
          "why_required": "Operational traceability to legal documentation"
        },
        {
          "name": "active_flag",
          "description": "Active indicator",
          "category": "Netting & Margin",
          "why_required": "Operational gating"
        },
        {
          "name": "created_ts",
          "description": "Record creation timestamp",
          "category": "Netting & Margin",
          "why_required": "Audit trail"
        },
        {
          "name": "updated_ts",
          "description": "Record update timestamp",
          "category": "Netting & Margin",
          "why_required": "Audit trail"
        }
      ]
    },
    {
      "name": "netting_set_link",
      "layer": "L1",
      "category": "Netting & Margin",
      "fields": [
        {
          "name": "anchor_id",
          "description": "Anchor identifier",
          "category": "Netting & Margin",
          "why_required": "Associates a position/trade/exposure with the set"
        },
        {
          "name": "anchor_type",
          "description": "Anchor type (POSITION/TRADE/EXPOSURE)",
          "category": "Netting & Margin",
          "why_required": "Generic link for cross-product coverage"
        },
        {
          "name": "effective_end_date",
          "description": "Link end date",
          "category": "Netting & Margin",
          "why_required": "Historical consistency"
        },
        {
          "name": "effective_start_date",
          "description": "Link start date",
          "category": "Netting & Margin",
          "why_required": "Historical consistency"
        },
        {
          "name": "netting_set_id",
          "description": "Netting set identifier",
          "category": "Netting & Margin",
          "why_required": "Associates the anchor to the set",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "netting_set",
              "field": "netting_set_id"
            }
          }
        },
        {
          "name": "netting_set_link_id",
          "description": "Unique netting set link identifier",
          "category": "Netting & Margin",
          "why_required": "Primary key for linking anchors into a netting set",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "source_system_id",
          "description": "Origin system",
          "category": "Netting & Margin",
          "why_required": "Lineage",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "source_system_registry",
              "field": "source_system_id"
            }
          }
        }
      ]
    },
    {
      "name": "limit_rule",
      "layer": "L1",
      "category": "Limits & Thresholds",
      "fields": [
        {
          "name": "limit_rule_id",
          "description": "PK — surrogate identifier for the approved limit rule",
          "category": "Limits & Thresholds",
          "why_required": "Unique key for FK references from limit_utilization_event and limit_threshold",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "limit_scope",
          "description": "Scope of the limit: COUNTERPARTY or LOB",
          "category": "Limits & Thresholds",
          "why_required": "Determines whether limit is anchored to a counterparty or a LoB segment"
        },
        {
          "name": "counterparty_id",
          "description": "FK to counterparty (when scope = COUNTERPARTY)",
          "category": "Limits & Thresholds",
          "why_required": "Links limit to a specific counterparty for counterparty-level concentration limits",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "lob_segment_id",
          "description": "FK to enterprise_business_taxonomy (when scope = LOB)",
          "category": "Limits & Thresholds",
          "why_required": "Links limit to a LoB node for LoB-level concentration limits",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "enterprise_business_taxonomy",
              "field": "managed_segment_id"
            }
          }
        },
        {
          "name": "limit_type",
          "description": "Limit classification: Single Counterparty / Sector Concentration / LoB Concentration",
          "category": "Limits & Thresholds",
          "why_required": "Categorizes the limit for reporting and governance"
        },
        {
          "name": "risk_tier",
          "description": "Risk tier: Tier 1 (25% Limit) / Tier 1 (15% Limit) / Limit Amount (Absolute)",
          "category": "Limits & Thresholds",
          "why_required": "Drives risk tier distribution chart (Page 3) and tier-based analysis"
        },
        {
          "name": "limit_amount_usd",
          "description": "Approved limit amount in USD",
          "category": "Limits & Thresholds",
          "why_required": "The limit value — set by credit policy; used as denominator for utilization %"
        },
        {
          "name": "inner_threshold_pct",
          "description": "Warning threshold as percentage of limit amount",
          "category": "Limits & Thresholds",
          "why_required": "Triggers WARNING status when utilization exceeds this percentage"
        },
        {
          "name": "outer_threshold_pct",
          "description": "Breach threshold as percentage of limit amount",
          "category": "Limits & Thresholds",
          "why_required": "Triggers BREACH status when utilization exceeds this percentage"
        },
        {
          "name": "effective_from_date",
          "description": "Date the limit became effective",
          "category": "Limits & Thresholds",
          "why_required": "Limit lifecycle — determines when limit applies"
        },
        {
          "name": "effective_to_date",
          "description": "Date the limit expires (NULL = currently active)",
          "category": "Limits & Thresholds",
          "why_required": "Limit lifecycle — determines when limit no longer applies"
        },
        {
          "name": "as_of_date",
          "description": "Snapshot date for the limit definition",
          "category": "Limits & Thresholds",
          "why_required": "Temporal partitioning — supports historical limit analysis",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true
          }
        }
      ]
    },
    {
      "name": "limit_threshold",
      "layer": "L1",
      "category": "Limits & Thresholds",
      "fields": [
        {
          "name": "limit_threshold_id",
          "description": "PK — unique threshold boundary record",
          "category": "Limits & Thresholds",
          "why_required": "Unique identifier for each threshold band definition",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "limit_rule_id",
          "description": "FK to limit_rule — links threshold bands to a specific limit",
          "category": "Limits & Thresholds",
          "why_required": "Associates threshold boundaries with approved limits",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "limit_rule",
              "field": "limit_rule_id"
            }
          }
        },
        {
          "name": "threshold_type",
          "description": "Type of threshold band: NO_BREACH, WARNING, BREACH",
          "category": "Limits & Thresholds",
          "why_required": "Classifies the severity band for limit monitoring"
        },
        {
          "name": "threshold_lower_pct",
          "description": "Lower bound of the utilization band (% of limit)",
          "category": "Limits & Thresholds",
          "why_required": "Defines where this status band begins"
        },
        {
          "name": "threshold_upper_pct",
          "description": "Upper bound of the utilization band (% of limit)",
          "category": "Limits & Thresholds",
          "why_required": "Defines where this status band ends"
        },
        {
          "name": "threshold_lower_abs",
          "description": "Lower bound in absolute dollar terms (optional)",
          "category": "Limits & Thresholds",
          "why_required": "Supports absolute-dollar-based thresholds"
        },
        {
          "name": "threshold_upper_abs",
          "description": "Upper bound in absolute dollar terms (optional)",
          "category": "Limits & Thresholds",
          "why_required": "Supports absolute-dollar-based thresholds"
        },
        {
          "name": "direction",
          "description": "CEILING or FLOOR — indicates if limit is a cap or a minimum",
          "category": "Limits & Thresholds",
          "why_required": "Determines whether inner/outer thresholds are above or below limit"
        },
        {
          "name": "escalation_action",
          "description": "Required action when threshold is breached (e.g., Notify Risk Manager, Escalate to CRO)",
          "category": "Limits & Thresholds",
          "why_required": "Drives governance workflow for limit events"
        },
        {
          "name": "effective_from_date",
          "description": "Date this threshold definition became active",
          "category": "Limits & Thresholds",
          "why_required": "Temporal validity for threshold versioning"
        },
        {
          "name": "effective_to_date",
          "description": "Date this threshold definition expires",
          "category": "Limits & Thresholds",
          "why_required": "Supports historical threshold analysis"
        },
        {
          "name": "active_flag",
          "description": "Y/N — whether this threshold is currently in effect",
          "category": "Limits & Thresholds",
          "why_required": "Filters to current active thresholds"
        }
      ]
    },
    {
      "name": "legal_entity",
      "layer": "L1",
      "category": "Legal Entity",
      "fields": [
        {
          "name": "active_flag",
          "description": "Whether entity is active",
          "category": "Legal Entity",
          "why_required": "Soft delete support"
        },
        {
          "name": "country_code",
          "description": "FK to country_dim",
          "category": "Legal Entity",
          "why_required": "Country of incorporation",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "country_dim",
              "field": "country_code"
            }
          }
        },
        {
          "name": "created_ts",
          "description": "Record creation timestamp",
          "category": "Legal Entity",
          "why_required": "Audit trail"
        },
        {
          "name": "entity_type_code",
          "description": "Type: BANK, BHC, IHC, BROKER_DEALER, BRANCH, SPV",
          "category": "Legal Entity",
          "why_required": "Determines regulatory treatment",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "entity_type_dim",
              "field": "entity_type_code"
            }
          }
        },
        {
          "name": "functional_currency_code",
          "description": "FK to currency_dim",
          "category": "Legal Entity",
          "why_required": "Functional currency for accounting",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "currency_dim",
              "field": "currency_code"
            }
          }
        },
        {
          "name": "institution_id",
          "description": "FK to institution_profile",
          "category": "Legal Entity",
          "why_required": "Parent institution"
        },
        {
          "name": "is_reporting_entity",
          "description": "Whether entity files regulatory reports",
          "category": "Legal Entity",
          "why_required": "Identifies report filers"
        },
        {
          "name": "legal_entity_id",
          "description": "Unique legal entity identifier (PK)",
          "category": "Legal Entity",
          "why_required": "Primary key - identifies each bank entity",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "legal_name",
          "description": "Full legal name of entity",
          "category": "Legal Entity",
          "why_required": "Official name for regulatory filings"
        },
        {
          "name": "lei_code",
          "description": "Legal Entity Identifier",
          "category": "Legal Entity",
          "why_required": "20-character global standard"
        },
        {
          "name": "primary_regulator",
          "description": "Primary regulatory body",
          "category": "Legal Entity",
          "why_required": "FED, OCC, FDIC, SEC"
        },
        {
          "name": "rssd_id",
          "description": "Federal Reserve RSSD ID",
          "category": "Legal Entity",
          "why_required": "Required for all Fed reports"
        },
        {
          "name": "short_name",
          "description": "Short display name",
          "category": "Legal Entity",
          "why_required": "For dashboards and UI"
        },
        {
          "name": "tax_id",
          "description": "Tax identification number",
          "category": "Legal Entity",
          "why_required": "For tax reporting and KYC"
        },
        {
          "name": "updated_ts",
          "description": "Record update timestamp",
          "category": "Legal Entity",
          "why_required": "Audit trail"
        }
      ]
    },
    {
      "name": "legal_entity_hierarchy",
      "layer": "L1",
      "category": "Legal Entity",
      "fields": [
        {
          "name": "as_of_date",
          "description": "Hierarchy effective date (PK)",
          "category": "Legal Entity",
          "why_required": "Point-in-time hierarchy",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true,
            "fk_target": {
              "layer": "L1",
              "table": "date_dim",
              "field": "calendar_date"
            }
          }
        },
        {
          "name": "consolidation_method",
          "description": "FULL, EQUITY, PROPORTIONAL, NONE",
          "category": "Legal Entity",
          "why_required": "Accounting consolidation method"
        },
        {
          "name": "hierarchy_level",
          "description": "Depth in hierarchy (1=top)",
          "category": "Legal Entity",
          "why_required": "For traversal and reporting"
        },
        {
          "name": "hierarchy_path",
          "description": "Materialized path (/ROOT/PARENT/CHILD)",
          "category": "Legal Entity",
          "why_required": "Fast hierarchical queries"
        },
        {
          "name": "legal_entity_id",
          "description": "FK to legal_entity (PK)",
          "category": "Legal Entity",
          "why_required": "Child entity in hierarchy",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true,
            "fk_target": {
              "layer": "L1",
              "table": "legal_entity",
              "field": "legal_entity_id"
            }
          }
        },
        {
          "name": "ownership_pct",
          "description": "Ownership percentage",
          "category": "Legal Entity",
          "why_required": "For proportional consolidation"
        },
        {
          "name": "parent_legal_entity_id",
          "description": "FK to legal_entity - immediate parent",
          "category": "Legal Entity",
          "why_required": "Direct parent entity",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "legal_entity",
              "field": "legal_entity_id"
            }
          }
        },
        {
          "name": "ultimate_parent_legal_entity_id",
          "description": "FK to legal_entity - top of hierarchy",
          "category": "Legal Entity",
          "why_required": "Ultimate parent for consolidation",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "legal_entity",
              "field": "legal_entity_id"
            }
          }
        }
      ]
    },
    {
      "name": "reporting_entity_dim",
      "layer": "L1",
      "category": "Legal Entity",
      "fields": [
        {
          "name": "active_flag",
          "description": "Active flag",
          "category": "Legal Entity",
          "why_required": "Operational gating"
        },
        {
          "name": "consolidation_basis",
          "description": "CONSOLIDATED/SOLO/CONSOLIDATED_SUBGROUP",
          "category": "Legal Entity",
          "why_required": "Controls rollups and eliminations"
        },
        {
          "name": "effective_from_date",
          "description": "SCD2 start date",
          "category": "Legal Entity",
          "why_required": "Historical reporting entity changes"
        },
        {
          "name": "effective_to_date",
          "description": "SCD2 end date",
          "category": "Legal Entity",
          "why_required": "Historical reporting entity changes"
        },
        {
          "name": "functional_currency_code",
          "description": "Functional currency",
          "category": "Legal Entity",
          "why_required": "Currency context for reporting entity",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "currency_dim",
              "field": "currency_code"
            }
          }
        },
        {
          "name": "is_current",
          "description": "Current version flag",
          "category": "Legal Entity",
          "why_required": "Filter current reporting entity"
        },
        {
          "name": "jurisdiction_code",
          "description": "Jurisdiction of reporting entity",
          "category": "Legal Entity",
          "why_required": "Regulatory context",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "regulatory_jurisdiction",
              "field": "jurisdiction_code"
            }
          }
        },
        {
          "name": "legal_entity_id",
          "description": "Underlying legal entity id",
          "category": "Legal Entity",
          "why_required": "Links reporting entity to legal entity master",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "legal_entity",
              "field": "legal_entity_id"
            }
          }
        },
        {
          "name": "reporting_entity_code",
          "description": "Reporting entity code",
          "category": "Legal Entity",
          "why_required": "Stable business key"
        },
        {
          "name": "reporting_entity_id",
          "description": "Unique reporting entity identifier",
          "category": "Legal Entity",
          "why_required": "Primary key used by positions and regulatory views",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "reporting_entity_name",
          "description": "Reporting entity name",
          "category": "Legal Entity",
          "why_required": "Human-readable label"
        }
      ]
    },
    {
      "name": "org_unit_dim",
      "layer": "L1",
      "category": "Organization",
      "fields": [
        {
          "name": "cost_center_code",
          "description": "Cost center code",
          "category": "Organization",
          "why_required": "Finance alignment"
        },
        {
          "name": "created_ts",
          "description": "Record creation timestamp",
          "category": "Organization",
          "why_required": "Audit trail"
        },
        {
          "name": "effective_from_date",
          "description": "SCD2 start date",
          "category": "Organization",
          "why_required": "Historical reporting"
        },
        {
          "name": "effective_to_date",
          "description": "SCD2 end date",
          "category": "Organization",
          "why_required": "Historical reporting"
        },
        {
          "name": "is_current",
          "description": "Current version flag",
          "category": "Organization",
          "why_required": "Filter for current structure"
        },
        {
          "name": "manager_user_id",
          "description": "Manager identifier",
          "category": "Organization",
          "why_required": "Accountability and workflow routing"
        },
        {
          "name": "org_unit_code",
          "description": "Org unit code",
          "category": "Organization",
          "why_required": "Stable business key for integration"
        },
        {
          "name": "org_unit_id",
          "description": "Unique org unit identifier",
          "category": "Organization",
          "why_required": "Primary key referenced by positions and exposures",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "org_unit_name",
          "description": "Org unit name",
          "category": "Organization",
          "why_required": "Human-readable label"
        },
        {
          "name": "org_unit_type",
          "description": "Type (DESK/BOOK/BRANCH/REGION/LINE_OF_BUSINESS)",
          "category": "Organization",
          "why_required": "Enables consistent slicing"
        },
        {
          "name": "parent_org_unit_id",
          "description": "Immediate parent org unit",
          "category": "Organization",
          "why_required": "Hierarchy rollups",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "org_unit_dim",
              "field": "org_unit_id"
            }
          }
        },
        {
          "name": "source_system_id",
          "description": "Origin system",
          "category": "Organization",
          "why_required": "Lineage",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "source_system_registry",
              "field": "source_system_id"
            }
          }
        },
        {
          "name": "updated_ts",
          "description": "Record update timestamp",
          "category": "Organization",
          "why_required": "Audit trail"
        },
        {
          "name": "lob_segment_id",
          "description": "Enables transition from org_unit-based reporting to LoB hierarchy.",
          "category": "Organization",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "enterprise_business_taxonomy",
              "field": "managed_segment_id"
            }
          }
        }
      ]
    },
    {
      "name": "enterprise_business_taxonomy",
      "layer": "L1",
      "category": "Business Taxonomy",
      "fields": [
        {
          "name": "managed_segment_id",
          "description": "PK — unique identifier for the managed segment node",
          "category": "Business Taxonomy",
          "why_required": "Unique node identifier for LoB hierarchy resolution",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "description",
          "description": "Short name/label of the segment node",
          "category": "Business Taxonomy",
          "why_required": "Display label for dashboards and filters"
        },
        {
          "name": "long_description",
          "description": "Extended description of the segment",
          "category": "Business Taxonomy",
          "why_required": "Detailed context for reporting and governance"
        },
        {
          "name": "parent",
          "description": "FK to parent managed_segment_id in same table",
          "category": "Business Taxonomy",
          "why_required": "Enables recursive parent-child hierarchy traversal",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "enterprise_business_taxonomy",
              "field": "managed_segment_id"
            }
          }
        },
        {
          "name": "tree_level",
          "description": "Numeric level in hierarchy (1=Top/Org, 2=L1 LoB, 3=L2 LoB, etc.)",
          "category": "Business Taxonomy",
          "why_required": "Drives aggregation level for dashboards (L1–L8+)"
        },
        {
          "name": "effective_date",
          "description": "Date the segment node became active",
          "category": "Business Taxonomy",
          "why_required": "Temporal validity for hierarchy versioning"
        },
        {
          "name": "create_update_date",
          "description": "Timestamp of last create or update",
          "category": "Business Taxonomy",
          "why_required": "Audit trail for taxonomy governance"
        },
        {
          "name": "status",
          "description": "Active / Inactive / Pending",
          "category": "Business Taxonomy",
          "why_required": "Controls which nodes are included in live reporting"
        },
        {
          "name": "substatus",
          "description": "Refinement of status (e.g., Sunset, Migration)",
          "category": "Business Taxonomy",
          "why_required": "Supports granular lifecycle tracking"
        },
        {
          "name": "substatus_effective_to_date",
          "description": "Date substatus expires or transitions",
          "category": "Business Taxonomy",
          "why_required": "Temporal control for substatus lifecycle"
        },
        {
          "name": "change_event",
          "description": "Event code describing last change (e.g., SPLIT, MERGE, RENAME)",
          "category": "Business Taxonomy",
          "why_required": "Audit and change-impact analysis"
        },
        {
          "name": "parent_leaf",
          "description": "Flag: PARENT or LEAF",
          "category": "Business Taxonomy",
          "why_required": "Distinguishes rollup nodes from terminal booking nodes"
        },
        {
          "name": "comments",
          "description": "Free-text governance or context notes",
          "category": "Business Taxonomy",
          "why_required": "Supports taxonomy review and approval workflow"
        },
        {
          "name": "requestor",
          "description": "Name or ID of person who requested the node or change",
          "category": "Business Taxonomy",
          "why_required": "Governance accountability"
        }
      ]
    },
    {
      "name": "enterprise_product_taxonomy",
      "layer": "L1",
      "category": "Product Taxonomy",
      "fields": [
        {
          "name": "product_node_id",
          "description": "PK — unique identifier for the product taxonomy node",
          "category": "Product Taxonomy",
          "why_required": "Unique node identifier for product hierarchy resolution",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "description",
          "description": "Short name/label of the product node",
          "category": "Product Taxonomy",
          "why_required": "Display label for dashboards and filters"
        },
        {
          "name": "long_description",
          "description": "Extended description of the product node",
          "category": "Product Taxonomy",
          "why_required": "Detailed context for reporting and regulatory mapping"
        },
        {
          "name": "parent",
          "description": "FK to parent product_node_id in same table",
          "category": "Product Taxonomy",
          "why_required": "Enables recursive parent-child hierarchy traversal",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "enterprise_product_taxonomy",
              "field": "product_node_id"
            }
          }
        },
        {
          "name": "tree_level",
          "description": "Numeric level in hierarchy (1=Top, 2=Product Family, 3=Product Type, etc.)",
          "category": "Product Taxonomy",
          "why_required": "Drives aggregation level for product grouping"
        },
        {
          "name": "fr2590_category_code",
          "description": "Maps product node to FR 2590 reporting category",
          "category": "Product Taxonomy",
          "why_required": "Regulatory product grouping for FR 2590",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "fr2590_category_dim",
              "field": "fr2590_category_code"
            }
          }
        },
        {
          "name": "effective_date",
          "description": "Date the product node became active",
          "category": "Product Taxonomy",
          "why_required": "Temporal validity for hierarchy versioning"
        },
        {
          "name": "create_update_date",
          "description": "Timestamp of last create or update",
          "category": "Product Taxonomy",
          "why_required": "Audit trail for taxonomy governance"
        },
        {
          "name": "status",
          "description": "Active / Inactive / Pending",
          "category": "Product Taxonomy",
          "why_required": "Controls which nodes are included in live reporting"
        },
        {
          "name": "substatus",
          "description": "Refinement of status (e.g., Sunset, Migration)",
          "category": "Product Taxonomy",
          "why_required": "Supports granular lifecycle tracking"
        },
        {
          "name": "substatus_effective_to_date",
          "description": "Date substatus expires or transitions",
          "category": "Product Taxonomy",
          "why_required": "Temporal control for substatus lifecycle"
        },
        {
          "name": "change_event",
          "description": "Event code describing last change (e.g., SPLIT, MERGE, RENAME)",
          "category": "Product Taxonomy",
          "why_required": "Audit and change-impact analysis"
        },
        {
          "name": "parent_leaf",
          "description": "Flag: PARENT or LEAF",
          "category": "Product Taxonomy",
          "why_required": "Distinguishes rollup nodes from terminal booking nodes"
        },
        {
          "name": "comments",
          "description": "Free-text governance or context notes",
          "category": "Product Taxonomy",
          "why_required": "Supports taxonomy review and approval workflow"
        },
        {
          "name": "requestor",
          "description": "Name or ID of person who requested the node or change",
          "category": "Product Taxonomy",
          "why_required": "Governance accountability"
        }
      ]
    },
    {
      "name": "collateral_portfolio",
      "layer": "L1",
      "category": "Portfolio",
      "fields": [
        {
          "name": "active_flag",
          "description": "Active flag",
          "category": "Portfolio",
          "why_required": "Operational gating"
        },
        {
          "name": "collateral_portfolio_id",
          "description": "Unique collateral portfolio identifier",
          "category": "Portfolio",
          "why_required": "Primary key for collateral portfolio groupings",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "created_ts",
          "description": "Created timestamp",
          "category": "Portfolio",
          "why_required": "Audit trail"
        },
        {
          "name": "description",
          "description": "Description",
          "category": "Portfolio",
          "why_required": "Human context"
        },
        {
          "name": "portfolio_id",
          "description": "Portfolio identifier",
          "category": "Portfolio",
          "why_required": "Aligns collateral grouping to portfolio views",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "portfolio_dim",
              "field": "portfolio_id"
            }
          }
        },
        {
          "name": "portfolio_name_override",
          "description": "Optional display name override",
          "category": "Portfolio",
          "why_required": "Business naming flexibility"
        },
        {
          "name": "updated_ts",
          "description": "Updated timestamp",
          "category": "Portfolio",
          "why_required": "Audit trail"
        },
        {
          "name": "lob_segment_id",
          "description": "LoB-level collateral portfolio reporting.",
          "category": "Portfolio",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "enterprise_business_taxonomy",
              "field": "managed_segment_id"
            }
          }
        }
      ]
    },
    {
      "name": "portfolio_dim",
      "layer": "L1",
      "category": "Portfolio",
      "fields": [
        {
          "name": "portfolio_id",
          "description": "PK — unique portfolio identifier",
          "category": "Portfolio",
          "why_required": "Unique key for FK references from facility_master",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "portfolio_code",
          "description": "Short code for the portfolio (e.g., \"IG-CORP\", \"LEV-FIN\", \"WATCH\")",
          "category": "Portfolio",
          "why_required": "Compact display label for filters and pills"
        },
        {
          "name": "portfolio_name",
          "description": "Full descriptive name of the portfolio",
          "category": "Portfolio",
          "why_required": "Display name for dashboard cards and tooltips"
        },
        {
          "name": "portfolio_type",
          "description": "Classification of portfolio (e.g., Risk Segment, Product Segment, Watch List, Regulatory)",
          "category": "Portfolio",
          "why_required": "Enables portfolio grouping and filter behavior"
        },
        {
          "name": "parent_portfolio_id",
          "description": "FK to parent portfolio (nullable — for hierarchical portfolio structures)",
          "category": "Portfolio",
          "why_required": "Supports portfolio hierarchy if sub-portfolios exist",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "portfolio_dim",
              "field": "portfolio_id"
            }
          }
        },
        {
          "name": "lob_segment_id",
          "description": "FK to enterprise_business_taxonomy — LoB alignment for this portfolio",
          "category": "Portfolio",
          "why_required": "Links portfolio to LoB hierarchy for cross-dimensional analysis",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "enterprise_business_taxonomy",
              "field": "managed_segment_id"
            }
          }
        },
        {
          "name": "active_flag",
          "description": "Y/N — whether this portfolio is currently active",
          "category": "Portfolio",
          "why_required": "Filters to active portfolios for current reporting"
        }
      ]
    },
    {
      "name": "fr2590_category_dim",
      "layer": "L1",
      "category": "Regulatory Mapping",
      "fields": [
        {
          "name": "fr2590_category_code",
          "description": "Primary key for FR2590 grouping.",
          "category": "Regulatory Mapping",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "category_name",
          "description": "Reporting and UI.",
          "category": "Regulatory Mapping"
        },
        {
          "name": "definition",
          "description": "Governance and auditability.",
          "category": "Regulatory Mapping"
        },
        {
          "name": "display_order",
          "description": "Consistent ordering.",
          "category": "Regulatory Mapping"
        },
        {
          "name": "active_flag",
          "description": "Operational gating.",
          "category": "Regulatory Mapping"
        },
        {
          "name": "created_ts",
          "description": "Audit trail.",
          "category": "Regulatory Mapping"
        },
        {
          "name": "updated_ts",
          "description": "Audit trail.",
          "category": "Regulatory Mapping"
        }
      ]
    },
    {
      "name": "rating_grade_dim",
      "layer": "L1",
      "category": "Ratings",
      "fields": [
        {
          "name": "default_flag",
          "description": "Whether grade represents default",
          "category": "Ratings",
          "why_required": "Default classification"
        },
        {
          "name": "effective_from_date",
          "description": "SCD2 start date",
          "category": "Ratings",
          "why_required": "Historical grade definitions"
        },
        {
          "name": "effective_to_date",
          "description": "SCD2 end date",
          "category": "Ratings",
          "why_required": "Historical grade definitions"
        },
        {
          "name": "is_current",
          "description": "Current version flag",
          "category": "Ratings",
          "why_required": "Filter current grade definition"
        },
        {
          "name": "lgd_downturn",
          "description": "Downturn LGD assumption",
          "category": "Ratings",
          "why_required": "RWA and stress testing input"
        },
        {
          "name": "pd_12m",
          "description": "One-year probability of default",
          "category": "Ratings",
          "why_required": "Core risk model input and reporting"
        },
        {
          "name": "rating_grade_code",
          "description": "Internal normalized rating grade code",
          "category": "Ratings",
          "why_required": "Primary key used across rating observations and aggregations",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "rating_grade_id",
          "description": "Surrogate rating grade identifier (optional)",
          "category": "Ratings",
          "why_required": "Supports integrations that require integer keys while keeping rating_grade_code as primary reporting key"
        },
        {
          "name": "rating_grade_name",
          "description": "Human-readable grade name",
          "category": "Ratings",
          "why_required": "Display and reporting"
        },
        {
          "name": "rating_notch",
          "description": "Ordinal rank (1=best)",
          "category": "Ratings",
          "why_required": "Sorting and bucket logic"
        },
        {
          "name": "rating_scale_code",
          "description": "Rating scale (e.g., INTERNAL_21, MOODYS, SP)",
          "category": "Ratings",
          "why_required": "Supports multiple scales"
        },
        {
          "name": "source_system_id",
          "description": "Origin system",
          "category": "Ratings",
          "why_required": "Lineage",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "source_system_registry",
              "field": "source_system_id"
            }
          }
        }
      ]
    },
    {
      "name": "rating_mapping",
      "layer": "L1",
      "category": "Ratings",
      "fields": [
        {
          "name": "approved_by",
          "description": "Approver",
          "category": "Ratings",
          "why_required": "Governance evidence"
        },
        {
          "name": "approved_ts",
          "description": "Approval timestamp",
          "category": "Ratings",
          "why_required": "Governance evidence"
        },
        {
          "name": "created_ts",
          "description": "Created timestamp",
          "category": "Ratings",
          "why_required": "Governance evidence"
        },
        {
          "name": "effective_from_date",
          "description": "Start date of mapping validity",
          "category": "Ratings",
          "why_required": "Historical consistency"
        },
        {
          "name": "effective_to_date",
          "description": "End date of mapping validity",
          "category": "Ratings",
          "why_required": "Historical consistency"
        },
        {
          "name": "is_current",
          "description": "Current mapping flag",
          "category": "Ratings",
          "why_required": "Operational selection"
        },
        {
          "name": "mapping_method",
          "description": "RULE/LOOKUP/OVERRIDE",
          "category": "Ratings",
          "why_required": "Documents how mapping was set"
        },
        {
          "name": "model_id",
          "description": "Model identifier (optional)",
          "category": "Ratings",
          "why_required": "Supports model-specific mappings",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "model_registry_dim",
              "field": "model_id"
            }
          }
        },
        {
          "name": "rating_grade_code",
          "description": "Normalized internal grade code",
          "category": "Ratings",
          "why_required": "Outputs standardized grade for aggregation",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "rating_grade_dim",
              "field": "rating_grade_code"
            }
          }
        },
        {
          "name": "rating_mapping_id",
          "description": "Unique rating mapping identifier",
          "category": "Ratings",
          "why_required": "Primary key for mapping rule rows",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "rating_source_id",
          "description": "Rating source being mapped",
          "category": "Ratings",
          "why_required": "Allows multi-source normalization",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "rating_source",
              "field": "rating_source_id"
            }
          }
        },
        {
          "name": "source_rating_code",
          "description": "Source rating label (e.g., BBB+, Ba1)",
          "category": "Ratings",
          "why_required": "Input value to normalize"
        },
        {
          "name": "source_system_id",
          "description": "Origin system",
          "category": "Ratings",
          "why_required": "Lineage",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "source_system_registry",
              "field": "source_system_id"
            }
          }
        }
      ]
    },
    {
      "name": "rating_scale_dim",
      "layer": "L1",
      "category": "Ratings",
      "fields": [
        {
          "name": "rating_grade_id",
          "description": "PK — unique identifier for each rating grade entry",
          "category": "Ratings",
          "why_required": "Unique key for FK references from counterparty_rating_observation",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "scale_type",
          "description": "Rating scale source: INTERNAL, EXTERNAL_SP, EXTERNAL_MOODYS, EXTERNAL_FITCH, COMPOSITE",
          "category": "Ratings",
          "why_required": "Identifies which rating agency or internal model produced the grade; enables filtering and crosswalk joins"
        },
        {
          "name": "rating_value",
          "description": "Display label for the rating grade (e.g., \"AA\", \"BBB\", \"3\", \"CCC\")",
          "category": "Ratings",
          "why_required": "Human-readable rating value for dashboard display and tooltips"
        },
        {
          "name": "rating_notch",
          "description": "Standardized numeric notch across all scales (1 = best, N = worst). Internal and external ratings are mapped to the same notch scale to enable direct comparison",
          "category": "Ratings",
          "why_required": "Core crosswalk field — JOIN on rating_notch across scale_types to compare internal vs external ratings; drives the Risk Rating Toggle, migration analysis, and upgrade/downgrade counts"
        },
        {
          "name": "pd_implied",
          "description": "Probability of Default implied by this rating grade (annualized)",
          "category": "Ratings",
          "why_required": "Maps each rating grade to a PD for risk parameter enrichment; enables PD-based analytics without separate model lookup"
        },
        {
          "name": "default_flag",
          "description": "Y/N — whether this grade represents a default state (e.g., D, C, internal 5)",
          "category": "Ratings",
          "why_required": "Identifies default-grade counterparties for default counts, NPL analysis, and credit event triggers"
        },
        {
          "name": "investment_grade_flag",
          "description": "Y/N — whether this grade is considered investment grade",
          "category": "Ratings",
          "why_required": "Supports IG vs non-IG segmentation for portfolio analysis (Page 7) and deterioration flags"
        },
        {
          "name": "display_color_hex",
          "description": "Hex color code for dashboard rendering (red-to-green scale based on rating_notch)",
          "category": "Ratings",
          "why_required": "Consistent color coding of risk ratings across all pages per global design requirements"
        },
        {
          "name": "active_flag",
          "description": "Y/N — whether this rating grade is currently in use",
          "category": "Ratings",
          "why_required": "Filters to active grades for current reporting"
        }
      ]
    },
    {
      "name": "rating_source",
      "layer": "L1",
      "category": "Ratings",
      "fields": [
        {
          "name": "active_flag",
          "description": "Active flag",
          "category": "Ratings",
          "why_required": "Operational gating"
        },
        {
          "name": "created_ts",
          "description": "Created timestamp",
          "category": "Ratings",
          "why_required": "Audit trail"
        },
        {
          "name": "priority_rank",
          "description": "Precedence order when multiple ratings exist",
          "category": "Ratings",
          "why_required": "Deterministic selection logic"
        },
        {
          "name": "rating_source_id",
          "description": "Unique rating source identifier",
          "category": "Ratings",
          "why_required": "Primary key referenced by rating observations and mappings",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "rating_source_name",
          "description": "Rating source name (Internal, S&P, Moody's, Fitch, VendorX)",
          "category": "Ratings",
          "why_required": "Human identification"
        },
        {
          "name": "rating_source_type",
          "description": "INTERNAL/EXTERNAL/VENDOR",
          "category": "Ratings",
          "why_required": "Controls treatment and precedence"
        },
        {
          "name": "updated_ts",
          "description": "Updated timestamp",
          "category": "Ratings",
          "why_required": "Audit trail"
        },
        {
          "name": "vendor_code",
          "description": "Vendor code if applicable",
          "category": "Ratings",
          "why_required": "Integration key"
        }
      ]
    },
    {
      "name": "credit_event_type_dim",
      "layer": "L1",
      "category": "Credit Risk Status",
      "fields": [
        {
          "name": "active_flag",
          "description": "Active flag",
          "category": "Credit Risk Status",
          "why_required": "Operational gating"
        },
        {
          "name": "credit_event_type_code",
          "description": "Credit event type code",
          "category": "Credit Risk Status",
          "why_required": "Primary key for credit event taxonomy",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "credit_event_type_id",
          "description": "Surrogate credit event type identifier (alias for credit_event_type_code)",
          "category": "Credit Risk Status",
          "why_required": "Supports integrations that require numeric keys"
        },
        {
          "name": "credit_event_type_name",
          "description": "Credit event name (BANKRUPTCY/FAILURE_TO_PAY/RESTRUCTURING/etc.)",
          "category": "Credit Risk Status",
          "why_required": "Human-readable label"
        },
        {
          "name": "default_trigger_flag",
          "description": "Whether it triggers default under applicable definitions",
          "category": "Credit Risk Status",
          "why_required": "Default rule application"
        }
      ]
    },
    {
      "name": "credit_status_dim",
      "layer": "L1",
      "category": "Credit Risk Status",
      "fields": [
        {
          "name": "credit_status_code",
          "description": "Credit status code",
          "category": "Credit Risk Status",
          "why_required": "Primary key used on facility/exposure snapshots",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "credit_status_name",
          "description": "Credit status name",
          "category": "Credit Risk Status",
          "why_required": "Display and reporting"
        },
        {
          "name": "default_flag",
          "description": "Whether status constitutes default",
          "category": "Credit Risk Status",
          "why_required": "Default event identification"
        },
        {
          "name": "delinquency_bucket",
          "description": "DPD bucket (0, 1-29, 30-59, 60-89, 90+)",
          "category": "Credit Risk Status",
          "why_required": "Credit monitoring and provisioning"
        },
        {
          "name": "status_category",
          "description": "PERFORMING/NONPERFORMING/DEFAULT/WORKOUT",
          "category": "Credit Risk Status",
          "why_required": "Aggregation bucket"
        }
      ]
    },
    {
      "name": "amendment_status_dim",
      "layer": "L1",
      "category": "Credit Events / Amendments",
      "fields": [
        {
          "name": "amendment_status_code",
          "description": "Primary key for amendment status standardization.",
          "category": "Credit Events / Amendments",
          "why_required": "PK"
        },
        {
          "name": "amendment_status_name",
          "description": "Reporting and UI.",
          "category": "Credit Events / Amendments"
        },
        {
          "name": "status_group",
          "description": "Supports color coding and sub-metrics.",
          "category": "Credit Events / Amendments"
        },
        {
          "name": "is_terminal_flag",
          "description": "Lifecycle analytics and validation.",
          "category": "Credit Events / Amendments"
        },
        {
          "name": "active_flag",
          "description": "Operational gating.",
          "category": "Credit Events / Amendments"
        },
        {
          "name": "created_ts",
          "description": "Audit trail.",
          "category": "Credit Events / Amendments"
        },
        {
          "name": "updated_ts",
          "description": "Audit trail.",
          "category": "Credit Events / Amendments"
        }
      ]
    },
    {
      "name": "amendment_type_dim",
      "layer": "L1",
      "category": "Credit Events / Amendments",
      "fields": [
        {
          "name": "amendment_type_code",
          "description": "Primary key for amendment type standardization.",
          "category": "Credit Events / Amendments",
          "why_required": "PK"
        },
        {
          "name": "amendment_type_name",
          "description": "Reporting and UI.",
          "category": "Credit Events / Amendments"
        },
        {
          "name": "description",
          "description": "Governance clarity.",
          "category": "Credit Events / Amendments"
        },
        {
          "name": "active_flag",
          "description": "Operational gating.",
          "category": "Credit Events / Amendments"
        },
        {
          "name": "created_ts",
          "description": "Audit trail.",
          "category": "Credit Events / Amendments"
        },
        {
          "name": "updated_ts",
          "description": "Audit trail.",
          "category": "Credit Events / Amendments"
        }
      ]
    },
    {
      "name": "default_definition_dim",
      "layer": "L1",
      "category": "Default Rules",
      "fields": [
        {
          "name": "credit_event_trigger_flag",
          "description": "Whether credit event triggers default",
          "category": "Default Rules",
          "why_required": "Supports multiple default mechanisms"
        },
        {
          "name": "days_past_due_threshold",
          "description": "Days past due threshold for default",
          "category": "Default Rules",
          "why_required": "Deterministic default triggers"
        },
        {
          "name": "default_definition_code",
          "description": "Default definition code (e.g., BASEL, IFRS9, US_GAAP_CECL)",
          "category": "Default Rules",
          "why_required": "Selects applicable definition"
        },
        {
          "name": "default_definition_id",
          "description": "Unique default definition identifier",
          "category": "Default Rules",
          "why_required": "Primary key for default rule sets",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "description",
          "description": "Description of definition",
          "category": "Default Rules",
          "why_required": "Auditability and transparency"
        },
        {
          "name": "jurisdiction_code",
          "description": "Jurisdiction/regulator context",
          "category": "Default Rules",
          "why_required": "Regulatory variability"
        },
        {
          "name": "materiality_threshold_amt",
          "description": "Materiality threshold for past-due default tests",
          "category": "Default Rules",
          "why_required": "Prevents false defaults"
        }
      ]
    },
    {
      "name": "exposure_type_dim",
      "layer": "L1",
      "category": "Exposure Classification",
      "fields": [
        {
          "name": "active_flag",
          "description": "Active flag",
          "category": "Exposure Classification",
          "why_required": "Operational gating"
        },
        {
          "name": "basel_exposure_class",
          "description": "Basel exposure class mapping",
          "category": "Exposure Classification",
          "why_required": "Regulatory RWA aggregation and reporting"
        },
        {
          "name": "ccf_pct",
          "description": "Credit conversion factor (if standardized)",
          "category": "Exposure Classification",
          "why_required": "Unfunded exposure calculation"
        },
        {
          "name": "exposure_type_code",
          "description": "Exposure type classification code",
          "category": "Exposure Classification",
          "why_required": "Primary key used for consistent exposure categorization",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "exposure_type_name",
          "description": "Exposure type name",
          "category": "Exposure Classification",
          "why_required": "Human-readable label"
        },
        {
          "name": "off_balance_sheet_flag",
          "description": "Whether exposure is off-balance-sheet",
          "category": "Exposure Classification",
          "why_required": "CCF and reporting logic"
        },
        {
          "name": "product_id",
          "description": "Related product (optional)",
          "category": "Exposure Classification",
          "why_required": "Connects exposure types to product hierarchy"
        },
        {
          "name": "sa_ccr_asset_class",
          "description": "SA-CCR asset class (if applicable)",
          "category": "Exposure Classification",
          "why_required": "Derivative exposure treatment"
        }
      ]
    },
    {
      "name": "scenario_dim",
      "layer": "L1",
      "category": "Scenario",
      "fields": [
        {
          "name": "created_ts",
          "description": "Created timestamp",
          "category": "Scenario",
          "why_required": "Audit trail"
        },
        {
          "name": "description",
          "description": "Narrative",
          "category": "Scenario",
          "why_required": "Purpose and scope"
        },
        {
          "name": "is_active",
          "description": "Active flag",
          "category": "Scenario",
          "why_required": "Operational gating"
        },
        {
          "name": "regulatory_scenario_code",
          "description": "Regulatory scenario code (if applicable)",
          "category": "Scenario",
          "why_required": "Maps to regulator-provided scenarios"
        },
        {
          "name": "scenario_end_date",
          "description": "Scenario end date",
          "category": "Scenario",
          "why_required": "Defines applicability window",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "date_dim",
              "field": "calendar_date"
            }
          }
        },
        {
          "name": "scenario_horizon_months",
          "description": "Scenario horizon in months",
          "category": "Scenario",
          "why_required": "Required for stress horizon alignment and aggregation"
        },
        {
          "name": "scenario_id",
          "description": "PK for scenario",
          "category": "Scenario",
          "why_required": "Unique scenario id",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "scenario_name",
          "description": "Human name",
          "category": "Scenario",
          "why_required": "Identifies scenario"
        },
        {
          "name": "scenario_start_date",
          "description": "Scenario start date",
          "category": "Scenario",
          "why_required": "Defines applicability window",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "date_dim",
              "field": "calendar_date"
            }
          }
        },
        {
          "name": "scenario_type",
          "description": "Baseline / Stress / Sensitivity",
          "category": "Scenario",
          "why_required": "Classification"
        },
        {
          "name": "shock_parameters_json",
          "description": "Serialized shock parameters (JSON)",
          "category": "Scenario",
          "why_required": "Supports logic-as-data for scenario application"
        },
        {
          "name": "source_system_id",
          "description": "Origin system",
          "category": "Scenario",
          "why_required": "Lineage",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "source_system_registry",
              "field": "source_system_id"
            }
          }
        }
      ]
    },
    {
      "name": "context_dim",
      "layer": "L1",
      "category": "Metrics & Context",
      "fields": [
        {
          "name": "context_id",
          "description": "Primary key.",
          "category": "Metrics & Context",
          "why_required": "PK"
        },
        {
          "name": "context_domain",
          "description": "Prevents misuse of context codes across domains.",
          "category": "Metrics & Context"
        },
        {
          "name": "context_code",
          "description": "Separates baselines from current values.",
          "category": "Metrics & Context"
        },
        {
          "name": "context_name",
          "description": "Reporting and UI.",
          "category": "Metrics & Context"
        },
        {
          "name": "description",
          "description": "Governance clarity.",
          "category": "Metrics & Context"
        },
        {
          "name": "is_active_flag",
          "description": "Operational gating.",
          "category": "Metrics & Context"
        },
        {
          "name": "created_ts",
          "description": "Audit trail.",
          "category": "Metrics & Context"
        },
        {
          "name": "updated_ts",
          "description": "Audit trail.",
          "category": "Metrics & Context"
        }
      ]
    },
    {
      "name": "fx_rate",
      "layer": "L1",
      "category": "Market Data",
      "fields": [
        {
          "name": "as_of_date",
          "description": "Date the FX rate applies to",
          "category": "Market Data",
          "why_required": "Used to choose correct FX value"
        },
        {
          "name": "effective_ts",
          "description": "Provider effective timestamp",
          "category": "Market Data",
          "why_required": "Provenance"
        },
        {
          "name": "from_currency_code",
          "description": "Source currency",
          "category": "Market Data",
          "why_required": "Currency conversion source",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "currency_dim",
              "field": "currency_code"
            }
          }
        },
        {
          "name": "fx_rate_id",
          "description": "PK for FX rate record",
          "category": "Market Data",
          "why_required": "Unique record for an FX observation",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "loaded_ts",
          "description": "When rate was loaded",
          "category": "Market Data",
          "why_required": "ETL provenance"
        },
        {
          "name": "provider",
          "description": "Rate provider",
          "category": "Market Data",
          "why_required": "Provenance"
        },
        {
          "name": "rate",
          "description": "Conversion rate",
          "category": "Market Data",
          "why_required": "Used to compute USD amounts from local currency"
        },
        {
          "name": "to_currency_code",
          "description": "Target currency (typically USD)",
          "category": "Market Data",
          "why_required": "Currency conversion target",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "currency_dim",
              "field": "currency_code"
            }
          }
        },
        {
          "name": "rate_type",
          "description": "SPOT, FORWARD_1M, ECB_FIX, FED_NOON, WMR_4PM, INTERNAL_TRANSFER",
          "category": "Market Data",
          "why_required": "Distinguishes FX rate methodology"
        }
      ]
    },
    {
      "name": "interest_rate_index_dim",
      "layer": "L1",
      "category": "Market Data",
      "fields": [
        {
          "name": "rate_index_id",
          "description": "PK — rate index identifier",
          "category": "Market Data",
          "why_required": "Primary key",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "index_code",
          "description": "Short code: SOFR, EFFR, TERM_SOFR_1M, PRIME, EURIBOR_3M",
          "category": "Market Data",
          "why_required": "Natural key"
        },
        {
          "name": "index_name",
          "description": "Full descriptive name",
          "category": "Market Data",
          "why_required": "UI display"
        },
        {
          "name": "index_family",
          "description": "Family: SOFR, EFFR, PRIME, LIBOR_LEGACY, EURIBOR, SONIA",
          "category": "Market Data",
          "why_required": "Tenor grouping"
        },
        {
          "name": "tenor_code",
          "description": "Tenor: ON, 1M, 3M, 6M, 1Y, NULL",
          "category": "Market Data",
          "why_required": "Tenor variant distinction"
        },
        {
          "name": "currency_code",
          "description": "Currency of rate index",
          "category": "Market Data",
          "why_required": "Currency-specific",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "currency_dim",
              "field": "currency_code"
            }
          }
        },
        {
          "name": "day_count_convention",
          "description": "ACT/360, ACT/365, 30/360, ACT/ACT",
          "category": "Market Data",
          "why_required": "Accurate accrual"
        },
        {
          "name": "compounding_method",
          "description": "SIMPLE, COMPOUNDED_IN_ARREARS, TERM_RATE",
          "category": "Market Data",
          "why_required": "SOFR compounding"
        },
        {
          "name": "publication_source",
          "description": "FEDERAL_RESERVE, ICE, REFINITIV, ECB, BOE, BOJ",
          "category": "Market Data",
          "why_required": "Benchmark provenance"
        },
        {
          "name": "is_fallback_rate",
          "description": "Y/N fallback/replacement rate",
          "category": "Market Data",
          "why_required": "LIBOR transition"
        },
        {
          "name": "fallback_to_index_id",
          "description": "FK to replacement rate index",
          "category": "Market Data",
          "why_required": "Legacy → fallback mapping"
        },
        {
          "name": "fallback_spread_bps",
          "description": "Credit adjustment spread (bps)",
          "category": "Market Data",
          "why_required": "ISDA fallback spread"
        },
        {
          "name": "is_bmu_compliant",
          "description": "Y/N EU/UK Benchmark Regulation",
          "category": "Market Data",
          "why_required": "Regulatory compliance"
        },
        {
          "name": "active_flag",
          "description": "Y/N currently published",
          "category": "Market Data",
          "why_required": "Operational gating"
        },
        {
          "name": "cessation_date",
          "description": "Date permanently discontinued",
          "category": "Market Data",
          "why_required": "LIBOR cessation"
        },
        {
          "name": "created_ts",
          "description": "Created timestamp",
          "category": "Market Data",
          "why_required": "Audit"
        },
        {
          "name": "updated_ts",
          "description": "Updated timestamp",
          "category": "Market Data",
          "why_required": "Audit"
        }
      ]
    },
    {
      "name": "ledger_account_dim",
      "layer": "L1",
      "category": "General Ledger",
      "fields": [
        {
          "name": "ledger_account_id",
          "description": "PK — GL account identifier",
          "category": "General Ledger",
          "why_required": "Primary key",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "account_code",
          "description": "GL account code from chart of accounts",
          "category": "General Ledger",
          "why_required": "Business reference"
        },
        {
          "name": "account_name",
          "description": "Full descriptive name",
          "category": "General Ledger",
          "why_required": "UI display, recon reporting"
        },
        {
          "name": "account_type",
          "description": "ASSET, LIABILITY, EQUITY, REVENUE, EXPENSE, CONTRA",
          "category": "General Ledger",
          "why_required": "BS vs IS classification"
        },
        {
          "name": "account_category",
          "description": "Sub-class: LOAN_RECEIVABLE, DERIVATIVE_ASSET, PROVISION, etc.",
          "category": "General Ledger",
          "why_required": "Risk-to-GL mapping"
        },
        {
          "name": "parent_account_id",
          "description": "FK to parent GL account (NULL for top-level)",
          "category": "General Ledger",
          "why_required": "GL hierarchy roll-up"
        },
        {
          "name": "legal_entity_id",
          "description": "FK to owning legal entity",
          "category": "General Ledger",
          "why_required": "Entity-specific GL",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "legal_entity",
              "field": "legal_entity_id"
            }
          }
        },
        {
          "name": "lob_segment_id",
          "description": "FK to enterprise_business_taxonomy",
          "category": "General Ledger",
          "why_required": "LoB-level recon",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "enterprise_business_taxonomy",
              "field": "managed_segment_id"
            }
          }
        },
        {
          "name": "currency_code",
          "description": "Reporting currency",
          "category": "General Ledger",
          "why_required": "Multi-currency GL",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "currency_dim",
              "field": "currency_code"
            }
          }
        },
        {
          "name": "is_reconciliation_account",
          "description": "Y/N — subject to risk-to-finance recon",
          "category": "General Ledger",
          "why_required": "Scope recon checks"
        },
        {
          "name": "regulatory_report_code",
          "description": "Mapping to regulatory report line items",
          "category": "General Ledger",
          "why_required": "GL → reg report mapping"
        },
        {
          "name": "active_flag",
          "description": "Y/N active",
          "category": "General Ledger",
          "why_required": "Operational gating"
        },
        {
          "name": "effective_from_date",
          "description": "Date established",
          "category": "General Ledger",
          "why_required": "SCD"
        },
        {
          "name": "effective_to_date",
          "description": "Date closed (NULL = active)",
          "category": "General Ledger",
          "why_required": "Lifecycle"
        },
        {
          "name": "source_system_id",
          "description": "Source GL system ID",
          "category": "General Ledger",
          "why_required": "Lineage"
        },
        {
          "name": "created_ts",
          "description": "Created timestamp",
          "category": "General Ledger",
          "why_required": "Audit"
        },
        {
          "name": "updated_ts",
          "description": "Updated timestamp",
          "category": "General Ledger",
          "why_required": "Audit"
        }
      ]
    },
    {
      "name": "date_dim",
      "layer": "L1",
      "category": "Calendar & Time",
      "fields": [
        {
          "name": "calendar_date",
          "description": "Calendar date (PK)",
          "category": "Calendar & Time",
          "why_required": "Every date in range"
        },
        {
          "name": "calendar_month",
          "description": "Calendar month (1-12)",
          "category": "Calendar & Time",
          "why_required": "Time aggregation"
        },
        {
          "name": "calendar_quarter",
          "description": "Calendar quarter (1-4)",
          "category": "Calendar & Time",
          "why_required": "Time aggregation"
        },
        {
          "name": "calendar_year",
          "description": "Calendar year",
          "category": "Calendar & Time",
          "why_required": "Time aggregation"
        },
        {
          "name": "date_id",
          "description": "Surrogate date identifier (e.g., YYYYMMDD)",
          "category": "Calendar & Time",
          "why_required": "Stable integer key for joins and partitioning",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "day_name",
          "description": "Day name (Monday, etc.)",
          "category": "Calendar & Time",
          "why_required": "Display"
        },
        {
          "name": "day_of_month",
          "description": "Day of month (1-31)",
          "category": "Calendar & Time",
          "why_required": "Time bucketing"
        },
        {
          "name": "day_of_week",
          "description": "Day of week (1-7)",
          "category": "Calendar & Time",
          "why_required": "For business day logic"
        },
        {
          "name": "fiscal_month",
          "description": "Fiscal month (1-12)",
          "category": "Calendar & Time",
          "why_required": "Monthly reporting"
        },
        {
          "name": "fiscal_quarter",
          "description": "Fiscal quarter (1-4)",
          "category": "Calendar & Time",
          "why_required": "Quarterly reporting"
        },
        {
          "name": "fiscal_year",
          "description": "Fiscal year",
          "category": "Calendar & Time",
          "why_required": "For period reporting"
        },
        {
          "name": "is_month_end",
          "description": "Month end flag",
          "category": "Calendar & Time",
          "why_required": "Period end identification"
        },
        {
          "name": "is_quarter_end",
          "description": "Quarter end flag",
          "category": "Calendar & Time",
          "why_required": "Regulatory filing dates"
        },
        {
          "name": "is_us_bank_holiday",
          "description": "US bank holiday flag",
          "category": "Calendar & Time",
          "why_required": "Fed calendar"
        },
        {
          "name": "is_us_business_day",
          "description": "US business day flag",
          "category": "Calendar & Time",
          "why_required": "Derived from weekend + holidays"
        },
        {
          "name": "is_weekend",
          "description": "Weekend flag",
          "category": "Calendar & Time",
          "why_required": "Business day calculation"
        },
        {
          "name": "is_year_end",
          "description": "Year end flag",
          "category": "Calendar & Time",
          "why_required": "Annual reporting"
        }
      ]
    },
    {
      "name": "date_time_dim",
      "layer": "L1",
      "category": "Calendar & Time",
      "fields": [
        {
          "name": "date_id",
          "description": "Surrogate date identifier",
          "category": "Calendar & Time",
          "why_required": "Joins to date_dim for date attributes",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "date_dim",
              "field": "date_id"
            }
          }
        },
        {
          "name": "date_time_id",
          "description": "Surrogate date-time identifier",
          "category": "Calendar & Time",
          "why_required": "Primary key for high-granularity timestamps where needed",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "hour_of_day",
          "description": "0-23 hour",
          "category": "Calendar & Time",
          "why_required": "Time bucketing"
        },
        {
          "name": "is_dst",
          "description": "Daylight savings flag",
          "category": "Calendar & Time",
          "why_required": "Time normalization and auditability"
        },
        {
          "name": "minute_of_hour",
          "description": "0-59 minute",
          "category": "Calendar & Time",
          "why_required": "Time bucketing"
        },
        {
          "name": "second_of_minute",
          "description": "0-59 second",
          "category": "Calendar & Time",
          "why_required": "Time bucketing"
        },
        {
          "name": "timestamp_utc",
          "description": "UTC timestamp",
          "category": "Calendar & Time",
          "why_required": "Canonical event time for cross-system alignment"
        },
        {
          "name": "timezone_code",
          "description": "IANA timezone code",
          "category": "Calendar & Time",
          "why_required": "Supports local time rendering and DST logic"
        }
      ]
    },
    {
      "name": "maturity_bucket_dim",
      "layer": "L1",
      "category": "Calendar & Time",
      "fields": [
        {
          "name": "active_flag",
          "description": "Active flag",
          "category": "Calendar & Time",
          "why_required": "Operational gating"
        },
        {
          "name": "bucket_end_days",
          "description": "Inclusive end in days (NULL for open-ended)",
          "category": "Calendar & Time",
          "why_required": "Deterministic bucketing logic"
        },
        {
          "name": "bucket_name",
          "description": "Bucket name (e.g., 0-7D, 8-30D, 31-90D, 91-180D, 181-365D, >1Y)",
          "category": "Calendar & Time",
          "why_required": "Human-readable label"
        },
        {
          "name": "bucket_start_days",
          "description": "Inclusive start in days",
          "category": "Calendar & Time",
          "why_required": "Deterministic bucketing logic"
        },
        {
          "name": "jurisdiction_code",
          "description": "Jurisdiction context",
          "category": "Calendar & Time",
          "why_required": "Jurisdiction-specific bucket definitions"
        },
        {
          "name": "maturity_bucket_id",
          "description": "Unique maturity bucket identifier",
          "category": "Calendar & Time",
          "why_required": "Primary key for maturity/tenor bucketing used in liquidity, haircuts, and term structure reporting",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "regulatory_framework",
          "description": "Framework (LCR/NSFR/BASEL_HAIRCUTS/etc.)",
          "category": "Calendar & Time",
          "why_required": "Supports multiple regulatory bucketing schemes"
        }
      ]
    },
    {
      "name": "reporting_calendar_dim",
      "layer": "L1",
      "category": "Calendar & Time",
      "fields": [
        {
          "name": "as_of_date",
          "description": "Reporting as-of date",
          "category": "Calendar & Time",
          "why_required": "Joins to date_dim; used by run_control and snapshots",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "date_dim",
              "field": "calendar_date"
            }
          }
        },
        {
          "name": "calendar_code",
          "description": "Calendar code (e.g., REG_US, MGMT_GLOBAL)",
          "category": "Calendar & Time",
          "why_required": "Selects the applicable calendar logic"
        },
        {
          "name": "cutoff_ts",
          "description": "Default cutoff timestamp for the as-of date",
          "category": "Calendar & Time",
          "why_required": "Standardizes extraction windows"
        },
        {
          "name": "fiscal_quarter",
          "description": "Fiscal quarter for the as-of date",
          "category": "Calendar & Time",
          "why_required": "Quarterly reporting"
        },
        {
          "name": "fiscal_year",
          "description": "Fiscal year for the as-of date",
          "category": "Calendar & Time",
          "why_required": "Quarterly/annual reporting"
        },
        {
          "name": "is_period_end",
          "description": "Whether the date is a reporting period end",
          "category": "Calendar & Time",
          "why_required": "Filing cadence and controls"
        },
        {
          "name": "period_end_date",
          "description": "Reporting period end date",
          "category": "Calendar & Time",
          "why_required": "Period-based rollups and disclosures",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "date_dim",
              "field": "calendar_date"
            }
          }
        },
        {
          "name": "period_start_date",
          "description": "Reporting period start date",
          "category": "Calendar & Time",
          "why_required": "Period-based rollups and disclosures",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "date_dim",
              "field": "calendar_date"
            }
          }
        },
        {
          "name": "regulator_code",
          "description": "Regulator/standard (FED/EBA/PRA/BCBS)",
          "category": "Calendar & Time",
          "why_required": "Drives filing-specific logic",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "regulatory_jurisdiction",
              "field": "jurisdiction_code"
            }
          }
        },
        {
          "name": "reporting_calendar_id",
          "description": "Surrogate reporting calendar identifier",
          "category": "Calendar & Time",
          "why_required": "Primary key for multiple reporting calendars (regulatory vs management)",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        }
      ]
    },
    {
      "name": "country_dim",
      "layer": "L1",
      "category": "Geography",
      "fields": [
        {
          "name": "basel_country_risk_weight",
          "description": "Basel standardized risk weight",
          "category": "Geography",
          "why_required": "For RWA calculation"
        },
        {
          "name": "country_code",
          "description": "ISO 3166-1 alpha-2 code (PK)",
          "category": "Geography",
          "why_required": "Standard 2-letter code (US, GB, DE)",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "country_name",
          "description": "Full country name",
          "category": "Geography",
          "why_required": "Display name"
        },
        {
          "name": "is_active",
          "description": "Active flag",
          "category": "Geography",
          "why_required": "Soft delete"
        },
        {
          "name": "is_developed_market",
          "description": "Developed market flag",
          "category": "Geography",
          "why_required": "Risk classification"
        },
        {
          "name": "is_fatf_high_risk",
          "description": "FATF high-risk jurisdiction",
          "category": "Geography",
          "why_required": "AML/BSA risk flag"
        },
        {
          "name": "is_ofac_sanctioned",
          "description": "OFAC sanctions flag",
          "category": "Geography",
          "why_required": "Compliance screening"
        },
        {
          "name": "iso_alpha_3",
          "description": "ISO 3166-1 alpha-3 code",
          "category": "Geography",
          "why_required": "3-letter code for some reports"
        },
        {
          "name": "iso_numeric",
          "description": "ISO 3166-1 numeric code",
          "category": "Geography",
          "why_required": "Numeric identifier"
        },
        {
          "name": "jurisdiction_id",
          "description": "Regulatory jurisdiction id (if aligned)",
          "category": "Geography",
          "why_required": "Supports jurisdictional rules mapping"
        },
        {
          "name": "region_code",
          "description": "FK to region_dim",
          "category": "Geography",
          "why_required": "Geographic region grouping"
        }
      ]
    },
    {
      "name": "region_dim",
      "layer": "L1",
      "category": "Geography",
      "fields": [
        {
          "name": "region_code",
          "description": "Enables Region filter and rollups (e.g., North America, Europe) and resolves country_dim.region_code FK.",
          "category": "Geography",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "region_name",
          "description": "Human-readable label for dashboards and filters.",
          "category": "Geography"
        },
        {
          "name": "region_group_code",
          "description": "Supports alternate rollups and simplified filter UX.",
          "category": "Geography"
        },
        {
          "name": "display_order",
          "description": "Stable ordering in dropdowns and charts.",
          "category": "Geography"
        },
        {
          "name": "is_active_flag",
          "description": "Operational gating and soft deprecation.",
          "category": "Geography"
        },
        {
          "name": "source_system_id",
          "description": "Lineage for reference data governance.",
          "category": "Geography",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "source_system_registry",
              "field": "source_system_id"
            }
          }
        },
        {
          "name": "created_ts",
          "description": "Audit trail.",
          "category": "Geography"
        },
        {
          "name": "updated_ts",
          "description": "Audit trail.",
          "category": "Geography"
        }
      ]
    },
    {
      "name": "currency_dim",
      "layer": "L1",
      "category": "Currency",
      "fields": [
        {
          "name": "currency_code",
          "description": "ISO 4217 currency code (PK)",
          "category": "Currency",
          "why_required": "Standard 3-letter code (USD, EUR, GBP)",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "currency_name",
          "description": "Full currency name",
          "category": "Currency",
          "why_required": "Display name"
        },
        {
          "name": "currency_symbol",
          "description": "Currency symbol",
          "category": "Currency",
          "why_required": "Display"
        },
        {
          "name": "is_active",
          "description": "Active flag",
          "category": "Currency",
          "why_required": "Soft delete"
        },
        {
          "name": "is_g10_currency",
          "description": "G10 currency flag",
          "category": "Currency",
          "why_required": "Determines Basel haircut treatment"
        },
        {
          "name": "iso_numeric",
          "description": "ISO 4217 numeric code",
          "category": "Currency",
          "why_required": "Numeric identifier"
        },
        {
          "name": "minor_unit_decimals",
          "description": "Number of decimal places",
          "category": "Currency",
          "why_required": "For rounding (2 for USD, 0 for JPY)"
        }
      ]
    },
    {
      "name": "industry_dim",
      "layer": "L1",
      "category": "Industry",
      "fields": [
        {
          "name": "active_flag",
          "description": "Active flag",
          "category": "Industry",
          "why_required": "Operational gating"
        },
        {
          "name": "industry_code",
          "description": "Industry code (NAICS/SIC/GICS)",
          "category": "Industry",
          "why_required": "Mapping key from counterparty attributes"
        },
        {
          "name": "industry_id",
          "description": "Unique industry identifier",
          "category": "Industry",
          "why_required": "Primary key for industry taxonomy",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "industry_level",
          "description": "Hierarchy level",
          "category": "Industry",
          "why_required": "Rollups and segmentation"
        },
        {
          "name": "industry_name",
          "description": "Industry name",
          "category": "Industry",
          "why_required": "Human-readable label"
        },
        {
          "name": "industry_standard",
          "description": "Standard (NAICS/SIC/GICS)",
          "category": "Industry",
          "why_required": "Disambiguates code sets"
        },
        {
          "name": "parent_industry_id",
          "description": "Parent industry id",
          "category": "Industry",
          "why_required": "Hierarchy traversal",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "industry_dim",
              "field": "industry_id"
            }
          }
        }
      ]
    },
    {
      "name": "regulatory_capital_basis_dim",
      "layer": "L1",
      "category": "Regulatory",
      "fields": [
        {
          "name": "active_flag",
          "description": "Active flag",
          "category": "Regulatory",
          "why_required": "Operational gating"
        },
        {
          "name": "basis_code",
          "description": "Basis code (US_STD, US_ADV, BASEL_STD, BASEL_IRB)",
          "category": "Regulatory",
          "why_required": "Selects applicable capital rules"
        },
        {
          "name": "basis_name",
          "description": "Basis name",
          "category": "Regulatory",
          "why_required": "Human-readable label"
        },
        {
          "name": "description",
          "description": "Description",
          "category": "Regulatory",
          "why_required": "Auditability"
        },
        {
          "name": "effective_from_date",
          "description": "Start date",
          "category": "Regulatory",
          "why_required": "Historical consistency"
        },
        {
          "name": "effective_to_date",
          "description": "End date",
          "category": "Regulatory",
          "why_required": "Historical consistency"
        },
        {
          "name": "jurisdiction_code",
          "description": "Jurisdiction/regulator context",
          "category": "Regulatory",
          "why_required": "Basis differs by jurisdiction",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "regulatory_jurisdiction",
              "field": "jurisdiction_code"
            }
          }
        },
        {
          "name": "regulatory_capital_basis_id",
          "description": "Unique regulatory capital basis identifier",
          "category": "Regulatory",
          "why_required": "Primary key for capital basis taxonomy",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        }
      ]
    },
    {
      "name": "regulatory_jurisdiction",
      "layer": "L1",
      "category": "Regulatory",
      "fields": [
        {
          "name": "is_active",
          "description": "Active flag",
          "category": "Regulatory",
          "why_required": "Currently applicable"
        },
        {
          "name": "jurisdiction_code",
          "description": "Jurisdiction code (US, UK, EU, CA)",
          "category": "Regulatory",
          "why_required": "Short code"
        },
        {
          "name": "jurisdiction_id",
          "description": "Jurisdiction identifier (PK)",
          "category": "Regulatory",
          "why_required": "Primary key",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "jurisdiction_name",
          "description": "Full jurisdiction name",
          "category": "Regulatory",
          "why_required": "Display name"
        },
        {
          "name": "primary_regulator",
          "description": "Primary regulatory body",
          "category": "Regulatory",
          "why_required": "Main regulator"
        },
        {
          "name": "regulatory_framework",
          "description": "BASEL_III, CRR_CRD, PRA, OSFI, APRA",
          "category": "Regulatory",
          "why_required": "Regulatory framework"
        }
      ]
    },
    {
      "name": "regulatory_mapping",
      "layer": "L1",
      "category": "Regulatory",
      "fields": [
        {
          "name": "calculation_rule_id",
          "description": "Rule id for logic-as-data (optional)",
          "category": "Regulatory",
          "why_required": "Enables consistent derived logic without code changes"
        },
        {
          "name": "effective_end_date",
          "description": "Mapping end date",
          "category": "Regulatory",
          "why_required": "Historical report reproducibility"
        },
        {
          "name": "effective_start_date",
          "description": "Mapping start date",
          "category": "Regulatory",
          "why_required": "Historical report reproducibility"
        },
        {
          "name": "line_item_code",
          "description": "Line/cell code within schedule",
          "category": "Regulatory",
          "why_required": "Allows deterministic report cell assignment"
        },
        {
          "name": "mapping_id",
          "description": "Mapping identifier (PK)",
          "category": "Regulatory",
          "why_required": "Primary key"
        },
        {
          "name": "mdrm_id",
          "description": "MDRM identifier / regulatory mapping key",
          "category": "Regulatory",
          "why_required": "Primary key used by regulatory snapshots (e.g., FR 2590)",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "metric_name",
          "description": "Metric name associated to the cell",
          "category": "Regulatory",
          "why_required": "Human-readable mapping context"
        },
        {
          "name": "notes",
          "description": "Mapping notes",
          "category": "Regulatory",
          "why_required": "Documentation"
        },
        {
          "name": "relationship_type",
          "description": "EQUALS, SUBSET, SUPERSET, DERIVED",
          "category": "Regulatory",
          "why_required": "How values relate"
        },
        {
          "name": "report_code",
          "description": "Regulatory report code",
          "category": "Regulatory",
          "why_required": "Groups mappings by report"
        },
        {
          "name": "schedule_code",
          "description": "Schedule identifier",
          "category": "Regulatory",
          "why_required": "Allows schedule-level mapping"
        },
        {
          "name": "source_mdrm_code",
          "description": "Source MDRM code",
          "category": "Regulatory",
          "why_required": "Source field"
        },
        {
          "name": "source_report_code",
          "description": "FK to report_registry (source)",
          "category": "Regulatory",
          "why_required": "Source report"
        },
        {
          "name": "source_system_id",
          "description": "Origin system",
          "category": "Regulatory",
          "why_required": "Lineage",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "source_system_registry",
              "field": "source_system_id"
            }
          }
        },
        {
          "name": "target_mdrm_code",
          "description": "Target MDRM code",
          "category": "Regulatory",
          "why_required": "Target field"
        },
        {
          "name": "target_report_code",
          "description": "FK to report_registry (target)",
          "category": "Regulatory",
          "why_required": "Target report"
        },
        {
          "name": "tolerance_pct",
          "description": "Allowed tolerance",
          "category": "Regulatory",
          "why_required": "Acceptable variance"
        },
        {
          "name": "transformation_rule",
          "description": "Transformation if not equal",
          "category": "Regulatory",
          "why_required": "Calculation"
        }
      ]
    },
    {
      "name": "report_cell_definition",
      "layer": "L1",
      "category": "Regulatory",
      "fields": [
        {
          "name": "active_flag",
          "description": "Active flag",
          "category": "Regulatory",
          "why_required": "Operational gating"
        },
        {
          "name": "calculation_rule_id",
          "description": "Rule id (if derived)",
          "category": "Regulatory",
          "why_required": "Links to rule_registry for logic-as-data",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "rule_registry",
              "field": "rule_id"
            }
          }
        },
        {
          "name": "cell_datatype",
          "description": "NUMERIC/STRING/BOOLEAN",
          "category": "Regulatory",
          "why_required": "Validation and rendering"
        },
        {
          "name": "cell_id",
          "description": "Unique report cell identifier",
          "category": "Regulatory",
          "why_required": "Primary key for report layout metadata",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "cell_name",
          "description": "Cell name/label",
          "category": "Regulatory",
          "why_required": "Human-readable label"
        },
        {
          "name": "is_derived_flag",
          "description": "Whether the cell is derived",
          "category": "Regulatory",
          "why_required": "Drives lineage and explanations"
        },
        {
          "name": "line_item_code",
          "description": "Line/cell code",
          "category": "Regulatory",
          "why_required": "Deterministic mapping key"
        },
        {
          "name": "report_code",
          "description": "Report code",
          "category": "Regulatory",
          "why_required": "Groups cells by report",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "report_registry",
              "field": "report_code"
            }
          }
        },
        {
          "name": "schedule_code",
          "description": "Schedule identifier",
          "category": "Regulatory",
          "why_required": "Organizes layout within report"
        },
        {
          "name": "uom",
          "description": "Unit of measure (USD/PCT/COUNT)",
          "category": "Regulatory",
          "why_required": "Consistent interpretation"
        }
      ]
    },
    {
      "name": "model_registry_dim",
      "layer": "L1",
      "category": "Models",
      "fields": [
        {
          "name": "documentation_url",
          "description": "Reference to documentation",
          "category": "Models",
          "why_required": "Audit evidence"
        },
        {
          "name": "effective_from_date",
          "description": "Start date of model usage",
          "category": "Models",
          "why_required": "Historical lookback"
        },
        {
          "name": "effective_to_date",
          "description": "End date of model usage",
          "category": "Models",
          "why_required": "Historical lookback"
        },
        {
          "name": "is_current",
          "description": "Current model flag",
          "category": "Models",
          "why_required": "Operational selection"
        },
        {
          "name": "model_id",
          "description": "Unique model identifier",
          "category": "Models",
          "why_required": "Primary key referenced by mappings and model outputs",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "model_name",
          "description": "Model name",
          "category": "Models",
          "why_required": "Human identification"
        },
        {
          "name": "model_type",
          "description": "PD/LGD/EAD/CCF/STRESS/PRICING",
          "category": "Models",
          "why_required": "Routes outputs to the right consumers"
        },
        {
          "name": "model_version",
          "description": "Model version",
          "category": "Models",
          "why_required": "Reproducibility and auditability"
        },
        {
          "name": "owner_org_unit_id",
          "description": "Owning org unit",
          "category": "Models",
          "why_required": "Governance and accountability",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "org_unit_dim",
              "field": "org_unit_id"
            }
          }
        },
        {
          "name": "regulatory_approved_flag",
          "description": "Regulatory approval indicator",
          "category": "Models",
          "why_required": "Advanced approaches compliance"
        },
        {
          "name": "validation_status",
          "description": "DRAFT/VALIDATED/RETIRED",
          "category": "Models",
          "why_required": "Model risk management control"
        }
      ]
    },
    {
      "name": "rule_registry",
      "layer": "L1",
      "category": "Models",
      "fields": [
        {
          "name": "active_flag",
          "description": "Active flag",
          "category": "Models",
          "why_required": "Operational gating"
        },
        {
          "name": "approved_by",
          "description": "Approver",
          "category": "Models",
          "why_required": "Governance evidence"
        },
        {
          "name": "approved_ts",
          "description": "Approval timestamp",
          "category": "Models",
          "why_required": "Governance evidence"
        },
        {
          "name": "effective_from_date",
          "description": "Start date",
          "category": "Models",
          "why_required": "Historical reproducibility"
        },
        {
          "name": "effective_to_date",
          "description": "End date",
          "category": "Models",
          "why_required": "Historical reproducibility"
        },
        {
          "name": "input_variables",
          "description": "Declared input variables (JSON)",
          "category": "Models",
          "why_required": "Supports lineage and impact analysis"
        },
        {
          "name": "output_variable",
          "description": "Declared output variable",
          "category": "Models",
          "why_required": "Supports dependency graphs"
        },
        {
          "name": "rule_expression",
          "description": "Expression or DSL for the rule",
          "category": "Models",
          "why_required": "Enables code-free computation where feasible"
        },
        {
          "name": "rule_id",
          "description": "Unique rule identifier",
          "category": "Models",
          "why_required": "Primary key for logic-as-data rules",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "rule_name",
          "description": "Rule name",
          "category": "Models",
          "why_required": "Human-readable label"
        },
        {
          "name": "rule_type",
          "description": "CALCULATION/VALIDATION/MAPPING",
          "category": "Models",
          "why_required": "Routes rule execution and governance"
        }
      ]
    },
    {
      "name": "reconciliation_control",
      "layer": "L1",
      "category": "Run Control & Lineage",
      "fields": [
        {
          "name": "actual_value",
          "description": "Observed control value",
          "category": "Run Control & Lineage",
          "why_required": "Evidence of control execution"
        },
        {
          "name": "check_name",
          "description": "Name of reconciliation test",
          "category": "Run Control & Lineage",
          "why_required": "Human readable control inventory"
        },
        {
          "name": "check_type",
          "description": "COUNT/SUM/HASH/KEY_COVERAGE/VALIDATION",
          "category": "Run Control & Lineage",
          "why_required": "Standardizes control behavior and reporting"
        },
        {
          "name": "executed_ts",
          "description": "Execution timestamp",
          "category": "Run Control & Lineage",
          "why_required": "Auditability"
        },
        {
          "name": "expected_value",
          "description": "Expected control value (count/sum/hash)",
          "category": "Run Control & Lineage",
          "why_required": "Defines control target"
        },
        {
          "name": "owner_id",
          "description": "Control owner",
          "category": "Run Control & Lineage",
          "why_required": "Accountability"
        },
        {
          "name": "recon_id",
          "description": "Unique reconciliation check identifier",
          "category": "Run Control & Lineage",
          "why_required": "Primary key for reconciliation outcomes",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "remediation_ticket_id",
          "description": "Reference to remediation workflow",
          "category": "Run Control & Lineage",
          "why_required": "Closed-loop control management"
        },
        {
          "name": "report_code",
          "description": "Report or dataset identifier (e.g., FR2590, BCBS239)",
          "category": "Run Control & Lineage",
          "why_required": "Enables report-level certification and evidence"
        },
        {
          "name": "run_version_id",
          "description": "Run version being reconciled",
          "category": "Run Control & Lineage",
          "why_required": "Ties recon outcomes to the exact data snapshot",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "run_control",
              "field": "run_version_id"
            }
          }
        },
        {
          "name": "source_system_id",
          "description": "Source system under test",
          "category": "Run Control & Lineage",
          "why_required": "Links outcomes to upstream feed",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "source_system_registry",
              "field": "source_system_id"
            }
          }
        },
        {
          "name": "status",
          "description": "PASS/WARN/FAIL",
          "category": "Run Control & Lineage",
          "why_required": "Operational gating and escalation"
        },
        {
          "name": "tolerance_value",
          "description": "Allowed tolerance",
          "category": "Run Control & Lineage",
          "why_required": "Defines pass/fail threshold"
        },
        {
          "name": "variance_value",
          "description": "Actual minus expected",
          "category": "Run Control & Lineage",
          "why_required": "Quantifies breach magnitude"
        }
      ]
    },
    {
      "name": "report_registry",
      "layer": "L1",
      "category": "Run Control & Lineage",
      "fields": [
        {
          "name": "active_flag",
          "description": "Active flag",
          "category": "Run Control & Lineage",
          "why_required": "Operational gating"
        },
        {
          "name": "effective_from_date",
          "description": "Start date",
          "category": "Run Control & Lineage",
          "why_required": "Historical consistency"
        },
        {
          "name": "effective_to_date",
          "description": "End date",
          "category": "Run Control & Lineage",
          "why_required": "Historical consistency"
        },
        {
          "name": "frequency",
          "description": "DAILY/WEEKLY/MONTHLY/QUARTERLY",
          "category": "Run Control & Lineage",
          "why_required": "Filing cadence and run scheduling"
        },
        {
          "name": "jurisdiction_code",
          "description": "Jurisdiction context",
          "category": "Run Control & Lineage",
          "why_required": "Regulatory applicability",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "regulatory_jurisdiction",
              "field": "jurisdiction_code"
            }
          }
        },
        {
          "name": "regulator_code",
          "description": "Regulator/standard (FED/EBA/BCBS)",
          "category": "Run Control & Lineage",
          "why_required": "Regulatory context"
        },
        {
          "name": "report_code",
          "description": "Unique report code (e.g., FR2590, FR2052A)",
          "category": "Run Control & Lineage",
          "why_required": "Primary key used across reporting metadata and mappings",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "report_name",
          "description": "Report name",
          "category": "Run Control & Lineage",
          "why_required": "Human-readable label"
        }
      ]
    },
    {
      "name": "run_control",
      "layer": "L1",
      "category": "Run Control & Lineage",
      "fields": [
        {
          "name": "as_of_date",
          "description": "Business as-of date for the run",
          "category": "Run Control & Lineage",
          "why_required": "Aligns all fact snapshots to a consistent reporting date",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "date_dim",
              "field": "calendar_date"
            }
          }
        },
        {
          "name": "certified_by",
          "description": "Approver/certifier",
          "category": "Run Control & Lineage",
          "why_required": "Regulatory defensibility"
        },
        {
          "name": "certified_ts",
          "description": "Certification timestamp",
          "category": "Run Control & Lineage",
          "why_required": "Regulatory defensibility"
        },
        {
          "name": "created_by",
          "description": "User/service that initiated run",
          "category": "Run Control & Lineage",
          "why_required": "Audit and traceability"
        },
        {
          "name": "created_ts",
          "description": "Run creation timestamp",
          "category": "Run Control & Lineage",
          "why_required": "Audit and lineage"
        },
        {
          "name": "cutoff_ts",
          "description": "Extraction cut-off timestamp",
          "category": "Run Control & Lineage",
          "why_required": "Defines data completeness boundary; required for auditability"
        },
        {
          "name": "notes",
          "description": "Free-text notes",
          "category": "Run Control & Lineage",
          "why_required": "Operational context for exceptions"
        },
        {
          "name": "run_version_id",
          "description": "Unique run/version identifier",
          "category": "Run Control & Lineage",
          "why_required": "Primary key used by L2/L3 facts for point-in-time reproducibility",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "status",
          "description": "Run status (STARTED/COMPLETED/FAILED/CERTIFIED)",
          "category": "Run Control & Lineage",
          "why_required": "Run lifecycle control and downstream gating"
        }
      ]
    },
    {
      "name": "source_system_registry",
      "layer": "L1",
      "category": "Run Control & Lineage",
      "fields": [
        {
          "name": "active_flag",
          "description": "Whether source is active",
          "category": "Run Control & Lineage",
          "why_required": "Operational gating"
        },
        {
          "name": "created_ts",
          "description": "Record creation timestamp",
          "category": "Run Control & Lineage",
          "why_required": "Audit trail"
        },
        {
          "name": "data_domain",
          "description": "Domain (Credit, Market, Finance, Reference)",
          "category": "Run Control & Lineage",
          "why_required": "Access control and stewardship routing"
        },
        {
          "name": "ingestion_frequency",
          "description": "Expected feed frequency (real-time/intraday/daily)",
          "category": "Run Control & Lineage",
          "why_required": "SLA management and staleness detection"
        },
        {
          "name": "source_system_id",
          "description": "Unique source system identifier",
          "category": "Run Control & Lineage",
          "why_required": "Primary key; anchors lineage across all layers",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "source_system_name",
          "description": "System name (e.g., LoanIQ, Murex, Calypso)",
          "category": "Run Control & Lineage",
          "why_required": "Human identification and ownership"
        },
        {
          "name": "system_owner",
          "description": "Business/IT owner",
          "category": "Run Control & Lineage",
          "why_required": "Governance and escalation path"
        },
        {
          "name": "updated_ts",
          "description": "Record last update timestamp",
          "category": "Run Control & Lineage",
          "why_required": "Audit trail"
        }
      ]
    },
    {
      "name": "validation_check_registry",
      "layer": "L1",
      "category": "Run Control & Lineage",
      "fields": [
        {
          "name": "active_flag",
          "description": "Active flag",
          "category": "Run Control & Lineage",
          "why_required": "Operational gating"
        },
        {
          "name": "check_id",
          "description": "Unique validation check identifier",
          "category": "Run Control & Lineage",
          "why_required": "Primary key for data quality/controls registry",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "check_name",
          "description": "Check name",
          "category": "Run Control & Lineage",
          "why_required": "Human-readable label"
        },
        {
          "name": "check_rule_id",
          "description": "Rule id implementing the check",
          "category": "Run Control & Lineage",
          "why_required": "Links to rule_registry for logic-as-data",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "rule_registry",
              "field": "rule_id"
            }
          }
        },
        {
          "name": "check_type",
          "description": "COMPLETENESS/ACCURACY/CONSISTENCY/RECONCILIATION",
          "category": "Run Control & Lineage",
          "why_required": "Standardizes control portfolio"
        },
        {
          "name": "owner_id",
          "description": "Check owner",
          "category": "Run Control & Lineage",
          "why_required": "Accountability"
        },
        {
          "name": "severity",
          "description": "LOW/MEDIUM/HIGH/CRITICAL",
          "category": "Run Control & Lineage",
          "why_required": "Gating and escalation"
        },
        {
          "name": "target_column",
          "description": "Target column name",
          "category": "Run Control & Lineage",
          "why_required": "Column-level checks"
        },
        {
          "name": "target_table",
          "description": "Target table name",
          "category": "Run Control & Lineage",
          "why_required": "Applies checks to specific datasets"
        },
        {
          "name": "validation_check_id",
          "description": "Surrogate validation check identifier (alias for check_id)",
          "category": "Run Control & Lineage",
          "why_required": "Matches naming expectations in downstream control tooling"
        }
      ]
    },
    {
      "name": "metric_definition_dim",
      "layer": "L1",
      "category": "Uncategorized",
      "fields": [
        {
          "name": "metric_definition_id",
          "description": "Primary key for controlled metric semantics.",
          "category": "Uncategorized",
          "why_required": "PK"
        },
        {
          "name": "metric_code",
          "description": "Stable identifier for metric usage.",
          "category": "Uncategorized"
        },
        {
          "name": "metric_name",
          "description": "Reporting and UI.",
          "category": "Uncategorized"
        },
        {
          "name": "metric_domain",
          "description": "Governance and validation.",
          "category": "Uncategorized"
        },
        {
          "name": "unit_of_measure",
          "description": "Prevents misinterpretation and supports validation.",
          "category": "Uncategorized"
        },
        {
          "name": "periodicity_code",
          "description": "Consistent trend logic.",
          "category": "Uncategorized"
        },
        {
          "name": "calculation_rule_id",
          "description": "Links definition to executable logic when applicable.",
          "category": "Uncategorized",
          "why_required": "FK → L1.rule_registry.rule_id"
        },
        {
          "name": "definition_text",
          "description": "Explains differences to users/audit.",
          "category": "Uncategorized"
        },
        {
          "name": "effective_from_date",
          "description": "Historical reproducibility.",
          "category": "Uncategorized"
        },
        {
          "name": "effective_to_date",
          "description": "Historical reproducibility.",
          "category": "Uncategorized"
        },
        {
          "name": "version",
          "description": "Supports controlled evolution of metric definitions.",
          "category": "Uncategorized"
        },
        {
          "name": "is_active_flag",
          "description": "Operational gating.",
          "category": "Uncategorized"
        },
        {
          "name": "source_system_id",
          "description": "Lineage.",
          "category": "Uncategorized",
          "why_required": "FK → L1.source_system_registry.source_system_id"
        },
        {
          "name": "created_ts",
          "description": "Audit trail.",
          "category": "Uncategorized"
        }
      ]
    }
  ],
  "L2": [
    {
      "name": "position",
      "layer": "L2",
      "category": "Position Core",
      "fields": [
        {
          "name": "position_id",
          "description": "Surrogate unique position identifier",
          "category": "Position Core",
          "why_required": "Core PK for all position-level facts",
          "simplification_note": "Simplified from 41→28 fields. Removed refs to non-existent L1 tables. All fields are source-system attributes.",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "position_type",
          "description": "Position subtype code (LOAN/DERIVATIVE/SECURITY/DEPOSIT/SFT/COMMITMENT)",
          "category": "Position Core",
          "why_required": "Drives subtype join and product classification"
        },
        {
          "name": "facility_id",
          "description": "Facility identifier",
          "category": "Position Core",
          "why_required": "Links position to facility",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "facility_master",
              "field": "facility_id"
            }
          }
        },
        {
          "name": "credit_agreement_id",
          "description": "Credit agreement identifier",
          "category": "Position Core",
          "why_required": "Links position to credit agreement",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "credit_agreement_master",
              "field": "credit_agreement_id"
            }
          }
        },
        {
          "name": "counterparty_id",
          "description": "Primary counterparty / obligor",
          "category": "Position Core",
          "why_required": "Core counterparty linkage",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "ultimate_parent_id",
          "description": "Ultimate parent counterparty identifier",
          "category": "Position Core",
          "why_required": "Concentration roll-up to parent level",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "legal_entity_id",
          "description": "Reporting/booking legal entity",
          "category": "Position Core",
          "why_required": "Legal entity aggregation (Page 4)",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "legal_entity",
              "field": "legal_entity_id"
            }
          }
        },
        {
          "name": "instrument_id",
          "description": "Instrument identifier (nullable)",
          "category": "Position Core",
          "why_required": "Links to instrument master",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "instrument_master",
              "field": "instrument_id"
            }
          }
        },
        {
          "name": "netting_set_id",
          "description": "Netting set identifier (nullable — derivatives/SFT only)",
          "category": "Position Core",
          "why_required": "Links position to netting set for close-out netting",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "netting_set",
              "field": "netting_set_id"
            }
          }
        },
        {
          "name": "position_currency",
          "description": "Currency code of position balances",
          "category": "Position Core",
          "why_required": "FX conversion and reporting",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "currency_dim",
              "field": "currency_code"
            }
          }
        },
        {
          "name": "notional_amount",
          "description": "Notional amount (local currency)",
          "category": "Position Core",
          "why_required": "Base for derivative/commitment exposure calc"
        },
        {
          "name": "book_value_amt",
          "description": "Book / carrying value amount",
          "category": "Position Core",
          "why_required": "Balance sheet reporting"
        },
        {
          "name": "market_value_amt",
          "description": "Market/fair value amount (local)",
          "category": "Position Core",
          "why_required": "MTM and fair value reporting"
        },
        {
          "name": "accrued_interest_amt",
          "description": "Accrued interest amount",
          "category": "Position Core",
          "why_required": "Income accrual tracking"
        },
        {
          "name": "trading_banking_book_flag",
          "description": "Trading vs Banking Book indicator",
          "category": "Position Core",
          "why_required": "Regulatory classification"
        },
        {
          "name": "contractual_maturity_date",
          "description": "Contractual maturity date",
          "category": "Position Core",
          "why_required": "Maturity analysis, facility timeline (Page 6)"
        },
        {
          "name": "effective_date",
          "description": "Position effective/origination date",
          "category": "Position Core",
          "why_required": "Facility timeline toggle (Page 6)"
        },
        {
          "name": "exposure_type_code",
          "description": "Exposure type classification code",
          "category": "Position Core",
          "why_required": "Exposure classification for FR2590 mapping",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "exposure_type_dim",
              "field": "exposure_type_code"
            }
          }
        },
        {
          "name": "credit_status_code",
          "description": "Credit status (performing/default/NPL)",
          "category": "Position Core",
          "why_required": "Delinquency and default analysis",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "credit_status_dim",
              "field": "credit_status_code"
            }
          }
        },
        {
          "name": "internal_risk_rating",
          "description": "Internal rating (1-5 scale)",
          "category": "Position Core",
          "why_required": "Risk rating toggle - internal view"
        },
        {
          "name": "external_risk_rating",
          "description": "External rating (CCC to AA scale)",
          "category": "Position Core",
          "why_required": "Risk rating toggle - external view"
        },
        {
          "name": "pd_estimate",
          "description": "Point-in-time PD estimate (source-system output)",
          "category": "Position Core",
          "why_required": "MUST BE SOURCE SYSTEM INPUT — PIT Probability of Default from credit risk model (e.g., Moody's RiskCalc, internal IRB model). Cannot be re-derived without underlying obligor financials, market data, and model calibration.",
          "simplification_note": "SOURCE SYSTEM REQUIRED."
        },
        {
          "name": "lgd_estimate",
          "description": "LGD estimate (source-system output)",
          "category": "Position Core",
          "why_required": "MUST BE SOURCE SYSTEM INPUT — Loss Given Default from credit risk model (e.g., downturn LGD model). Requires collateral recovery assumptions, seniority, jurisdiction-specific recovery data not available in this data model.",
          "simplification_note": "SOURCE SYSTEM REQUIRED."
        },
        {
          "name": "as_of_date",
          "description": "Snapshot as-of date",
          "category": "Position Core",
          "why_required": "Temporal partitioning - 12 month history",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true
          }
        }
      ]
    },
    {
      "name": "position_detail",
      "layer": "L2",
      "category": "Position Detail",
      "fields": [
        {
          "name": "position_id",
          "description": "Position identifier",
          "category": "Position Detail",
          "why_required": "Links to parent position record",
          "simplification_note": "CONSOLIDATED from 6 subtype tables. All fields are source-system attributes.",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "as_of_date",
          "description": "Snapshot as-of date",
          "category": "Position Detail",
          "why_required": "Temporal partitioning",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true
          }
        },
        {
          "name": "interest_rate",
          "description": "Current interest rate (loans/deposits)",
          "category": "Position Detail",
          "why_required": "Pricing analysis (Page 7)"
        },
        {
          "name": "rate_type",
          "description": "Fixed/variable indicator",
          "category": "Position Detail",
          "why_required": "Rate type classification"
        },
        {
          "name": "rate_index",
          "description": "Reference index (e.g., SOFR, PRIME)",
          "category": "Position Detail",
          "why_required": "Base rate analysis (Page 7)"
        },
        {
          "name": "spread_bps",
          "description": "Contractual spread over index (bps)",
          "category": "Position Detail",
          "why_required": "Spread analysis (Page 7)"
        },
        {
          "name": "origination_date",
          "description": "Origination date",
          "category": "Position Detail",
          "why_required": "Vintage analysis"
        },
        {
          "name": "days_past_due",
          "description": "Days past due",
          "category": "Position Detail",
          "why_required": "Delinquency tracking (Page 7)"
        },
        {
          "name": "delinquency_status",
          "description": "Delinquency status code",
          "category": "Position Detail",
          "why_required": "Delinquency bucket analysis"
        },
        {
          "name": "total_commitment",
          "description": "Total committed amount",
          "category": "Position Detail",
          "why_required": "Commitment exposure (Page 2 KPI)"
        },
        {
          "name": "funded_amount",
          "description": "Funded/drawn amount",
          "category": "Position Detail",
          "why_required": "Drawn vs undrawn analysis"
        },
        {
          "name": "unfunded_amount",
          "description": "Unfunded/undrawn amount",
          "category": "Position Detail",
          "why_required": "Undrawn exposure and CCF"
        },
        {
          "name": "ccf",
          "description": "Credit conversion factor",
          "category": "Position Detail",
          "why_required": "MUST BE SOURCE SYSTEM INPUT — Credit Conversion Factor from regulatory/internal model. Basel-prescribed or model-based CCF for off-balance sheet items. Mapped by exposure type and regulatory approach (SA vs IRB).",
          "simplification_note": "SOURCE SYSTEM REQUIRED."
        },
        {
          "name": "derivative_type",
          "description": "Derivative type (swap/option/future)",
          "category": "Position Detail",
          "why_required": "Product breakdown for derivatives"
        },
        {
          "name": "mark_to_market",
          "description": "MTM value (local currency)",
          "category": "Position Detail",
          "why_required": "Derivative valuation"
        },
        {
          "name": "replacement_cost",
          "description": "Replacement cost",
          "category": "Position Detail",
          "why_required": "MUST BE SOURCE SYSTEM INPUT — SA-CCR replacement cost from risk engine. Requires trade-level Greeks, market data curves, and close-out netting logic not available in this data model.",
          "simplification_note": "SOURCE SYSTEM REQUIRED."
        },
        {
          "name": "pfe",
          "description": "Potential future exposure",
          "category": "Position Detail",
          "why_required": "MUST BE SOURCE SYSTEM INPUT — SA-CCR Potential Future Exposure from risk engine. Requires supervisory factors, hedging set decomposition, delta adjustments not available in this data model.",
          "simplification_note": "SOURCE SYSTEM REQUIRED."
        },
        {
          "name": "sft_type",
          "description": "SFT type (repo/reverse repo/sec lending)",
          "category": "Position Detail",
          "why_required": "SFT product classification"
        },
        {
          "name": "cash_leg_amount",
          "description": "Cash leg amount",
          "category": "Position Detail",
          "why_required": "SFT exposure"
        },
        {
          "name": "haircut_applied_pct",
          "description": "Haircut applied percentage",
          "category": "Position Detail",
          "why_required": "MUST BE SOURCE SYSTEM INPUT — Supervisory or model-based haircut from collateral management system. Depends on asset type, holding period, and volatility assumptions.",
          "simplification_note": "SOURCE SYSTEM REQUIRED."
        },
        {
          "name": "quantity",
          "description": "Quantity held",
          "category": "Position Detail",
          "why_required": "Securities position sizing"
        },
        {
          "name": "fair_value",
          "description": "Fair value",
          "category": "Position Detail",
          "why_required": "Securities valuation"
        },
        {
          "name": "unrealized_gain_loss",
          "description": "Unrealized gain/loss",
          "category": "Position Detail",
          "why_required": "P&L impact"
        },
        {
          "name": "current_balance",
          "description": "Current deposit balance",
          "category": "Position Detail",
          "why_required": "Deposit tracking"
        },
        {
          "name": "insured_balance",
          "description": "FDIC insured portion",
          "category": "Position Detail",
          "why_required": "Deposit insurance analysis"
        }
      ]
    },
    {
      "name": "exposure_counterparty_attribution",
      "layer": "L2",
      "category": "Exposure",
      "fields": [
        {
          "name": "attribution_id",
          "description": "PK — unique counterparty exposure attribution",
          "category": "Exposure",
          "why_required": "Primary key",
          "simplification_note": "L2 review new table",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "facility_id",
          "description": "FK to facility_master",
          "category": "Exposure",
          "why_required": "Facility link",
          "simplification_note": "L2 review new table",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "facility_master",
              "field": "facility_id"
            }
          }
        },
        {
          "name": "counterparty_id",
          "description": "FK to counterparty — party receiving exposure",
          "category": "Exposure",
          "why_required": "SCCL target",
          "simplification_note": "L2 review new table",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "counterparty_role_code",
          "description": "FK to counterparty_role_dim — role",
          "category": "Exposure",
          "why_required": "Role-based rules",
          "simplification_note": "L2 review new table",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty_role_dim",
              "field": "counterparty_role_code"
            }
          }
        },
        {
          "name": "attribution_pct",
          "description": "% of facility exposure attributed",
          "category": "Exposure",
          "why_required": "Pro-rata",
          "simplification_note": "L2 review new table"
        },
        {
          "name": "attributed_exposure_usd",
          "description": "Dollar amount attributed (USD)",
          "category": "Exposure",
          "why_required": "SCCL input",
          "simplification_note": "L2 review new table"
        },
        {
          "name": "is_risk_shifted_flag",
          "description": "Y/N from CRM substitution",
          "category": "Exposure",
          "why_required": "Risk shifting",
          "simplification_note": "L2 review new table"
        },
        {
          "name": "risk_shifted_from_counterparty_id",
          "description": "FK to original counterparty (NULL if not shifted)",
          "category": "Exposure",
          "why_required": "CRM audit trail",
          "simplification_note": "L2 review new table",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "as_of_date",
          "description": "Snapshot date",
          "category": "Exposure",
          "why_required": "Point-in-time",
          "simplification_note": "L2 review new table",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true
          }
        }
      ]
    },
    {
      "name": "facility_exposure_snapshot",
      "layer": "L2",
      "category": "Exposure",
      "fields": [
        {
          "name": "facility_exposure_id",
          "description": "Surrogate identifier",
          "category": "Exposure",
          "why_required": "Unique row identity",
          "simplification_note": "Facility-level gross/net exposure snapshot. Atomic: 1 facility × 1 date. CRM-adjusted net_exposure_usd computed here. | Atomic gross exposure. Net exposure and coverage ratios computed in L3 by joining collateral_snapshot.",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "facility_id",
          "description": "Facility identifier",
          "category": "Exposure",
          "why_required": "Core facility linkage",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "facility_master",
              "field": "facility_id"
            }
          }
        },
        {
          "name": "counterparty_id",
          "description": "Primary counterparty/borrower",
          "category": "Exposure",
          "why_required": "Counterparty-level roll-ups",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "legal_entity_id",
          "description": "Reporting legal entity",
          "category": "Exposure",
          "why_required": "Legal entity aggregation (Page 4)",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "legal_entity",
              "field": "legal_entity_id"
            }
          }
        },
        {
          "name": "gross_exposure_usd",
          "description": "Gross exposure amount (USD)",
          "category": "Exposure",
          "why_required": "Source-system gross exposure measure"
        },
        {
          "name": "drawn_amount",
          "description": "Drawn/outstanding amount",
          "category": "Exposure",
          "why_required": "Utilization calculation"
        },
        {
          "name": "undrawn_amount",
          "description": "Undrawn/committed-but-undrawn amount",
          "category": "Exposure",
          "why_required": "Headroom and commitment analysis"
        },
        {
          "name": "currency_code",
          "description": "Original currency code",
          "category": "Exposure",
          "why_required": "FX context",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "currency_dim",
              "field": "currency_code"
            }
          }
        },
        {
          "name": "exposure_amount_local",
          "description": "Exposure in original currency",
          "category": "Exposure",
          "why_required": "Local currency reporting"
        },
        {
          "name": "as_of_date",
          "description": "Snapshot as-of date",
          "category": "Exposure",
          "why_required": "12-month history for trends",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true
          }
        },
        {
          "name": "fr2590_category_code",
          "description": "FR 2590 category code",
          "category": "Exposure",
          "why_required": "FR2590 toggle grouping (Page 2)",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "fr2590_category_dim",
              "field": "fr2590_category_code"
            }
          }
        },
        {
          "name": "product_node_id",
          "description": "FK to enterprise_product_taxonomy",
          "category": "Exposure",
          "why_required": "Product/FR2590 toggle Page 2",
          "simplification_note": "L2 review addition",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "enterprise_product_taxonomy",
              "field": "product_node_id"
            }
          }
        },
        {
          "name": "lob_segment_id",
          "description": "FK to enterprise_business_taxonomy — primary LoB",
          "category": "Exposure",
          "why_required": "Page 7 LoB breakdown",
          "simplification_note": "L2 review addition",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "enterprise_business_taxonomy",
              "field": "managed_segment_id"
            }
          }
        },
        {
          "name": "net_exposure_usd",
          "description": "Net exposure after CRM (USD)",
          "category": "Exposure",
          "why_required": "Gross/Net toggle Pages 2,3,6,7",
          "simplification_note": "L2 review addition"
        },
        {
          "name": "coverage_ratio_pct",
          "description": "Coverage ratio (collateral / exposure)",
          "category": "Exposure",
          "why_required": "Page 2 KPI: Coverage Ratio",
          "simplification_note": "L2 review addition"
        }
      ]
    },
    {
      "name": "netting_set_exposure_snapshot",
      "layer": "L2",
      "category": "Exposure",
      "fields": [
        {
          "name": "netting_set_exposure_id",
          "description": "Surrogate identifier",
          "category": "Exposure",
          "why_required": "Unique row identity",
          "simplification_note": "Netting-set-level exposure for derivatives/SFT. Atomic: 1 netting_set × 1 date. Separate from facility exposure. | RE-ADDED. Atomic netting set exposure record from the CCR/SA-CCR engine. Now anchored to L1.netting_set. Each row = 1 netting set × 1 date. Records gross/net MTM, PFE, EAD, and collateral held per netting set.",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "netting_set_id",
          "description": "Netting set identifier",
          "category": "Exposure",
          "why_required": "Links to L1 netting set master",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "netting_set",
              "field": "netting_set_id"
            }
          }
        },
        {
          "name": "counterparty_id",
          "description": "Facing counterparty",
          "category": "Exposure",
          "why_required": "Counterparty roll-up for concentration",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "legal_entity_id",
          "description": "Reporting legal entity",
          "category": "Exposure",
          "why_required": "Legal entity aggregation",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "legal_entity",
              "field": "legal_entity_id"
            }
          }
        },
        {
          "name": "gross_mtm_usd",
          "description": "Gross mark-to-market (USD) before netting",
          "category": "Exposure",
          "why_required": "MUST BE SOURCE SYSTEM INPUT — Gross MTM from front-office/risk engine. Sum of position-level MTMs within netting set before netting benefit.",
          "simplification_note": "SOURCE SYSTEM REQUIRED."
        },
        {
          "name": "pfe_usd",
          "description": "Potential future exposure (USD)",
          "category": "Exposure",
          "why_required": "MUST BE SOURCE SYSTEM INPUT — PFE from SA-CCR/IMM engine. Requires add-on calculations with supervisory factors, hedging set decomposition per BCBS standards.",
          "simplification_note": "SOURCE SYSTEM REQUIRED."
        },
        {
          "name": "collateral_held_usd",
          "description": "Collateral held against netting set (USD)",
          "category": "Exposure",
          "why_required": "MUST BE SOURCE SYSTEM INPUT — Collateral held per netting set from margin/collateral management system. Reflects CSA terms, margin calls, and collateral eligibility.",
          "simplification_note": "SOURCE SYSTEM REQUIRED."
        },
        {
          "name": "currency_code",
          "description": "Netting set base currency",
          "category": "Exposure",
          "why_required": "FX context",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "currency_dim",
              "field": "currency_code"
            }
          }
        },
        {
          "name": "as_of_date",
          "description": "Snapshot as-of date",
          "category": "Exposure",
          "why_required": "12-month history",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true
          }
        }
      ]
    },
    {
      "name": "facility_lob_attribution",
      "layer": "L2",
      "category": "LoB Attribution",
      "fields": [
        {
          "name": "attribution_id",
          "description": "PK — unique attribution record",
          "category": "LoB Attribution",
          "why_required": "Primary key",
          "simplification_note": "L2 review new table",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "facility_id",
          "description": "FK to facility_master",
          "category": "LoB Attribution",
          "why_required": "Facility link",
          "simplification_note": "L2 review new table",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "facility_master",
              "field": "facility_id"
            }
          }
        },
        {
          "name": "lob_segment_id",
          "description": "FK to enterprise_business_taxonomy",
          "category": "LoB Attribution",
          "why_required": "LoB target",
          "simplification_note": "L2 review new table",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "enterprise_business_taxonomy",
              "field": "managed_segment_id"
            }
          }
        },
        {
          "name": "attribution_pct",
          "description": "% of facility exposure to this LoB (must sum to 100%)",
          "category": "LoB Attribution",
          "why_required": "Split attribution",
          "simplification_note": "L2 review new table"
        },
        {
          "name": "attribution_amount_usd",
          "description": "Dollar amount attributed (USD)",
          "category": "LoB Attribution",
          "why_required": "Direct summation",
          "simplification_note": "L2 review new table"
        },
        {
          "name": "attribution_type",
          "description": "PRIMARY or SECONDARY",
          "category": "LoB Attribution",
          "why_required": "Default reporting flag",
          "simplification_note": "L2 review new table"
        },
        {
          "name": "as_of_date",
          "description": "Snapshot date",
          "category": "LoB Attribution",
          "why_required": "Point-in-time",
          "simplification_note": "L2 review new table",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true
          }
        }
      ]
    },
    {
      "name": "collateral_snapshot",
      "layer": "L2",
      "category": "CRM",
      "fields": [
        {
          "name": "collateral_snapshot_id",
          "description": "Surrogate identifier",
          "category": "CRM",
          "why_required": "Unique row identity",
          "simplification_note": "Consolidated CRM snapshot combining funded collateral AND unfunded protection. L2 unified view of L1 collateral_asset_master + crm_protection_master via risk_mitigant_master. | CONSOLIDATED from 4 CRM tables. Each row = 1 mitigant allocation to 1 facility. eligible_value is same-row derivation.",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "facility_id",
          "description": "Facility identifier",
          "category": "CRM",
          "why_required": "Links CRM to facility",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "facility_master",
              "field": "facility_id"
            }
          }
        },
        {
          "name": "counterparty_id",
          "description": "Counterparty providing/receiving CRM",
          "category": "CRM",
          "why_required": "Counterparty CRM attribution",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "collateral_asset_id",
          "description": "Collateral asset identifier (nullable for protections)",
          "category": "CRM",
          "why_required": "Links to collateral asset master",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "collateral_asset_master",
              "field": "collateral_asset_id"
            }
          }
        },
        {
          "name": "crm_type_code",
          "description": "CRM type code",
          "category": "CRM",
          "why_required": "Links to CRM type dimension",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "crm_type_dim",
              "field": "crm_type_code"
            }
          }
        },
        {
          "name": "mitigant_group_code",
          "description": "Parent group: M1 (Eligible Collateral) or M2 (Other Eligible Risk Mitigants)",
          "category": "CRM",
          "why_required": "Risk Mitigation by Type chart (Page 2)"
        },
        {
          "name": "mitigant_subtype",
          "description": "Risk mitigation sub-type (Cash, Sovereign Debt, Guarantees, etc.)",
          "category": "CRM",
          "why_required": "Risk Mitigation by Type chart (Page 2) - y-axis"
        },
        {
          "name": "original_valuation_usd",
          "description": "Original valuation amount (USD)",
          "category": "CRM",
          "why_required": "Facility drawer — original vs current comparison"
        },
        {
          "name": "current_valuation_usd",
          "description": "Current valuation amount (USD)",
          "category": "CRM",
          "why_required": "Coverage ratio calculation"
        },
        {
          "name": "haircut_pct",
          "description": "Haircut percentage applied",
          "category": "CRM",
          "why_required": "Eligible value calculation"
        },
        {
          "name": "allocated_amount_usd",
          "description": "Amount allocated to this facility (USD)",
          "category": "CRM",
          "why_required": "Facility-level CRM attribution"
        },
        {
          "name": "risk_shifting_flag",
          "description": "Risk shifting/substitution indicator",
          "category": "CRM",
          "why_required": "Identifies exposure reattribution"
        },
        {
          "name": "as_of_date",
          "description": "Snapshot as-of date",
          "category": "CRM",
          "why_required": "12-month history",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true
          }
        }
      ]
    },
    {
      "name": "cash_flow",
      "layer": "L2",
      "category": "Cash Flows",
      "fields": [
        {
          "name": "flow_id",
          "description": "Unique cash flow identifier",
          "category": "Cash Flows",
          "why_required": "PK",
          "simplification_note": "RE-ADDED. Atomic cash flow record per position/facility per flow date. Required for Counterparty Details Drawer (Page 2 — Cashflows) and liquidity/maturity profiling. Simplified from original 16→12 fields — removed dangling FKs (run_control, source_system_registry, lob_node).",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "position_id",
          "description": "Position identifier (nullable)",
          "category": "Cash Flows",
          "why_required": "Links to originating position"
        },
        {
          "name": "facility_id",
          "description": "Facility identifier (nullable)",
          "category": "Cash Flows",
          "why_required": "Links to facility for facility-level cash flow views",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "facility_master",
              "field": "facility_id"
            }
          }
        },
        {
          "name": "counterparty_id",
          "description": "Counterparty identifier",
          "category": "Cash Flows",
          "why_required": "Counterparty-level cash flow aggregation for drawer",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "flow_date",
          "description": "Cash flow date",
          "category": "Cash Flows",
          "why_required": "Temporal bucketing for maturity profile"
        },
        {
          "name": "maturity_bucket_id",
          "description": "Maturity bucket identifier",
          "category": "Cash Flows",
          "why_required": "Links to standard maturity buckets",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "maturity_bucket_dim",
              "field": "maturity_bucket_id"
            }
          }
        },
        {
          "name": "flow_type",
          "description": "Cash flow type (INTEREST / PRINCIPAL / FEE / OTHER)",
          "category": "Cash Flows",
          "why_required": "Cash flow classification"
        },
        {
          "name": "flow_direction",
          "description": "Inflow (+) or Outflow (−)",
          "category": "Cash Flows",
          "why_required": "Net cash flow calculation"
        },
        {
          "name": "contractual_amt",
          "description": "Contractual amount (local currency)",
          "category": "Cash Flows",
          "why_required": "Source-system contractual cash flow"
        },
        {
          "name": "contractual_amt_usd",
          "description": "Contractual amount in USD",
          "category": "Cash Flows",
          "why_required": "Standardized reporting"
        },
        {
          "name": "currency_code",
          "description": "Cash flow currency",
          "category": "Cash Flows",
          "why_required": "FX context",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "currency_dim",
              "field": "currency_code"
            }
          }
        },
        {
          "name": "as_of_date",
          "description": "Snapshot as-of date",
          "category": "Cash Flows",
          "why_required": "12-month history",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true
          }
        }
      ]
    },
    {
      "name": "facility_delinquency_snapshot",
      "layer": "L2",
      "category": "Financial Metrics",
      "fields": [
        {
          "name": "delinquency_snapshot_id",
          "description": "Surrogate identifier",
          "category": "Financial Metrics",
          "why_required": "PK",
          "simplification_note": "Source-system delinquency record. total_overdue_amt is same-row sum stamped by servicing system.",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "facility_id",
          "description": "Facility identifier",
          "category": "Financial Metrics",
          "why_required": "Links to facility",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "facility_master",
              "field": "facility_id"
            }
          }
        },
        {
          "name": "as_of_date",
          "description": "Snapshot as-of date",
          "category": "Financial Metrics",
          "why_required": "12-month trend",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true
          }
        },
        {
          "name": "currency_code",
          "description": "Facility currency code",
          "category": "Financial Metrics",
          "why_required": "FX context",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "currency_dim",
              "field": "currency_code"
            }
          }
        },
        {
          "name": "overdue_principal_amt",
          "description": "Overdue principal amount",
          "category": "Financial Metrics",
          "why_required": "Delinquency breakdown"
        },
        {
          "name": "overdue_interest_amt",
          "description": "Overdue interest amount",
          "category": "Financial Metrics",
          "why_required": "Delinquency breakdown"
        },
        {
          "name": "days_past_due_max",
          "description": "Maximum days past due",
          "category": "Financial Metrics",
          "why_required": "DPD analysis"
        },
        {
          "name": "delinquency_status_code",
          "description": "Status (CURRENT/DELINQUENT/NPL)",
          "category": "Financial Metrics",
          "why_required": "Status classification"
        },
        {
          "name": "delinquency_bucket_code",
          "description": "Bucket (0, 1-29, 30-59, 60-89, 90+)",
          "category": "Financial Metrics",
          "why_required": "Bucket distribution"
        },
        {
          "name": "last_payment_received_date",
          "description": "Last payment received date",
          "category": "Financial Metrics",
          "why_required": "Payment recency tracking"
        },
        {
          "name": "counterparty_id",
          "description": "Counterparty identifier",
          "category": "Financial Metrics",
          "why_required": "Counterparty-level roll-up",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        }
      ]
    },
    {
      "name": "facility_pricing_snapshot",
      "layer": "L2",
      "category": "Financial Metrics",
      "fields": [
        {
          "name": "facility_pricing_id",
          "description": "Surrogate identifier",
          "category": "Financial Metrics",
          "why_required": "PK",
          "simplification_note": "Point-in-time pricing snapshot per facility (rate, spread, cap). Captures pricing AS OF a date. L1 facility_master has contractual pricing; this L2 captures observed/effective pricing. | Source-system pricing record. all_in_rate and below_threshold_flag are same-grain source-system outputs.",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "facility_id",
          "description": "Facility identifier",
          "category": "Financial Metrics",
          "why_required": "Links to facility",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "facility_master",
              "field": "facility_id"
            }
          }
        },
        {
          "name": "as_of_date",
          "description": "Snapshot as-of date",
          "category": "Financial Metrics",
          "why_required": "12-month trend",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true
          }
        },
        {
          "name": "currency_code",
          "description": "Facility currency code",
          "category": "Financial Metrics",
          "why_required": "FX context",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "currency_dim",
              "field": "currency_code"
            }
          }
        },
        {
          "name": "base_rate_pct",
          "description": "Reference/base rate percentage (e.g., SOFR)",
          "category": "Financial Metrics",
          "why_required": "Base rate analysis (Page 7)"
        },
        {
          "name": "spread_bps",
          "description": "Contractual spread in basis points",
          "category": "Financial Metrics",
          "why_required": "Spread analysis (Page 7)"
        },
        {
          "name": "rate_index_code",
          "description": "Rate index code (SOFR, PRIME, etc.)",
          "category": "Financial Metrics",
          "why_required": "Rate index classification"
        },
        {
          "name": "rate_cap_pct",
          "description": "Interest rate cap percentage (for variable rates)",
          "category": "Financial Metrics",
          "why_required": "Cap analysis (Page 7)"
        },
        {
          "name": "payment_frequency",
          "description": "Payment frequency",
          "category": "Financial Metrics",
          "why_required": "Facility drawer detail"
        },
        {
          "name": "prepayment_penalty_flag",
          "description": "Prepayment penalty indicator",
          "category": "Financial Metrics",
          "why_required": "Facility drawer detail"
        },
        {
          "name": "min_spread_threshold_bps",
          "description": "Minimum spread threshold (bps) from policy",
          "category": "Financial Metrics",
          "why_required": "Below-threshold analysis (Page 7)"
        }
      ]
    },
    {
      "name": "facility_profitability_snapshot",
      "layer": "L2",
      "category": "Financial Metrics",
      "fields": [
        {
          "name": "profitability_snapshot_id",
          "description": "Surrogate identifier",
          "category": "Financial Metrics",
          "why_required": "PK",
          "simplification_note": "Source-system profitability record. NII, NIM, ROA, ROE are same-grain source-system outputs from FTP engine.",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "facility_id",
          "description": "Facility identifier",
          "category": "Financial Metrics",
          "why_required": "Links to facility",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "facility_master",
              "field": "facility_id"
            }
          }
        },
        {
          "name": "as_of_date",
          "description": "Snapshot as-of date (month-end)",
          "category": "Financial Metrics",
          "why_required": "12-month trend",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true
          }
        },
        {
          "name": "base_currency_code",
          "description": "Aggregation currency code",
          "category": "Financial Metrics",
          "why_required": "Currency context",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "currency_dim",
              "field": "currency_code"
            }
          }
        },
        {
          "name": "interest_income_amt",
          "description": "Interest income for the period",
          "category": "Financial Metrics",
          "why_required": "Revenue component"
        },
        {
          "name": "interest_expense_amt",
          "description": "Interest expense / funding cost",
          "category": "Financial Metrics",
          "why_required": "Cost component"
        },
        {
          "name": "fee_income_amt",
          "description": "Fee income for the period",
          "category": "Financial Metrics",
          "why_required": "Revenue component"
        },
        {
          "name": "avg_earning_assets_amt",
          "description": "Average earning assets (NIM denominator)",
          "category": "Financial Metrics",
          "why_required": "NIM calculation"
        },
        {
          "name": "allocated_equity_amt",
          "description": "Allocated equity (ROE denominator)",
          "category": "Financial Metrics",
          "why_required": "ROE calculation"
        }
      ]
    },
    {
      "name": "limit_contribution_snapshot",
      "layer": "L2",
      "category": "Limits",
      "fields": [
        {
          "name": "contribution_id",
          "description": "PK — unique contribution record",
          "category": "Limits",
          "why_required": "Primary key",
          "simplification_note": "Line-item breakdown of what contributes to a limit's utilization. Child of limit_utilization_event — decomposes the total into per-facility/counterparty amounts. | L2 review new table",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "limit_rule_id",
          "description": "FK to limit_rule",
          "category": "Limits",
          "why_required": "Parent limit",
          "simplification_note": "L2 review new table",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "limit_rule",
              "field": "limit_rule_id"
            }
          }
        },
        {
          "name": "facility_id",
          "description": "FK to contributing facility",
          "category": "Limits",
          "why_required": "Facility driver",
          "simplification_note": "L2 review new table",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "facility_master",
              "field": "facility_id"
            }
          }
        },
        {
          "name": "counterparty_id",
          "description": "FK to contributing counterparty",
          "category": "Limits",
          "why_required": "Counterparty driver",
          "simplification_note": "L2 review new table",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "contribution_amount_usd",
          "description": "Dollar amount contributing (USD)",
          "category": "Limits",
          "why_required": "Limit drill-down",
          "simplification_note": "L2 review new table"
        },
        {
          "name": "contribution_pct",
          "description": "% of total utilization",
          "category": "Limits",
          "why_required": "Top driver ID",
          "simplification_note": "L2 review new table"
        },
        {
          "name": "as_of_date",
          "description": "Snapshot date",
          "category": "Limits",
          "why_required": "Point-in-time",
          "simplification_note": "L2 review new table",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true
          }
        }
      ]
    },
    {
      "name": "limit_utilization_event",
      "layer": "L2",
      "category": "Limits",
      "fields": [
        {
          "name": "utilization_event_id",
          "description": "Surrogate identifier",
          "category": "Limits",
          "why_required": "PK",
          "simplification_note": "Total utilized amount against a limit_rule at a point in time. For line-item decomposition, see limit_contribution_snapshot. | Atomic utilization observation. Raw utilized amount only. Headroom/pct/status computed in L3.",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "limit_rule_id",
          "description": "Limit definition identifier",
          "category": "Limits",
          "why_required": "Links to limit being monitored",
          "simplification_note": "FK renamed: limit_definition → limit_rule",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "limit_rule",
              "field": "limit_rule_id"
            }
          }
        },
        {
          "name": "utilized_amount_usd",
          "description": "Utilized amount reported by source system (USD)",
          "category": "Limits",
          "why_required": "Raw utilization observation"
        },
        {
          "name": "reporting_ts",
          "description": "Timestamp of utilization report from source",
          "category": "Limits",
          "why_required": "Event timing"
        },
        {
          "name": "as_of_date",
          "description": "Snapshot as-of date",
          "category": "Limits",
          "why_required": "12-month history for trend",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true
          }
        }
      ]
    },
    {
      "name": "amendment_change_detail",
      "layer": "L2",
      "category": "Amendments",
      "fields": [
        {
          "name": "amendment_event_id",
          "description": "Amendment event identifier",
          "category": "Amendments",
          "why_required": "Links to amendment",
          "simplification_note": "Atomic line-item: 1 changed field per amendment.",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true
          }
        },
        {
          "name": "change_seq",
          "description": "Sequence number within amendment",
          "category": "Amendments",
          "why_required": "Ordering",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true
          }
        },
        {
          "name": "change_field_name",
          "description": "Attribute changed (e.g., margin, maturity, commitment)",
          "category": "Amendments",
          "why_required": "Before/after label"
        },
        {
          "name": "old_value",
          "description": "Old value (string)",
          "category": "Amendments",
          "why_required": "Before value in drawer"
        },
        {
          "name": "new_value",
          "description": "New value (string)",
          "category": "Amendments",
          "why_required": "After value in drawer"
        },
        {
          "name": "change_currency_code",
          "description": "Currency code if change is currency-valued",
          "category": "Amendments",
          "why_required": "Context for monetary changes",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "currency_dim",
              "field": "currency_code"
            }
          }
        }
      ]
    },
    {
      "name": "amendment_event",
      "layer": "L2",
      "category": "Amendments",
      "fields": [
        {
          "name": "amendment_event_id",
          "description": "Unique amendment event identifier",
          "category": "Amendments",
          "why_required": "PK",
          "simplification_note": "Atomic amendment lifecycle record from credit workflow system.",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "credit_agreement_id",
          "description": "Credit agreement identifier",
          "category": "Amendments",
          "why_required": "Links to credit agreement",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "credit_agreement_master",
              "field": "credit_agreement_id"
            }
          }
        },
        {
          "name": "facility_id",
          "description": "Facility identifier (nullable)",
          "category": "Amendments",
          "why_required": "Links to specific facility",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "facility_master",
              "field": "facility_id"
            }
          }
        },
        {
          "name": "amendment_type",
          "description": "Amendment type (Commitment Changes / Pricing / Tenor-Maturity / Amortization / Currency)",
          "category": "Amendments",
          "why_required": "Amendment Type grouping (Page 6)"
        },
        {
          "name": "amendment_subtype",
          "description": "Amendment subtype detail (e.g., Increase, Extension, SOFR Transition)",
          "category": "Amendments",
          "why_required": "Expanded row detail"
        },
        {
          "name": "amendment_status",
          "description": "Status (Prospect Identified / In Underwriting / Under Credit Review / Pending Approval / Complete / Rejected)",
          "category": "Amendments",
          "why_required": "Amendment status distribution (Page 6)"
        },
        {
          "name": "counterparty_id",
          "description": "Obligor/counterparty",
          "category": "Amendments",
          "why_required": "Counterparty linkage for drawer",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "identified_date",
          "description": "Date amendment prospect identified",
          "category": "Amendments",
          "why_required": "Amendment aging start"
        },
        {
          "name": "effective_date",
          "description": "Effective date of amendment (nullable)",
          "category": "Amendments",
          "why_required": "Timeline tracking"
        },
        {
          "name": "completed_date",
          "description": "Completion date (nullable)",
          "category": "Amendments",
          "why_required": "Lifecycle completion"
        },
        {
          "name": "amendment_description",
          "description": "Generated description of amendment activity",
          "category": "Amendments",
          "why_required": "Drawer detail text"
        },
        {
          "name": "last_updated_ts",
          "description": "Last update timestamp",
          "category": "Amendments",
          "why_required": "Recency tracking"
        },
        {
          "name": "as_of_date",
          "description": "Snapshot as-of date",
          "category": "Amendments",
          "why_required": "Temporal partitioning",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true
          }
        }
      ]
    },
    {
      "name": "credit_event",
      "layer": "L2",
      "category": "Credit Events",
      "fields": [
        {
          "name": "credit_event_id",
          "description": "Unique credit event identifier",
          "category": "Credit Events",
          "why_required": "PK",
          "simplification_note": "Atomic event record. Aggregated counts/amounts (facility count, exposure impact) computed in L3 from junction table.",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "credit_event_type_code",
          "description": "Credit event type",
          "category": "Credit Events",
          "why_required": "Event type classification",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "credit_event_type_dim",
              "field": "credit_event_type_code"
            }
          }
        },
        {
          "name": "counterparty_id",
          "description": "Impacted counterparty",
          "category": "Credit Events",
          "why_required": "Links event to counterparty",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "event_date",
          "description": "Event effective date",
          "category": "Credit Events",
          "why_required": "Credit Event Date (Page 6)"
        },
        {
          "name": "event_status",
          "description": "Event status (open/closed/reversed)",
          "category": "Credit Events",
          "why_required": "Event lifecycle tracking"
        },
        {
          "name": "event_risk_rating",
          "description": "Risk rating: Critical/High/Moderate/Low",
          "category": "Credit Events",
          "why_required": "Color-coded pill (Page 6)"
        },
        {
          "name": "event_summary",
          "description": "1-2 sentence executive description",
          "category": "Credit Events",
          "why_required": "Summary text (Page 6)"
        },
        {
          "name": "loss_amount_usd",
          "description": "Loss amount in USD (if applicable)",
          "category": "Credit Events",
          "why_required": "Loss tracking"
        },
        {
          "name": "recovery_amount_usd",
          "description": "Recovery amount in USD (if applicable)",
          "category": "Credit Events",
          "why_required": "Recovery tracking"
        },
        {
          "name": "as_of_date",
          "description": "Snapshot as-of date",
          "category": "Credit Events",
          "why_required": "Quarterly filtering",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true
          }
        }
      ]
    },
    {
      "name": "credit_event_facility_link",
      "layer": "L2",
      "category": "Credit Events",
      "fields": [
        {
          "name": "credit_event_id",
          "description": "Credit event identifier",
          "category": "Credit Events",
          "why_required": "Links to credit event",
          "simplification_note": "Atomic junction: 1 event × 1 facility.",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true
          }
        },
        {
          "name": "facility_id",
          "description": "Facility identifier",
          "category": "Credit Events",
          "why_required": "Links to impacted facility",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true,
            "fk_target": {
              "layer": "L1",
              "table": "facility_master",
              "field": "facility_id"
            }
          }
        },
        {
          "name": "impact_pct",
          "description": "Impact percentage (if partial)",
          "category": "Credit Events",
          "why_required": "Partial impact allocation"
        },
        {
          "name": "estimated_loss_usd",
          "description": "Estimated loss for this facility (USD)",
          "category": "Credit Events",
          "why_required": "Facility-level loss from event"
        },
        {
          "name": "as_of_date",
          "description": "Snapshot as-of date",
          "category": "Credit Events",
          "why_required": "Temporal partitioning",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true
          }
        }
      ]
    },
    {
      "name": "stress_test_breach",
      "layer": "L2",
      "category": "Stress Testing",
      "fields": [
        {
          "name": "breach_id",
          "description": "PK — breach within stress test",
          "category": "Stress Testing",
          "why_required": "Primary key",
          "simplification_note": "Individual breach details within a stress test execution. Child of stress_test_result. | L2 review new table",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "stress_test_result_id",
          "description": "FK to stress test result",
          "category": "Stress Testing",
          "why_required": "Parent result",
          "simplification_note": "L2 review new table",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L2",
              "table": "stress_test_result",
              "field": "stress_test_result_id"
            }
          }
        },
        {
          "name": "lob_segment_id",
          "description": "FK to enterprise_business_taxonomy",
          "category": "Stress Testing",
          "why_required": "Breach LoB",
          "simplification_note": "L2 review new table",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "enterprise_business_taxonomy",
              "field": "managed_segment_id"
            }
          }
        },
        {
          "name": "breach_severity",
          "description": "CRITICAL, HIGH, MODERATE, LOW",
          "category": "Stress Testing",
          "why_required": "Severity distribution",
          "simplification_note": "L2 review new table"
        },
        {
          "name": "control_description",
          "description": "Description of failed control",
          "category": "Stress Testing",
          "why_required": "Drawer: Control Description",
          "simplification_note": "L2 review new table"
        },
        {
          "name": "control_owner",
          "description": "Control owner name",
          "category": "Stress Testing",
          "why_required": "Drawer: Control Owner",
          "simplification_note": "L2 review new table"
        },
        {
          "name": "failure_description",
          "description": "Description of exception/failure",
          "category": "Stress Testing",
          "why_required": "Drawer: Exception",
          "simplification_note": "L2 review new table"
        },
        {
          "name": "breach_amount_usd",
          "description": "Dollar amount of breach (USD)",
          "category": "Stress Testing",
          "why_required": "EL by severity",
          "simplification_note": "L2 review new table"
        },
        {
          "name": "as_of_date",
          "description": "Snapshot date",
          "category": "Stress Testing",
          "why_required": "Point-in-time",
          "simplification_note": "L2 review new table",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true
          }
        }
      ]
    },
    {
      "name": "stress_test_result",
      "layer": "L2",
      "category": "Stress Testing",
      "fields": [
        {
          "name": "stress_test_result_id",
          "description": "PK — scenario execution result",
          "category": "Stress Testing",
          "why_required": "Primary key",
          "simplification_note": "Stress test scenario execution results. Links L1 scenario_dim to outcomes. 1 row = 1 scenario × 1 execution date. | L2 review new table",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "scenario_id",
          "description": "FK to scenario_dim",
          "category": "Stress Testing",
          "why_required": "Scenario link",
          "simplification_note": "L2 review new table",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "scenario_dim",
              "field": "scenario_id"
            }
          }
        },
        {
          "name": "execution_date",
          "description": "Date stress test executed",
          "category": "Stress Testing",
          "why_required": "Historical tracking",
          "simplification_note": "L2 review new table"
        },
        {
          "name": "scenario_type",
          "description": "REGULATORY_BASELINE, REGULATORY_ADVERSE, INTERNAL_IDIOSYNCRATIC, etc.",
          "category": "Stress Testing",
          "why_required": "Page 5 type column",
          "simplification_note": "L2 review new table"
        },
        {
          "name": "total_exposure_usd",
          "description": "Total exposure under scenario (USD)",
          "category": "Stress Testing",
          "why_required": "Page 5 Exposure",
          "simplification_note": "L2 review new table"
        },
        {
          "name": "expected_loss_usd",
          "description": "Expected loss under scenario (USD)",
          "category": "Stress Testing",
          "why_required": "Page 5 Expected Loss",
          "simplification_note": "L2 review new table"
        },
        {
          "name": "capital_impact_pct",
          "description": "Capital impact as % of Tier 1",
          "category": "Stress Testing",
          "why_required": "Page 5 Capital Impact",
          "simplification_note": "L2 review new table"
        },
        {
          "name": "total_breaches",
          "description": "Count of threshold breaches",
          "category": "Stress Testing",
          "why_required": "Page 5 Breaches",
          "simplification_note": "L2 review new table"
        },
        {
          "name": "result_status",
          "description": "PASS, WARNING, FAIL",
          "category": "Stress Testing",
          "why_required": "Page 5 Result Status pill",
          "simplification_note": "L2 review new table"
        },
        {
          "name": "result_description",
          "description": "Executive summary of outcome",
          "category": "Stress Testing",
          "why_required": "Results Drawer",
          "simplification_note": "L2 review new table"
        },
        {
          "name": "as_of_date",
          "description": "Reporting date",
          "category": "Stress Testing",
          "why_required": "Snapshot",
          "simplification_note": "L2 review new table",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true
          }
        }
      ]
    },
    {
      "name": "deal_pipeline_fact",
      "layer": "L2",
      "category": "Deal Pipeline",
      "fields": [
        {
          "name": "pipeline_deal_id",
          "description": "Unique pipeline deal identifier",
          "category": "Deal Pipeline",
          "why_required": "PK",
          "simplification_note": "Atomic pipeline deal snapshot from CRM/origination system.",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "counterparty_id",
          "description": "Counterparty identifier",
          "category": "Deal Pipeline",
          "why_required": "Links to counterparty",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "facility_id",
          "description": "Facility identifier (nullable for new deals)",
          "category": "Deal Pipeline",
          "why_required": "Links to existing facility",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "facility_master",
              "field": "facility_id"
            }
          }
        },
        {
          "name": "lob_segment_id",
          "description": "FK to enterprise_business_taxonomy — LoB node for pipeline deal (replaces inline lob_l1/l2)",
          "category": "Deal Pipeline",
          "why_required": "LoB grouping",
          "simplification_note": "CHANGED: lob_l1_name → lob_segment_id FK",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "enterprise_business_taxonomy",
              "field": "managed_segment_id"
            }
          }
        },
        {
          "name": "pipeline_stage",
          "description": "Pipeline stage (Origination / Credit Review / Approval / Closing / Funded)",
          "category": "Deal Pipeline",
          "why_required": "Stage grouping"
        },
        {
          "name": "pipeline_status",
          "description": "Status (OPEN/CLOSED_WON/CLOSED_LOST)",
          "category": "Deal Pipeline",
          "why_required": "Pipeline filtering"
        },
        {
          "name": "record_level_code",
          "description": "Record level: FACILITY or COUNTERPARTY",
          "category": "Deal Pipeline",
          "why_required": "Toggle view"
        },
        {
          "name": "expected_close_date",
          "description": "Expected close date",
          "category": "Deal Pipeline",
          "why_required": "Pipeline timeline"
        },
        {
          "name": "expected_tenor_months",
          "description": "Expected tenor in months",
          "category": "Deal Pipeline",
          "why_required": "Deal tenor analysis"
        },
        {
          "name": "currency_code",
          "description": "Deal currency code",
          "category": "Deal Pipeline",
          "why_required": "FX context",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "currency_dim",
              "field": "currency_code"
            }
          }
        },
        {
          "name": "expected_exposure_amt",
          "description": "Expected exposure (USD)",
          "category": "Deal Pipeline",
          "why_required": "Exposure sizing"
        },
        {
          "name": "expected_committed_amt",
          "description": "Expected committed amount (USD)",
          "category": "Deal Pipeline",
          "why_required": "Commitment sizing"
        },
        {
          "name": "expected_coverage_ratio",
          "description": "Expected coverage ratio",
          "category": "Deal Pipeline",
          "why_required": "Risk assessment"
        },
        {
          "name": "expected_spread_bps",
          "description": "Expected spread (bps)",
          "category": "Deal Pipeline",
          "why_required": "Pricing assessment"
        },
        {
          "name": "expected_all_in_rate_pct",
          "description": "Expected all-in rate (%)",
          "category": "Deal Pipeline",
          "why_required": "Pricing assessment"
        },
        {
          "name": "expected_internal_risk_grade",
          "description": "Expected internal risk rating",
          "category": "Deal Pipeline",
          "why_required": "Risk assessment"
        },
        {
          "name": "as_of_date",
          "description": "Snapshot as-of date",
          "category": "Deal Pipeline",
          "why_required": "Pipeline snapshot history",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true
          }
        }
      ]
    },
    {
      "name": "counterparty_rating_observation",
      "layer": "L2",
      "category": "Ratings",
      "fields": [
        {
          "name": "observation_id",
          "description": "Unique rating observation identifier",
          "category": "Ratings",
          "why_required": "PK",
          "simplification_note": "Simplified. Each row = 1 rating observation from 1 agency for 1 counterparty.",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "counterparty_id",
          "description": "Counterparty identifier",
          "category": "Ratings",
          "why_required": "Links to counterparty",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "rating_type",
          "description": "INTERNAL or EXTERNAL — high-level classification of rating source",
          "category": "Ratings",
          "why_required": "Drives Risk Rating Toggle; can also be derived from rating_scale_dim.scale_type but kept for direct filtering",
          "simplification_note": "UPDATED: Retained for convenience filtering alongside rating_grade_id FK."
        },
        {
          "name": "rating_agency",
          "description": "Rating agency name (S&P/Moody's/Fitch or Internal)",
          "category": "Ratings",
          "why_required": "Source attribution"
        },
        {
          "name": "rating_value",
          "description": "Rating value label (e.g., \"AA\", \"3\") — RETAINED for source-system traceability but rating_grade_id FK is the governed reference",
          "category": "Ratings",
          "why_required": "Source-system rating value as ingested; use rating_grade_id for standardized analytics",
          "simplification_note": "UPDATED: Supplementary to rating_grade_id FK. Use FK for joins/analytics."
        },
        {
          "name": "rating_date",
          "description": "Rating effective date",
          "category": "Ratings",
          "why_required": "Migration tracking"
        },
        {
          "name": "prior_rating_value",
          "description": "Previous rating value (source-system look-back)",
          "category": "Ratings",
          "why_required": "MUST BE SOURCE SYSTEM INPUT — Previous rating value stamped by rating observation system at time of rating action. Source system lookback, not a cross-row derivation.",
          "simplification_note": "SOURCE SYSTEM REQUIRED."
        },
        {
          "name": "pd_implied",
          "description": "PD implied by rating (if available)",
          "category": "Ratings",
          "why_required": "MUST BE SOURCE SYSTEM INPUT — PD implied by external rating from rating agency mapping tables (e.g., S&P transition matrices). Requires agency-specific calibration.",
          "simplification_note": "SOURCE SYSTEM REQUIRED."
        },
        {
          "name": "as_of_date",
          "description": "Snapshot as-of date",
          "category": "Ratings",
          "why_required": "12-month history",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true
          }
        },
        {
          "name": "rating_grade_id",
          "description": "FK to rating_scale_dim — maps this observation to the canonical rating grade with standardized rating_notch for cross-scale comparison",
          "category": "Ratings",
          "why_required": "Core linkage for standardized rating analytics: crosswalk between internal and external scales, migration tracking via rating_notch delta, color coding, IG/non-IG segmentation",
          "simplification_note": "NEW: Enables standardized rating comparison via rating_notch join.",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "rating_scale_dim",
              "field": "rating_grade_id"
            }
          }
        }
      ]
    },
    {
      "name": "financial_metric_observation",
      "layer": "L2",
      "category": "Metrics",
      "fields": [
        {
          "name": "observation_id",
          "description": "Unique metric observation identifier",
          "category": "Metrics",
          "why_required": "PK",
          "simplification_note": "Actual metric measurements per entity per date. Stores the observed VALUE. Thresholds for comparison are in metric_threshold. | Atomic metric measurement per entity per date. Generic store for scorecard and regulatory metrics.",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "metric_code",
          "description": "Metric code (e.g., LARGE_EXPOSURE_LIMIT, TIER1_CAPITAL_RATIO)",
          "category": "Metrics",
          "why_required": "Metric identification"
        },
        {
          "name": "metric_name",
          "description": "Human-readable metric name",
          "category": "Metrics",
          "why_required": "Display name in scorecard"
        },
        {
          "name": "metric_category",
          "description": "Category (Regulatory / Internal / FED Benchmark / Industry Benchmark)",
          "category": "Metrics",
          "why_required": "Metric Type classification"
        },
        {
          "name": "counterparty_id",
          "description": "Counterparty identifier (nullable)",
          "category": "Metrics",
          "why_required": "Counterparty-level metric",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "facility_id",
          "description": "Facility identifier (nullable)",
          "category": "Metrics",
          "why_required": "Facility-level metric",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "facility_master",
              "field": "facility_id"
            }
          }
        },
        {
          "name": "credit_agreement_id",
          "description": "Credit agreement identifier (nullable)",
          "category": "Metrics",
          "why_required": "Agreement-level metric",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "credit_agreement_master",
              "field": "credit_agreement_id"
            }
          }
        },
        {
          "name": "metric_value",
          "description": "Metric value in native unit",
          "category": "Metrics",
          "why_required": "Current Value in scorecard"
        },
        {
          "name": "metric_value_usd",
          "description": "Metric value in USD (if applicable)",
          "category": "Metrics",
          "why_required": "Standardized value"
        },
        {
          "name": "period_end_date",
          "description": "Measurement period end date",
          "category": "Metrics",
          "why_required": "Temporal alignment"
        },
        {
          "name": "as_of_date",
          "description": "Snapshot as-of date",
          "category": "Metrics",
          "why_required": "12-month trend",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true
          }
        }
      ]
    },
    {
      "name": "metric_threshold",
      "layer": "L2",
      "category": "Metrics",
      "fields": [
        {
          "name": "metric_threshold_id",
          "description": "Surrogate identifier",
          "category": "Metrics",
          "why_required": "PK",
          "simplification_note": "Portfolio-level KRI threshold definitions (Tier 1 Capital Ratio, Large Exposure Limit %). Different scope from L1 limit_threshold which defines entity-level limit bands. | Reference/config: threshold definitions, governance attributes for scorecard and Metric Details Drawer.",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "metric_code",
          "description": "Metric code (joins to financial_metric_observation)",
          "category": "Metrics",
          "why_required": "Links to metric observations"
        },
        {
          "name": "metric_name",
          "description": "Human-readable metric name",
          "category": "Metrics",
          "why_required": "Scorecard display name"
        },
        {
          "name": "metric_id_display",
          "description": "Display metric ID (e.g., CRA-001)",
          "category": "Metrics",
          "why_required": "Metric ID on scorecard"
        },
        {
          "name": "metric_description",
          "description": "Detailed description of metric",
          "category": "Metrics",
          "why_required": "Metric Details Drawer description"
        },
        {
          "name": "metric_category",
          "description": "Classification (Regulatory / Internal / FED Benchmark / Industry Benchmark)",
          "category": "Metrics",
          "why_required": "Metric Type tag"
        },
        {
          "name": "limit_type",
          "description": "CEILING or FLOOR",
          "category": "Metrics",
          "why_required": "Determines breach direction"
        },
        {
          "name": "limit_value",
          "description": "Limit/threshold value",
          "category": "Metrics",
          "why_required": "Limit column in scorecard"
        },
        {
          "name": "inner_threshold_pct",
          "description": "Warning threshold (% of limit)",
          "category": "Metrics",
          "why_required": "Approaching Limit trigger"
        },
        {
          "name": "outer_threshold_pct",
          "description": "Breach threshold (% of limit)",
          "category": "Metrics",
          "why_required": "Breach trigger"
        },
        {
          "name": "report_frequency",
          "description": "Reporting frequency (Monthly/Quarterly)",
          "category": "Metrics",
          "why_required": "Metric Details Drawer"
        },
        {
          "name": "report_deadline",
          "description": "Report deadline description",
          "category": "Metrics",
          "why_required": "Metric Details Drawer"
        },
        {
          "name": "metric_owner",
          "description": "Metric owner name",
          "category": "Metrics",
          "why_required": "Governance attribute"
        },
        {
          "name": "lod1_sponsor",
          "description": "1LoD sponsor name",
          "category": "Metrics",
          "why_required": "Governance attribute"
        },
        {
          "name": "lod2_sponsor",
          "description": "2LoD sponsor name",
          "category": "Metrics",
          "why_required": "Governance attribute"
        },
        {
          "name": "last_threshold_updated_date",
          "description": "Date thresholds were last updated",
          "category": "Metrics",
          "why_required": "Governance attribute"
        },
        {
          "name": "active_flag",
          "description": "Active indicator",
          "category": "Metrics",
          "why_required": "Filter active metrics"
        }
      ]
    },
    {
      "name": "exception_event",
      "layer": "L2",
      "category": "Exceptions",
      "fields": [
        {
          "name": "exception_id",
          "description": "PK — unique exception record",
          "category": "Exceptions",
          "why_required": "Core PK for exception tracking",
          "simplification_note": "L2 exception lifecycle events (breaches, waivers, overrides). Different from L1 exception_rule which defines standing exception rules. This is the EVENT record when an exception occurs. | NEW table. Mirrors limit structure with severity, lifecycle, and governance attributes.",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "exception_type",
          "description": "Type of exception: LIMIT_BREACH, COVENANT_WAIVER, POLICY_OVERRIDE, THRESHOLD_EXCEEDANCE, DOCUMENTATION_GAP",
          "category": "Exceptions",
          "why_required": "Classifies the nature of the exception for reporting"
        },
        {
          "name": "exception_status",
          "description": "Status: OPEN, UNDER_REVIEW, APPROVED, REMEDIATED, EXPIRED",
          "category": "Exceptions",
          "why_required": "Tracks lifecycle of the exception"
        },
        {
          "name": "limit_rule_id",
          "description": "FK to limit_rule if exception relates to a limit breach",
          "category": "Exceptions",
          "why_required": "Links exception to the breached limit",
          "simplification_note": "FK renamed: limit_definition → limit_rule",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "limit_rule",
              "field": "limit_rule_id"
            }
          }
        },
        {
          "name": "metric_threshold_id",
          "description": "FK to metric_threshold if exception relates to a metric threshold breach",
          "category": "Exceptions",
          "why_required": "Links exception to the breached metric threshold",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L2",
              "table": "metric_threshold",
              "field": "metric_threshold_id"
            }
          }
        },
        {
          "name": "facility_id",
          "description": "FK to facility_master — the facility involved in the exception",
          "category": "Exceptions",
          "why_required": "Links exception to impacted facility",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "facility_master",
              "field": "facility_id"
            }
          }
        },
        {
          "name": "counterparty_id",
          "description": "FK to counterparty — the counterparty involved",
          "category": "Exceptions",
          "why_required": "Links exception to impacted counterparty",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "lob_segment_id",
          "description": "FK to enterprise_business_taxonomy — LoB segment where exception occurred",
          "category": "Exceptions",
          "why_required": "Links exception to business hierarchy",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "enterprise_business_taxonomy",
              "field": "managed_segment_id"
            }
          }
        },
        {
          "name": "exception_value",
          "description": "The observed value that triggered the exception",
          "category": "Exceptions",
          "why_required": "Captures the metric/limit value at time of exception"
        },
        {
          "name": "threshold_value",
          "description": "The threshold or limit value that was breached",
          "category": "Exceptions",
          "why_required": "Reference point for severity calculation"
        },
        {
          "name": "breach_amount_usd",
          "description": "Dollar amount of the breach (value minus threshold)",
          "category": "Exceptions",
          "why_required": "Quantifies exposure impact of the exception"
        },
        {
          "name": "breach_pct",
          "description": "Percentage overage/underage relative to the threshold",
          "category": "Exceptions",
          "why_required": "Normalised severity for comparison across exceptions"
        },
        {
          "name": "exception_severity",
          "description": "Severity: LOW, MODERATE, HIGH, CRITICAL",
          "category": "Exceptions",
          "why_required": "Risk-based prioritization of exceptions"
        },
        {
          "name": "identified_date",
          "description": "Date exception was first identified",
          "category": "Exceptions",
          "why_required": "Start of exception lifecycle"
        },
        {
          "name": "target_remediation_date",
          "description": "Expected date for remediation or resolution",
          "category": "Exceptions",
          "why_required": "Governance SLA tracking"
        },
        {
          "name": "actual_remediation_date",
          "description": "Date exception was actually remediated (null if open)",
          "category": "Exceptions",
          "why_required": "Closure tracking"
        },
        {
          "name": "exception_owner",
          "description": "Name or ID of the person responsible for resolving",
          "category": "Exceptions",
          "why_required": "Accountability tracking"
        },
        {
          "name": "approver",
          "description": "Name or ID of the approver (for approved exceptions)",
          "category": "Exceptions",
          "why_required": "Governance sign-off trail"
        },
        {
          "name": "lod_sponsor",
          "description": "1LoD or 2LoD sponsor for escalated exceptions",
          "category": "Exceptions",
          "why_required": "Line of defense governance"
        },
        {
          "name": "exception_description",
          "description": "Free-text description of the exception event",
          "category": "Exceptions",
          "why_required": "Context for reviewers and auditors"
        },
        {
          "name": "remediation_plan",
          "description": "Description of planned remediation steps",
          "category": "Exceptions",
          "why_required": "Action tracking"
        },
        {
          "name": "days_open",
          "description": "Calculated: days from identified_date to today (or actual_remediation_date)",
          "category": "Exceptions",
          "why_required": "Aging metric for exception management"
        },
        {
          "name": "as_of_date",
          "description": "Snapshot date",
          "category": "Exceptions",
          "why_required": "Temporal partitioning",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true
          }
        }
      ]
    },
    {
      "name": "risk_flag",
      "layer": "L2",
      "category": "Risk Monitoring",
      "fields": [
        {
          "name": "risk_flag_id",
          "description": "Surrogate identifier",
          "category": "Risk Monitoring",
          "why_required": "PK",
          "simplification_note": "Consolidated flag observations (DETERIORATED, WATCH_LIST, COVENANT_BREACH, etc.). 1 row = 1 flag × 1 entity × 1 date. | CONSOLIDATED from 2 flag tables. Each row = 1 flag observation for 1 entity.",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "flag_scope",
          "description": "Scope: FACILITY or COUNTERPARTY",
          "category": "Risk Monitoring",
          "why_required": "Determines anchor type"
        },
        {
          "name": "facility_id",
          "description": "Facility identifier (nullable)",
          "category": "Risk Monitoring",
          "why_required": "Links to facility",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "facility_master",
              "field": "facility_id"
            }
          }
        },
        {
          "name": "counterparty_id",
          "description": "Counterparty identifier (nullable)",
          "category": "Risk Monitoring",
          "why_required": "Links to counterparty",
          "pk_fk": {
            "is_pk": false,
            "is_composite": false,
            "fk_target": {
              "layer": "L1",
              "table": "counterparty",
              "field": "counterparty_id"
            }
          }
        },
        {
          "name": "flag_code",
          "description": "Flag code (DETERIORATED, WATCH_LIST, COVENANT_BREACH, BELOW_THRESHOLD_SPREAD, CRITICIZED)",
          "category": "Risk Monitoring",
          "why_required": "Flag classification"
        },
        {
          "name": "flag_severity",
          "description": "Severity (LOW/MEDIUM/HIGH/CRITICAL)",
          "category": "Risk Monitoring",
          "why_required": "Priority sorting"
        },
        {
          "name": "flag_description",
          "description": "Human-readable description",
          "category": "Risk Monitoring",
          "why_required": "Alert card text"
        },
        {
          "name": "flag_trigger_value",
          "description": "Trigger value (e.g., DPD count, spread vs threshold)",
          "category": "Risk Monitoring",
          "why_required": "Quantified trigger"
        },
        {
          "name": "as_of_date",
          "description": "Snapshot as-of date",
          "category": "Risk Monitoring",
          "why_required": "12-month flag history",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true
          }
        },
        {
          "name": "created_ts",
          "description": "Flag creation timestamp",
          "category": "Risk Monitoring",
          "why_required": "Recency tracking"
        }
      ]
    },
    {
      "name": "data_quality_score_snapshot",
      "layer": "L2",
      "category": "Data Quality",
      "fields": [
        {
          "name": "dq_score_id",
          "description": "PK — DQ score observation",
          "category": "Data Quality",
          "why_required": "Primary key",
          "simplification_note": "L2 review new table",
          "pk_fk": {
            "is_pk": true,
            "is_composite": false
          }
        },
        {
          "name": "score_dimension",
          "description": "LOB, LEGAL_ENTITY, ATTRIBUTE, REGULATORY_REPORT, OVERALL",
          "category": "Data Quality",
          "why_required": "Routes to Page 4 visual",
          "simplification_note": "L2 review new table"
        },
        {
          "name": "dimension_id",
          "description": "FK to scored entity (polymorphic)",
          "category": "Data Quality",
          "why_required": "Target entity",
          "simplification_note": "L2 review new table"
        },
        {
          "name": "dimension_name",
          "description": "Human-readable name",
          "category": "Data Quality",
          "why_required": "UI display",
          "simplification_note": "L2 review new table"
        },
        {
          "name": "dq_score_pct",
          "description": "Data quality score 0-100%",
          "category": "Data Quality",
          "why_required": "Capsule bars, KPI",
          "simplification_note": "L2 review new table"
        },
        {
          "name": "issue_count",
          "description": "Count of DQ issues",
          "category": "Data Quality",
          "why_required": "Attribute card",
          "simplification_note": "L2 review new table"
        },
        {
          "name": "reconciliation_break_count",
          "description": "Count of recon breaks",
          "category": "Data Quality",
          "why_required": "KPI: Recon Breaks",
          "simplification_note": "L2 review new table"
        },
        {
          "name": "impacted_report_codes",
          "description": "Comma-separated impacted report codes",
          "category": "Data Quality",
          "why_required": "Attribute card: tags",
          "simplification_note": "L2 review new table"
        },
        {
          "name": "impact_pct",
          "description": "Contribution to DQ score degradation %",
          "category": "Data Quality",
          "why_required": "Attribute card: % Impact",
          "simplification_note": "L2 review new table"
        },
        {
          "name": "as_of_date",
          "description": "Snapshot date (month-end)",
          "category": "Data Quality",
          "why_required": "DQ Trend chart",
          "simplification_note": "L2 review new table",
          "pk_fk": {
            "is_pk": true,
            "is_composite": true
          }
        }
      ]
    }
  ],
  "L3": [],
  "relationships": [
    {
      "from_table": "control_relationship",
      "from_field": "controlled_counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "control_relationship",
      "from_field": "controller_counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "control_relationship",
      "from_field": "source_system_id",
      "to_table": "source_system_registry",
      "to_field": "source_system_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "counterparty",
      "from_field": "country_code",
      "to_table": "country_dim",
      "to_field": "country_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "counterparty",
      "from_field": "country_of_domicile",
      "to_table": "country_dim",
      "to_field": "country_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "counterparty",
      "from_field": "country_of_incorporation",
      "to_table": "country_dim",
      "to_field": "country_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "counterparty",
      "from_field": "country_of_risk",
      "to_table": "country_dim",
      "to_field": "country_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "counterparty",
      "from_field": "entity_type_code",
      "to_table": "entity_type_dim",
      "to_field": "entity_type_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "counterparty",
      "from_field": "industry_id",
      "to_table": "industry_dim",
      "to_field": "industry_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "counterparty_hierarchy",
      "from_field": "as_of_date",
      "to_table": "date_dim",
      "to_field": "calendar_date",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "counterparty_hierarchy",
      "from_field": "counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "counterparty_hierarchy",
      "from_field": "immediate_parent_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "counterparty_hierarchy",
      "from_field": "ultimate_parent_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "economic_interdependence_relationship",
      "from_field": "counterparty_id_1",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "economic_interdependence_relationship",
      "from_field": "counterparty_id_2",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "economic_interdependence_relationship",
      "from_field": "source_system_id",
      "to_table": "source_system_registry",
      "to_field": "source_system_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "credit_agreement_counterparty_participation",
      "from_field": "credit_agreement_id",
      "to_table": "credit_agreement_master",
      "to_field": "credit_agreement_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "credit_agreement_counterparty_participation",
      "from_field": "counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "credit_agreement_counterparty_participation",
      "from_field": "counterparty_role_code",
      "to_table": "counterparty_role_dim",
      "to_field": "counterparty_role_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "facility_counterparty_participation",
      "from_field": "facility_id",
      "to_table": "facility_master",
      "to_field": "facility_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "facility_counterparty_participation",
      "from_field": "counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "facility_counterparty_participation",
      "from_field": "counterparty_role_code",
      "to_table": "counterparty_role_dim",
      "to_field": "counterparty_role_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "sccl_counterparty_group",
      "from_field": "as_of_date",
      "to_table": "date_dim",
      "to_field": "calendar_date",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "sccl_counterparty_group",
      "from_field": "jurisdiction_code",
      "to_table": "regulatory_jurisdiction",
      "to_field": "jurisdiction_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "sccl_counterparty_group",
      "from_field": "run_version_id",
      "to_table": "run_control",
      "to_field": "run_version_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "sccl_counterparty_group",
      "from_field": "ultimate_parent_counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "sccl_counterparty_group_member",
      "from_field": "counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "sccl_counterparty_group_member",
      "from_field": "sccl_group_id",
      "to_table": "sccl_counterparty_group",
      "to_field": "sccl_group_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "sccl_counterparty_group_member",
      "from_field": "source_system_id",
      "to_table": "source_system_registry",
      "to_field": "source_system_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "credit_agreement_master",
      "from_field": "borrower_counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "credit_agreement_master",
      "from_field": "currency_code",
      "to_table": "currency_dim",
      "to_field": "currency_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "credit_agreement_master",
      "from_field": "lender_legal_entity_id",
      "to_table": "legal_entity",
      "to_field": "legal_entity_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "credit_agreement_master",
      "from_field": "maturity_date",
      "to_table": "date_dim",
      "to_field": "calendar_date",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "credit_agreement_master",
      "from_field": "origination_date",
      "to_table": "date_dim",
      "to_field": "calendar_date",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "facility_master",
      "from_field": "counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "facility_master",
      "from_field": "currency_code",
      "to_table": "currency_dim",
      "to_field": "currency_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "facility_master",
      "from_field": "industry_code",
      "to_table": "industry_dim",
      "to_field": "industry_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "facility_master",
      "from_field": "lob_segment_id",
      "to_table": "enterprise_business_taxonomy",
      "to_field": "managed_segment_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "facility_master",
      "from_field": "product_node_id",
      "to_table": "enterprise_product_taxonomy",
      "to_field": "product_node_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "facility_master",
      "from_field": "portfolio_id",
      "to_table": "portfolio_dim",
      "to_field": "portfolio_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "facility_master",
      "from_field": "rate_index_id",
      "to_table": "interest_rate_index_dim",
      "to_field": "rate_index_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "facility_master",
      "from_field": "ledger_account_id",
      "to_table": "ledger_account_dim",
      "to_field": "ledger_account_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "contract_master",
      "from_field": "facility_id",
      "to_table": "facility_master",
      "to_field": "facility_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "contract_master",
      "from_field": "instrument_id",
      "to_table": "instrument_master",
      "to_field": "instrument_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "contract_master",
      "from_field": "netting_set_id",
      "to_table": "netting_set",
      "to_field": "netting_set_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "contract_master",
      "from_field": "counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "contract_master",
      "from_field": "legal_entity_id",
      "to_table": "legal_entity",
      "to_field": "legal_entity_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "instrument_identifier",
      "from_field": "instrument_id",
      "to_table": "instrument_master",
      "to_field": "instrument_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "instrument_identifier",
      "from_field": "source_system_id",
      "to_table": "source_system_registry",
      "to_field": "source_system_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "instrument_master",
      "from_field": "country_code",
      "to_table": "country_dim",
      "to_field": "country_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "instrument_master",
      "from_field": "currency_code",
      "to_table": "currency_dim",
      "to_field": "currency_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "instrument_master",
      "from_field": "issuer_counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "collateral_asset_master",
      "from_field": "collateral_type_id",
      "to_table": "collateral_type",
      "to_field": "collateral_type_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "collateral_asset_master",
      "from_field": "counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "collateral_asset_master",
      "from_field": "country_code",
      "to_table": "country_dim",
      "to_field": "country_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "collateral_asset_master",
      "from_field": "currency_code",
      "to_table": "currency_dim",
      "to_field": "currency_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "collateral_asset_master",
      "from_field": "legal_entity_id",
      "to_table": "legal_entity",
      "to_field": "legal_entity_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "collateral_asset_master",
      "from_field": "valuation_currency_code",
      "to_table": "currency_dim",
      "to_field": "currency_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "collateral_asset_master",
      "from_field": "location_country_code",
      "to_table": "country_dim",
      "to_field": "country_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "collateral_eligibility_dim",
      "from_field": "collateral_type_id",
      "to_table": "collateral_type",
      "to_field": "collateral_type_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "collateral_eligibility_dim",
      "from_field": "jurisdiction_code",
      "to_table": "regulatory_jurisdiction",
      "to_field": "jurisdiction_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "collateral_eligibility_dim",
      "from_field": "regulatory_capital_basis_id",
      "to_table": "regulatory_capital_basis_dim",
      "to_field": "regulatory_capital_basis_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "collateral_haircut_dim",
      "from_field": "collateral_type_id",
      "to_table": "collateral_type",
      "to_field": "collateral_type_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "collateral_haircut_dim",
      "from_field": "jurisdiction_code",
      "to_table": "regulatory_jurisdiction",
      "to_field": "jurisdiction_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "collateral_haircut_dim",
      "from_field": "maturity_bucket_id",
      "to_table": "maturity_bucket_dim",
      "to_field": "maturity_bucket_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "collateral_haircut_dim",
      "from_field": "regulatory_capital_basis_id",
      "to_table": "regulatory_capital_basis_dim",
      "to_field": "regulatory_capital_basis_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "collateral_link",
      "from_field": "collateral_asset_id",
      "to_table": "collateral_asset_master",
      "to_field": "collateral_asset_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "collateral_link",
      "from_field": "pledged_currency_code",
      "to_table": "currency_dim",
      "to_field": "currency_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "collateral_link",
      "from_field": "source_system_id",
      "to_table": "source_system_registry",
      "to_field": "source_system_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "crm_eligibility_dim",
      "from_field": "crm_type_code",
      "to_table": "crm_type_dim",
      "to_field": "crm_type_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "crm_eligibility_dim",
      "from_field": "jurisdiction_code",
      "to_table": "regulatory_jurisdiction",
      "to_field": "jurisdiction_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "crm_eligibility_dim",
      "from_field": "regulatory_capital_basis_id",
      "to_table": "regulatory_capital_basis_dim",
      "to_field": "regulatory_capital_basis_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "crm_eligibility_dim",
      "from_field": "source_system_id",
      "to_table": "source_system_registry",
      "to_field": "source_system_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "crm_protection_master",
      "from_field": "beneficiary_legal_entity_id",
      "to_table": "legal_entity",
      "to_field": "legal_entity_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "crm_protection_master",
      "from_field": "crm_type_code",
      "to_table": "crm_type_dim",
      "to_field": "crm_type_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "crm_protection_master",
      "from_field": "currency_code",
      "to_table": "currency_dim",
      "to_field": "currency_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "crm_protection_master",
      "from_field": "maturity_date",
      "to_table": "date_dim",
      "to_field": "calendar_date",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "crm_protection_master",
      "from_field": "protection_provider_counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "protection_link",
      "from_field": "allocated_currency_code",
      "to_table": "currency_dim",
      "to_field": "currency_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "protection_link",
      "from_field": "protection_id",
      "to_table": "crm_protection_master",
      "to_field": "protection_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "protection_link",
      "from_field": "source_system_id",
      "to_table": "source_system_registry",
      "to_field": "source_system_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "risk_mitigant_link",
      "from_field": "risk_mitigant_id",
      "to_table": "risk_mitigant_master",
      "to_field": "risk_mitigant_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "risk_mitigant_link",
      "from_field": "source_system_id",
      "to_table": "source_system_registry",
      "to_field": "source_system_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "risk_mitigant_master",
      "from_field": "risk_mitigant_subtype_code",
      "to_table": "risk_mitigant_type_dim",
      "to_field": "risk_mitigant_subtype_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "risk_mitigant_master",
      "from_field": "collateral_asset_id",
      "to_table": "collateral_asset_master",
      "to_field": "collateral_asset_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "risk_mitigant_master",
      "from_field": "protection_id",
      "to_table": "crm_protection_master",
      "to_field": "protection_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "risk_mitigant_master",
      "from_field": "provider_counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "risk_mitigant_master",
      "from_field": "source_system_id",
      "to_table": "source_system_registry",
      "to_field": "source_system_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "risk_mitigant_type_dim",
      "from_field": "source_system_id",
      "to_table": "source_system_registry",
      "to_field": "source_system_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "csa_master",
      "from_field": "currency_code",
      "to_table": "currency_dim",
      "to_field": "currency_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "csa_master",
      "from_field": "netting_set_id",
      "to_table": "netting_set",
      "to_field": "netting_set_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "margin_agreement",
      "from_field": "as_of_date",
      "to_table": "date_dim",
      "to_field": "calendar_date",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "margin_agreement",
      "from_field": "csa_id",
      "to_table": "csa_master",
      "to_field": "csa_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "margin_agreement",
      "from_field": "currency_code",
      "to_table": "currency_dim",
      "to_field": "currency_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "margin_agreement",
      "from_field": "netting_set_id",
      "to_table": "netting_set",
      "to_field": "netting_set_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "margin_agreement",
      "from_field": "source_system_id",
      "to_table": "source_system_registry",
      "to_field": "source_system_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "netting_agreement",
      "from_field": "counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "netting_agreement",
      "from_field": "legal_entity_id",
      "to_table": "legal_entity",
      "to_field": "legal_entity_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "netting_agreement",
      "from_field": "source_system_id",
      "to_table": "source_system_registry",
      "to_field": "source_system_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "netting_set",
      "from_field": "counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "netting_set",
      "from_field": "legal_entity_id",
      "to_table": "legal_entity",
      "to_field": "legal_entity_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "netting_set_link",
      "from_field": "netting_set_id",
      "to_table": "netting_set",
      "to_field": "netting_set_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "netting_set_link",
      "from_field": "source_system_id",
      "to_table": "source_system_registry",
      "to_field": "source_system_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "limit_rule",
      "from_field": "counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "limit_rule",
      "from_field": "lob_segment_id",
      "to_table": "enterprise_business_taxonomy",
      "to_field": "managed_segment_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "limit_threshold",
      "from_field": "limit_rule_id",
      "to_table": "limit_rule",
      "to_field": "limit_rule_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "legal_entity",
      "from_field": "country_code",
      "to_table": "country_dim",
      "to_field": "country_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "legal_entity",
      "from_field": "entity_type_code",
      "to_table": "entity_type_dim",
      "to_field": "entity_type_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "legal_entity",
      "from_field": "functional_currency_code",
      "to_table": "currency_dim",
      "to_field": "currency_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "legal_entity_hierarchy",
      "from_field": "as_of_date",
      "to_table": "date_dim",
      "to_field": "calendar_date",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "legal_entity_hierarchy",
      "from_field": "legal_entity_id",
      "to_table": "legal_entity",
      "to_field": "legal_entity_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "legal_entity_hierarchy",
      "from_field": "parent_legal_entity_id",
      "to_table": "legal_entity",
      "to_field": "legal_entity_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "legal_entity_hierarchy",
      "from_field": "ultimate_parent_legal_entity_id",
      "to_table": "legal_entity",
      "to_field": "legal_entity_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "reporting_entity_dim",
      "from_field": "functional_currency_code",
      "to_table": "currency_dim",
      "to_field": "currency_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "reporting_entity_dim",
      "from_field": "jurisdiction_code",
      "to_table": "regulatory_jurisdiction",
      "to_field": "jurisdiction_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "reporting_entity_dim",
      "from_field": "legal_entity_id",
      "to_table": "legal_entity",
      "to_field": "legal_entity_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "org_unit_dim",
      "from_field": "parent_org_unit_id",
      "to_table": "org_unit_dim",
      "to_field": "org_unit_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "org_unit_dim",
      "from_field": "source_system_id",
      "to_table": "source_system_registry",
      "to_field": "source_system_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "org_unit_dim",
      "from_field": "lob_segment_id",
      "to_table": "enterprise_business_taxonomy",
      "to_field": "managed_segment_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "enterprise_business_taxonomy",
      "from_field": "parent",
      "to_table": "enterprise_business_taxonomy",
      "to_field": "managed_segment_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "enterprise_product_taxonomy",
      "from_field": "parent",
      "to_table": "enterprise_product_taxonomy",
      "to_field": "product_node_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "enterprise_product_taxonomy",
      "from_field": "fr2590_category_code",
      "to_table": "fr2590_category_dim",
      "to_field": "fr2590_category_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "collateral_portfolio",
      "from_field": "portfolio_id",
      "to_table": "portfolio_dim",
      "to_field": "portfolio_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "collateral_portfolio",
      "from_field": "lob_segment_id",
      "to_table": "enterprise_business_taxonomy",
      "to_field": "managed_segment_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "portfolio_dim",
      "from_field": "parent_portfolio_id",
      "to_table": "portfolio_dim",
      "to_field": "portfolio_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "portfolio_dim",
      "from_field": "lob_segment_id",
      "to_table": "enterprise_business_taxonomy",
      "to_field": "managed_segment_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "rating_grade_dim",
      "from_field": "source_system_id",
      "to_table": "source_system_registry",
      "to_field": "source_system_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "rating_mapping",
      "from_field": "model_id",
      "to_table": "model_registry_dim",
      "to_field": "model_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "rating_mapping",
      "from_field": "rating_grade_code",
      "to_table": "rating_grade_dim",
      "to_field": "rating_grade_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "rating_mapping",
      "from_field": "rating_source_id",
      "to_table": "rating_source",
      "to_field": "rating_source_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "rating_mapping",
      "from_field": "source_system_id",
      "to_table": "source_system_registry",
      "to_field": "source_system_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "scenario_dim",
      "from_field": "scenario_end_date",
      "to_table": "date_dim",
      "to_field": "calendar_date",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "scenario_dim",
      "from_field": "scenario_start_date",
      "to_table": "date_dim",
      "to_field": "calendar_date",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "scenario_dim",
      "from_field": "source_system_id",
      "to_table": "source_system_registry",
      "to_field": "source_system_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "fx_rate",
      "from_field": "from_currency_code",
      "to_table": "currency_dim",
      "to_field": "currency_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "fx_rate",
      "from_field": "to_currency_code",
      "to_table": "currency_dim",
      "to_field": "currency_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "interest_rate_index_dim",
      "from_field": "currency_code",
      "to_table": "currency_dim",
      "to_field": "currency_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "ledger_account_dim",
      "from_field": "legal_entity_id",
      "to_table": "legal_entity",
      "to_field": "legal_entity_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "ledger_account_dim",
      "from_field": "lob_segment_id",
      "to_table": "enterprise_business_taxonomy",
      "to_field": "managed_segment_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "ledger_account_dim",
      "from_field": "currency_code",
      "to_table": "currency_dim",
      "to_field": "currency_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "date_time_dim",
      "from_field": "date_id",
      "to_table": "date_dim",
      "to_field": "date_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "reporting_calendar_dim",
      "from_field": "as_of_date",
      "to_table": "date_dim",
      "to_field": "calendar_date",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "reporting_calendar_dim",
      "from_field": "period_end_date",
      "to_table": "date_dim",
      "to_field": "calendar_date",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "reporting_calendar_dim",
      "from_field": "period_start_date",
      "to_table": "date_dim",
      "to_field": "calendar_date",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "reporting_calendar_dim",
      "from_field": "regulator_code",
      "to_table": "regulatory_jurisdiction",
      "to_field": "jurisdiction_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "region_dim",
      "from_field": "source_system_id",
      "to_table": "source_system_registry",
      "to_field": "source_system_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "industry_dim",
      "from_field": "parent_industry_id",
      "to_table": "industry_dim",
      "to_field": "industry_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "regulatory_capital_basis_dim",
      "from_field": "jurisdiction_code",
      "to_table": "regulatory_jurisdiction",
      "to_field": "jurisdiction_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "regulatory_mapping",
      "from_field": "source_system_id",
      "to_table": "source_system_registry",
      "to_field": "source_system_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "report_cell_definition",
      "from_field": "calculation_rule_id",
      "to_table": "rule_registry",
      "to_field": "rule_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "report_cell_definition",
      "from_field": "report_code",
      "to_table": "report_registry",
      "to_field": "report_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "model_registry_dim",
      "from_field": "owner_org_unit_id",
      "to_table": "org_unit_dim",
      "to_field": "org_unit_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "reconciliation_control",
      "from_field": "run_version_id",
      "to_table": "run_control",
      "to_field": "run_version_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "reconciliation_control",
      "from_field": "source_system_id",
      "to_table": "source_system_registry",
      "to_field": "source_system_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "report_registry",
      "from_field": "jurisdiction_code",
      "to_table": "regulatory_jurisdiction",
      "to_field": "jurisdiction_code",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "run_control",
      "from_field": "as_of_date",
      "to_table": "date_dim",
      "to_field": "calendar_date",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "validation_check_registry",
      "from_field": "check_rule_id",
      "to_table": "rule_registry",
      "to_field": "rule_id",
      "from_layer": "L1",
      "to_layer": "L1"
    },
    {
      "from_table": "position",
      "from_field": "facility_id",
      "to_table": "facility_master",
      "to_field": "facility_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "position",
      "from_field": "credit_agreement_id",
      "to_table": "credit_agreement_master",
      "to_field": "credit_agreement_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "position",
      "from_field": "counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "position",
      "from_field": "ultimate_parent_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "position",
      "from_field": "legal_entity_id",
      "to_table": "legal_entity",
      "to_field": "legal_entity_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "position",
      "from_field": "instrument_id",
      "to_table": "instrument_master",
      "to_field": "instrument_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "position",
      "from_field": "netting_set_id",
      "to_table": "netting_set",
      "to_field": "netting_set_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "position",
      "from_field": "position_currency",
      "to_table": "currency_dim",
      "to_field": "currency_code",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "position",
      "from_field": "exposure_type_code",
      "to_table": "exposure_type_dim",
      "to_field": "exposure_type_code",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "position",
      "from_field": "credit_status_code",
      "to_table": "credit_status_dim",
      "to_field": "credit_status_code",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "exposure_counterparty_attribution",
      "from_field": "facility_id",
      "to_table": "facility_master",
      "to_field": "facility_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "exposure_counterparty_attribution",
      "from_field": "counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "exposure_counterparty_attribution",
      "from_field": "counterparty_role_code",
      "to_table": "counterparty_role_dim",
      "to_field": "counterparty_role_code",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "exposure_counterparty_attribution",
      "from_field": "risk_shifted_from_counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "facility_exposure_snapshot",
      "from_field": "facility_id",
      "to_table": "facility_master",
      "to_field": "facility_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "facility_exposure_snapshot",
      "from_field": "counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "facility_exposure_snapshot",
      "from_field": "legal_entity_id",
      "to_table": "legal_entity",
      "to_field": "legal_entity_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "facility_exposure_snapshot",
      "from_field": "currency_code",
      "to_table": "currency_dim",
      "to_field": "currency_code",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "facility_exposure_snapshot",
      "from_field": "fr2590_category_code",
      "to_table": "fr2590_category_dim",
      "to_field": "fr2590_category_code",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "facility_exposure_snapshot",
      "from_field": "product_node_id",
      "to_table": "enterprise_product_taxonomy",
      "to_field": "product_node_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "facility_exposure_snapshot",
      "from_field": "lob_segment_id",
      "to_table": "enterprise_business_taxonomy",
      "to_field": "managed_segment_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "netting_set_exposure_snapshot",
      "from_field": "netting_set_id",
      "to_table": "netting_set",
      "to_field": "netting_set_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "netting_set_exposure_snapshot",
      "from_field": "counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "netting_set_exposure_snapshot",
      "from_field": "legal_entity_id",
      "to_table": "legal_entity",
      "to_field": "legal_entity_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "netting_set_exposure_snapshot",
      "from_field": "currency_code",
      "to_table": "currency_dim",
      "to_field": "currency_code",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "facility_lob_attribution",
      "from_field": "facility_id",
      "to_table": "facility_master",
      "to_field": "facility_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "facility_lob_attribution",
      "from_field": "lob_segment_id",
      "to_table": "enterprise_business_taxonomy",
      "to_field": "managed_segment_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "collateral_snapshot",
      "from_field": "facility_id",
      "to_table": "facility_master",
      "to_field": "facility_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "collateral_snapshot",
      "from_field": "counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "collateral_snapshot",
      "from_field": "collateral_asset_id",
      "to_table": "collateral_asset_master",
      "to_field": "collateral_asset_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "collateral_snapshot",
      "from_field": "crm_type_code",
      "to_table": "crm_type_dim",
      "to_field": "crm_type_code",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "cash_flow",
      "from_field": "facility_id",
      "to_table": "facility_master",
      "to_field": "facility_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "cash_flow",
      "from_field": "counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "cash_flow",
      "from_field": "maturity_bucket_id",
      "to_table": "maturity_bucket_dim",
      "to_field": "maturity_bucket_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "cash_flow",
      "from_field": "currency_code",
      "to_table": "currency_dim",
      "to_field": "currency_code",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "facility_delinquency_snapshot",
      "from_field": "facility_id",
      "to_table": "facility_master",
      "to_field": "facility_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "facility_delinquency_snapshot",
      "from_field": "currency_code",
      "to_table": "currency_dim",
      "to_field": "currency_code",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "facility_delinquency_snapshot",
      "from_field": "counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "facility_pricing_snapshot",
      "from_field": "facility_id",
      "to_table": "facility_master",
      "to_field": "facility_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "facility_pricing_snapshot",
      "from_field": "currency_code",
      "to_table": "currency_dim",
      "to_field": "currency_code",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "facility_profitability_snapshot",
      "from_field": "facility_id",
      "to_table": "facility_master",
      "to_field": "facility_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "facility_profitability_snapshot",
      "from_field": "base_currency_code",
      "to_table": "currency_dim",
      "to_field": "currency_code",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "limit_contribution_snapshot",
      "from_field": "limit_rule_id",
      "to_table": "limit_rule",
      "to_field": "limit_rule_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "limit_contribution_snapshot",
      "from_field": "facility_id",
      "to_table": "facility_master",
      "to_field": "facility_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "limit_contribution_snapshot",
      "from_field": "counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "limit_utilization_event",
      "from_field": "limit_rule_id",
      "to_table": "limit_rule",
      "to_field": "limit_rule_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "amendment_change_detail",
      "from_field": "change_currency_code",
      "to_table": "currency_dim",
      "to_field": "currency_code",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "amendment_event",
      "from_field": "credit_agreement_id",
      "to_table": "credit_agreement_master",
      "to_field": "credit_agreement_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "amendment_event",
      "from_field": "facility_id",
      "to_table": "facility_master",
      "to_field": "facility_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "amendment_event",
      "from_field": "counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "credit_event",
      "from_field": "credit_event_type_code",
      "to_table": "credit_event_type_dim",
      "to_field": "credit_event_type_code",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "credit_event",
      "from_field": "counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "credit_event_facility_link",
      "from_field": "facility_id",
      "to_table": "facility_master",
      "to_field": "facility_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "stress_test_breach",
      "from_field": "stress_test_result_id",
      "to_table": "stress_test_result",
      "to_field": "stress_test_result_id",
      "from_layer": "L2",
      "to_layer": "L2"
    },
    {
      "from_table": "stress_test_breach",
      "from_field": "lob_segment_id",
      "to_table": "enterprise_business_taxonomy",
      "to_field": "managed_segment_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "stress_test_result",
      "from_field": "scenario_id",
      "to_table": "scenario_dim",
      "to_field": "scenario_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "deal_pipeline_fact",
      "from_field": "counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "deal_pipeline_fact",
      "from_field": "facility_id",
      "to_table": "facility_master",
      "to_field": "facility_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "deal_pipeline_fact",
      "from_field": "lob_segment_id",
      "to_table": "enterprise_business_taxonomy",
      "to_field": "managed_segment_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "deal_pipeline_fact",
      "from_field": "currency_code",
      "to_table": "currency_dim",
      "to_field": "currency_code",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "counterparty_rating_observation",
      "from_field": "counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "counterparty_rating_observation",
      "from_field": "rating_grade_id",
      "to_table": "rating_scale_dim",
      "to_field": "rating_grade_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "financial_metric_observation",
      "from_field": "counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "financial_metric_observation",
      "from_field": "facility_id",
      "to_table": "facility_master",
      "to_field": "facility_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "financial_metric_observation",
      "from_field": "credit_agreement_id",
      "to_table": "credit_agreement_master",
      "to_field": "credit_agreement_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "exception_event",
      "from_field": "limit_rule_id",
      "to_table": "limit_rule",
      "to_field": "limit_rule_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "exception_event",
      "from_field": "metric_threshold_id",
      "to_table": "metric_threshold",
      "to_field": "metric_threshold_id",
      "from_layer": "L2",
      "to_layer": "L2"
    },
    {
      "from_table": "exception_event",
      "from_field": "facility_id",
      "to_table": "facility_master",
      "to_field": "facility_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "exception_event",
      "from_field": "counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "exception_event",
      "from_field": "lob_segment_id",
      "to_table": "enterprise_business_taxonomy",
      "to_field": "managed_segment_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "risk_flag",
      "from_field": "facility_id",
      "to_table": "facility_master",
      "to_field": "facility_id",
      "from_layer": "L2",
      "to_layer": "L1"
    },
    {
      "from_table": "risk_flag",
      "from_field": "counterparty_id",
      "to_table": "counterparty",
      "to_field": "counterparty_id",
      "from_layer": "L2",
      "to_layer": "L1"
    }
  ],
  "derivation_dag": {}
}